import{l as f,q as U,z as J,C as ee,s as Y,c as i,o as d,f as H,a as e,d as C,u as $,t as r,n as Z,b as Q,w as W,h as F,v as G,F as A,r as B,j as I,p as K,e as N,g as te,N as O}from"./app-Dpla5MbZ.js";import{r as R,_ as oe}from"./AppLayout-CNJ2SeGy.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as se}from"./ExclamationTriangleIcon-DrLehM5p.js";import{r as ne}from"./XMarkIcon-MQRCM5OA.js";import{r as le}from"./MinusIcon-OSzVIr43.js";import{r as re}from"./PlusIcon-DDv7Sclb.js";import{r as ae}from"./DocumentIcon-Bft47xgM.js";const de={class:"pdf-viewer-container"},ie={key:0,class:"flex items-center justify-center h-96 bg-gray-50"},ue={key:1,class:"flex items-center justify-center h-96 bg-gray-50"},ce={class:"text-center"},me={class:"mt-2 text-gray-600"},pe={class:"flex justify-center p-4"},fe={key:3,class:"pdf-fallback"},ge=["src"],xe={__name:"PdfViewer",props:{pdfUrl:{type:String,required:!0},documentId:{type:String,required:!0},documentName:{type:String,default:"document.pdf"},height:{type:Number,default:600}},setup(l){const k=l,n=f(!0),y=f(null),u=f(!1),w=f(null),_=f(1),m=f(0),p=f(1),L=f(1),M=f(null),V=f(null),z=U(()=>k.height);let j=null;const E=async()=>{try{console.log("Using iframe fallback for PDF viewing"),u.value=!0,n.value=!1;return}catch(s){console.error("Error loading PDF.js:",s),u.value=!0,n.value=!1}},P=async()=>{try{if(j=window.pdfjsLib,!j)throw new Error("PDF.js library not available");const s=j.getDocument(k.pdfUrl);w.value=await s.promise,m.value=w.value.numPages,await g(),n.value=!1}catch(s){console.error("Error loading PDF:",s),y.value=s.message||"Failed to load PDF document",n.value=!1}},g=async()=>{if(!(!w.value||!M.value))try{const s=await w.value.getPage(_.value),h=s.getViewport({scale:p.value}),D=M.value,S=D.getContext("2d");D.height=h.height,D.width=h.width;const T={canvasContext:S,viewport:h};await s.render(T).promise,L.value=_.value}catch(s){console.error("Error rendering page:",s),y.value="Failed to render PDF page"}},c=()=>{_.value<m.value&&(_.value++,g())},b=()=>{_.value>1&&(_.value--,g())},x=()=>{p.value<2&&(p.value=Math.min(2,p.value+.25),g())},a=()=>{p.value>.5&&(p.value=Math.max(.5,p.value-.25),g())},t=()=>{const s=document.createElement("a");s.href=`/admin/documents/${k.documentId}/download?download=1`,s.download=k.documentName,document.body.appendChild(s),s.click(),document.body.removeChild(s)},o=()=>{y.value=null,n.value=!0,u.value=!1,P()},v=s=>{if(s.target.tagName!=="INPUT")switch(s.key){case"ArrowLeft":s.preventDefault(),b();break;case"ArrowRight":s.preventDefault(),c();break;case"+":case"=":s.preventDefault(),x();break;case"-":s.preventDefault(),a();break}};return J(()=>{E(),document.addEventListener("keydown",v)}),ee(()=>{document.removeEventListener("keydown",v)}),Y(p,()=>{w.value&&!n.value&&g()}),(s,h)=>(d(),i("div",de,[n.value?(d(),i("div",ie,[...h[0]||(h[0]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e("p",{class:"mt-4 text-gray-600"},"Loading PDF...")],-1)])])):y.value?(d(),i("div",ue,[e("div",ce,[C($(se),{class:"w-12 h-12 text-red-500 mx-auto"}),h[1]||(h[1]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Failed to load PDF",-1)),e("p",me,r(y.value),1),e("div",{class:"mt-6 space-x-3"},[e("button",{onClick:o,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Retry "),e("button",{onClick:t,class:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"}," Download Instead ")])])])):(d(),i("div",{key:2,ref_key:"canvasContainer",ref:V,class:"pdf-canvas-container bg-white overflow-auto",style:Z({height:z.value+"px"})},[e("div",pe,[e("canvas",{ref_key:"pdfCanvas",ref:M,class:"border border-gray-300 shadow-lg",style:{maxWidth:"100%"}},null,512)])],4)),u.value&&!n.value&&!y.value?(d(),i("div",fe,[e("iframe",{src:l.pdfUrl+"#toolbar=1&navpanes=1&scrollbar=1",class:"w-full border border-gray-300 rounded-lg shadow-lg",style:{height:"800px","min-height":"800px"},frameborder:"0",allowfullscreen:""},null,8,ge)])):H("",!0)]))}},ve=X(xe,[["__scopeId","data-v-e396627e"]]),be={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50"},he={class:"relative min-h-screen flex items-center justify-center p-4"},ye={class:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-screen overflow-hidden"},we={class:"flex items-center justify-between p-6 border-b border-gray-200"},_e={class:"text-lg font-medium text-gray-900"},ke={class:"mt-1 text-sm text-gray-500"},je={class:"flex items-center space-x-2"},Ce={class:"relative",style:{height:"calc(100vh - 200px)"}},De={key:1,class:"h-full bg-gray-50 p-4"},$e={class:"flex items-center justify-between mb-4"},Me={class:"flex items-center space-x-2"},Pe=["disabled"],Se={class:"text-sm text-gray-600 px-2"},Fe=["disabled"],Ue={class:"overflow-auto h-full bg-white rounded border border-gray-200 p-4"},Le=["src","alt"],Ve={key:2,class:"h-full bg-gray-50 flex items-center justify-center"},ze={class:"text-center"},Ee={class:"mt-2 text-sm text-gray-500"},Te={__name:"DocumentViewModal",props:{show:{type:Boolean,default:!1},document:{type:Object,default:null}},emits:["close"],setup(l,{emit:k}){const n=l,y=k,u=f(1),w=U(()=>n.document?`/admin/documents/${n.document.id}/download`:""),_=U(()=>n.document?`/admin/documents/${n.document.id}/download`:""),m=U(()=>n.document?!!(n.document.mime_type==="application/pdf"||n.document.name&&n.document.name.toLowerCase().split(".").pop()==="pdf"||n.document.file_path&&n.document.file_path.toLowerCase().split(".").pop()==="pdf"):!1),p=U(()=>{var c;return n.document?((c=n.document.mime_type)==null?void 0:c.startsWith("image/"))||/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(n.document.name):!1}),L=c=>{if(!c)return"Unknown";const b=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(c)/Math.log(1024));return Math.round(c/Math.pow(1024,x)*100)/100+" "+b[x]},M=()=>{u.value<3&&(u.value=Math.min(3,u.value+.25))},V=()=>{u.value>.5&&(u.value=Math.max(.5,u.value-.25))},z=()=>{u.value=1},j=()=>{if(!n.document)return;const c=`/admin/documents/${n.document.id}/download?download=1`,b=n.document.original_name||n.document.name||"document.pdf",x=document.createElement("a");x.href=c,x.download=b,x.style.display="none",document.body.appendChild(x),x.click(),document.body.removeChild(x)},E=()=>{console.log("Document loaded successfully")},P=c=>{console.error("Document load error:",c)};Y(()=>n.document,()=>{u.value=1});const g=c=>{c.key==="Escape"&&n.show&&y("close")};return Y(()=>n.show,c=>{c?(document.addEventListener("keydown",g),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",g),document.body.style.overflow="")}),(c,b)=>{var x,a,t,o,v,s,h,D,S;return l.show?(d(),i("div",be,[e("div",he,[e("div",ye,[e("div",we,[e("div",null,[e("h3",_e,r((x=l.document)==null?void 0:x.name),1),e("p",ke,r((o=(t=(a=l.document)==null?void 0:a.client)==null?void 0:t.user)==null?void 0:o.first_name)+" "+r((h=(s=(v=l.document)==null?void 0:v.client)==null?void 0:s.user)==null?void 0:h.last_name)+" â€¢ "+r(L((D=l.document)==null?void 0:D.file_size)),1)]),e("div",je,[e("button",{onClick:j,class:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm"}," Download "),e("button",{onClick:b[0]||(b[0]=T=>c.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600"},[C($(ne),{class:"w-6 h-6"})])])]),e("div",Ce,[m.value?(d(),Q(ve,{key:0,"pdf-url":_.value,"document-id":l.document.id.toString(),"document-name":l.document.name,height:600},null,8,["pdf-url","document-id","document-name"])):p.value?(d(),i("div",De,[e("div",$e,[b[1]||(b[1]=e("h4",{class:"text-sm font-medium text-gray-900"},"Image Preview",-1)),e("div",Me,[e("button",{onClick:V,disabled:u.value<=.5,class:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 bg-white border border-gray-300 rounded"},[C($(le),{class:"w-4 h-4"})],8,Pe),e("span",Se,r(Math.round(u.value*100))+"%",1),e("button",{onClick:M,disabled:u.value>=3,class:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 bg-white border border-gray-300 rounded"},[C($(re),{class:"w-4 h-4"})],8,Fe),e("button",{onClick:z,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50"}," Reset ")])]),e("div",Ue,[e("img",{src:w.value,alt:l.document.name,style:Z({transform:`scale(${u.value})`,transformOrigin:"top left"}),class:"max-w-full h-auto mx-auto transition-transform duration-200",onLoad:E,onError:P},null,44,Le)])])):(d(),i("div",Ve,[e("div",ze,[C($(ae),{class:"mx-auto h-16 w-16 text-gray-400"}),b[2]||(b[2]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Preview not available",-1)),e("p",Ee," This file type ("+r(((S=l.document)==null?void 0:S.mime_type)||"unknown")+") cannot be previewed in the browser. ",1),e("div",{class:"mt-6"},[e("button",{onClick:j,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-sm font-medium"}," Download to View ")])])]))])])])])):H("",!0)}}},Ae=X(Te,[["__scopeId","data-v-d363072d"]]),Be={class:"relative overflow-hidden"},Ie={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},Ne={class:"flex items-center space-x-4"},Oe={class:"w-16 h-16 bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-purple-100"},Re={class:"flex items-center space-x-4 mt-3"},He={class:"flex items-center space-x-2"},Ye={class:"text-xs font-semibold text-purple-700"},qe={class:"space-y-6"},We={class:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden mb-8"},Ge={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},Ke={class:"flex items-center justify-between"},Je={class:"flex items-center space-x-2"},Ze={class:"p-8"},Qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6"},Xe={class:"md:col-span-2 lg:col-span-1 space-y-2"},et={class:"relative"},tt={class:"space-y-2"},ot=["value"],st={class:"space-y-2"},nt=["value"],lt={class:"space-y-2"},rt=["value"],at={class:"space-y-2"},dt={class:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden"},it={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},ut={class:"flex items-center justify-between"},ct={class:"text-sm text-gray-600 mt-1"},mt={class:"bg-white px-4 py-2 rounded-lg border border-gray-200 shadow-sm"},pt={class:"text-sm font-semibold text-purple-600"},ft={key:0,class:"p-12 text-center"},gt={class:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-200 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-inner"},xt={key:1,class:"overflow-x-auto"},vt={class:"min-w-full"},bt={class:"bg-white divide-y divide-gray-100"},ht={class:"px-6 py-5 whitespace-nowrap"},yt={class:"flex items-center"},wt={class:"w-10 h-10 bg-gradient-to-br from-purple-100 to-indigo-200 rounded-xl flex items-center justify-center mr-4 shadow-sm"},_t={class:"text-sm font-semibold text-gray-900"},kt={class:"text-xs text-gray-500 font-medium"},jt={class:"px-6 py-5 whitespace-nowrap"},Ct={class:"text-sm font-semibold text-gray-900"},Dt={class:"text-xs text-gray-500 font-medium"},$t={class:"px-6 py-5 whitespace-nowrap"},Mt={class:"text-sm font-medium text-gray-900"},Pt={class:"px-6 py-5 whitespace-nowrap"},St={class:"text-sm font-semibold text-gray-900"},Ft={class:"px-6 py-5 whitespace-nowrap"},Ut={key:0,class:"w-1.5 h-1.5 bg-emerald-400 rounded-full mr-2"},Lt={key:1,class:"w-1.5 h-1.5 bg-rose-400 rounded-full mr-2"},Vt={key:2,class:"w-1.5 h-1.5 bg-amber-400 rounded-full mr-2"},zt={class:"px-6 py-5 whitespace-nowrap"},Et={class:"text-sm text-gray-600 font-medium"},Tt={class:"px-6 py-5 text-center"},At={class:"flex justify-center space-x-2"},Bt=["onClick"],It=["onClick"],Nt=["onClick"],Ot={key:2,class:"px-6 py-4 bg-gray-50 border-t border-gray-200"},Rt={class:"flex justify-between items-center"},Ht={class:"text-sm text-gray-600 font-medium"},Yt={class:"font-bold text-gray-900"},qt={class:"font-bold text-gray-900"},Wt={class:"font-bold text-purple-600"},Gt={class:"flex space-x-2"},Kt=["onClick"],Jt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Zt={class:"relative top-20 mx-auto p-6 border w-96 shadow-2xl rounded-2xl bg-white"},Qt={class:"mt-3"},Xt={class:"flex justify-end space-x-3 pt-4"},eo=["disabled"],uo={__name:"Documents",props:{documents:Object,filters:Object,clients:Array,taxYears:Array,documentTypes:Object},setup(l){const k=l,n=f(!1),y=f(!1),u=f(!1),w=f(null),_=f(null),m=f({...k.filters}),p=f({status:"",notes:""}),L=U(()=>{const a=[],t=k.documents.current_page,o=k.documents.last_page;for(let v=Math.max(1,t-2);v<=Math.min(o,t+2);v++)a.push(v);return a}),M=a=>{console.log("Viewing document:",a),a&&a.id?O.get(`/admin/documents/${a.id}`):console.error("Document or document ID is missing:",a)},V=()=>{y.value=!1,_.value=null},z=a=>{w.value=a,p.value={status:a.status,notes:a.notes||""},n.value=!0},j=()=>{n.value=!1,w.value=null,p.value={status:"",notes:""}},E=()=>{u.value=!0,O.patch(`/admin/documents/${w.value.id}/status`,p.value,{onSuccess:()=>{j()},onFinish:()=>{u.value=!1}})},P=a=>{confirm("Are you sure you want to delete this document? This action cannot be undone.")&&O.delete(`/admin/documents/${a.id}`)},g=()=>{const a=Object.fromEntries(Object.entries(m.value).filter(([t,o])=>o!==""&&o!==null));O.get("/admin/documents",a,{preserveState:!0,replace:!0})},c=()=>{m.value={search:"",client_id:"",type:"",year:"",status:""},g()},b=a=>{O.get("/admin/documents",{...m.value,page:a},{preserveState:!0,replace:!0})},x=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return J(()=>{const t=new URLSearchParams(window.location.search).get("client_id");t&&!m.value.client_id&&(m.value.client_id=t,g())}),(a,t)=>(d(),Q(oe,null,{header:W(()=>[e("div",Be,[t[11]||(t[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-purple-50 to-indigo-50"},null,-1)),t[12]||(t[12]=e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-purple-100/40 to-transparent rounded-bl-full"},null,-1)),t[13]||(t[13]=e("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-indigo-100/30 to-transparent rounded-tr-full"},null,-1)),e("div",Ie,[e("div",Ne,[e("div",Oe,[C($(R),{class:"w-8 h-8 text-white"})]),e("div",null,[t[9]||(t[9]=e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-purple-900 to-indigo-900 bg-clip-text text-transparent"}," Document Management ",-1)),t[10]||(t[10]=e("p",{class:"mt-2 text-sm text-gray-600 font-medium"},"Review and manage client documents efficiently",-1)),e("div",Re,[e("div",He,[t[7]||(t[7]=e("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"},null,-1)),e("span",Ye,r(l.documents.total)+" Total Documents",1)]),t[8]||(t[8]=e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-2 h-2 bg-indigo-400 rounded-full"}),e("span",{class:"text-xs font-semibold text-indigo-700"},"Real-time Processing")],-1))])])])])])]),default:W(()=>[e("div",qe,[e("div",We,[e("div",Ge,[e("div",Ke,[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900"},"Search & Filter Documents"),e("p",{class:"text-sm text-gray-600 mt-1"},"Find and manage your document library")],-1)),e("div",Je,[C($(R),{class:"w-5 h-5 text-gray-400"})])])]),e("div",Ze,[e("div",Qe,[e("div",Xe,[t[16]||(t[16]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Search Documents",-1)),e("div",et,[F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>m.value.search=o),onInput:g,type:"text",placeholder:"Document name, client...",class:"w-full px-4 py-3 pl-10 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-gray-900"},null,544),[[G,m.value.search]]),t[15]||(t[15]=e("svg",{class:"absolute left-3 top-3.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",tt,[t[18]||(t[18]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Client",-1)),F(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>m.value.client_id=o),onChange:g,class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white text-gray-900"},[t[17]||(t[17]=e("option",{value:""},"All Clients",-1)),(d(!0),i(A,null,B(l.clients,o=>(d(),i("option",{key:o.id,value:o.id},r(o.first_name)+" "+r(o.last_name),9,ot))),128))],544),[[I,m.value.client_id]])]),e("div",st,[t[20]||(t[20]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Document Type",-1)),F(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>m.value.type=o),onChange:g,class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white text-gray-900"},[t[19]||(t[19]=e("option",{value:""},"All Types",-1)),(d(!0),i(A,null,B(l.documentTypes,(o,v)=>(d(),i("option",{key:v,value:v},r(o),9,nt))),128))],544),[[I,m.value.type]])]),e("div",lt,[t[22]||(t[22]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Tax Year",-1)),F(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>m.value.year=o),onChange:g,class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white text-gray-900"},[t[21]||(t[21]=e("option",{value:""},"All Years",-1)),(d(!0),i(A,null,B(l.taxYears,o=>(d(),i("option",{key:o,value:o},r(o),9,rt))),128))],544),[[I,m.value.year]])]),e("div",at,[t[24]||(t[24]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Status",-1)),F(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>m.value.status=o),onChange:g,class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white text-gray-900"},[...t[23]||(t[23]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],544),[[I,m.value.status]])]),e("div",{class:"flex items-end md:col-span-2 lg:col-span-3 xl:col-span-1"},[e("button",{onClick:c,class:"w-full bg-gradient-to-r from-gray-100 to-slate-100 hover:from-gray-200 hover:to-slate-200 text-gray-700 px-4 py-3 rounded-xl font-semibold transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center space-x-2"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",null,"Clear Filters",-1)])])])])])]),e("div",dt,[e("div",it,[e("div",ut,[e("div",null,[t[26]||(t[26]=e("h3",{class:"text-xl font-bold text-gray-900"},"Document Library",-1)),e("p",ct,r(l.documents.total)+" documents in your system",1)]),e("div",mt,[e("span",pt,r(l.documents.total)+" Total",1)])])]),l.documents.data.length===0?(d(),i("div",ft,[e("div",gt,[C($(R),{class:"w-8 h-8 text-purple-600"})]),t[27]||(t[27]=e("p",{class:"text-gray-500 font-medium"},"No documents found",-1)),t[28]||(t[28]=e("p",{class:"text-gray-400 text-sm mt-1"},"Documents will appear here as they are uploaded",-1))])):(d(),i("div",xt,[e("table",vt,[t[32]||(t[32]=e("thead",{class:"bg-gradient-to-r from-gray-50 to-slate-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"}," Document "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"}," Client "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"}," Tax Year "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"}," Uploaded "),e("th",{class:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",bt,[(d(!0),i(A,null,B(l.documents.data,o=>{var v,s,h,D,S,T;return d(),i("tr",{key:o.id,class:"hover:bg-gradient-to-r hover:from-purple-50 hover:to-indigo-50 transition-all duration-200 group"},[e("td",ht,[e("div",yt,[e("div",wt,[C($(R),{class:"w-5 h-5 text-purple-600"})]),e("div",null,[e("div",_t,r(o.name),1),e("div",kt,r(o.formatted_file_size),1)])])]),e("td",jt,[e("div",Ct,r((s=(v=o.client)==null?void 0:v.user)==null?void 0:s.first_name)+" "+r((D=(h=o.client)==null?void 0:h.user)==null?void 0:D.last_name),1),e("div",Dt,r((T=(S=o.client)==null?void 0:S.user)==null?void 0:T.email),1)]),e("td",$t,[e("span",Mt,r(l.documentTypes[o.document_type]),1)]),e("td",Pt,[e("span",St,r(o.tax_year||"-"),1)]),e("td",Ft,[e("span",{class:K([{"bg-amber-100 text-amber-800 border border-amber-200":o.status==="pending","bg-emerald-100 text-emerald-800 border border-emerald-200":o.status==="approved","bg-rose-100 text-rose-800 border border-rose-200":o.status==="rejected"},"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-sm"])},[o.status==="approved"?(d(),i("span",Ut)):o.status==="rejected"?(d(),i("span",Lt)):(d(),i("span",Vt)),N(" "+r(o.status.charAt(0).toUpperCase()+o.status.slice(1)),1)],2)]),e("td",zt,[e("span",Et,r(x(o.created_at)),1)]),e("td",Tt,[e("div",At,[e("button",{onClick:q=>M(o),class:"bg-gradient-to-r from-slate-500 to-gray-600 hover:from-slate-600 hover:to-gray-700 text-white px-3 py-1.5 rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",title:"View Details"},[...t[29]||(t[29]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Bt),e("button",{onClick:q=>z(o),class:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-3 py-1.5 rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",title:"Update Status"},[...t[30]||(t[30]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,It),e("button",{onClick:q=>P(o),class:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white px-3 py-1.5 rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",title:"Delete Document"},[...t[31]||(t[31]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Nt)])])])}),128))])])])),l.documents.last_page>1?(d(),i("div",Ot,[e("div",Rt,[e("div",Ht,[t[33]||(t[33]=N(" Showing ",-1)),e("span",Yt,r(l.documents.from),1),t[34]||(t[34]=N(" to ",-1)),e("span",qt,r(l.documents.to),1),t[35]||(t[35]=N(" of ",-1)),e("span",Wt,r(l.documents.total),1),t[36]||(t[36]=N(" results ",-1))]),e("div",Gt,[(d(!0),i(A,null,B(L.value,o=>(d(),i("button",{key:o,onClick:v=>b(o),class:K(["px-4 py-2 text-sm rounded-lg font-semibold transition-all duration-200",o===l.documents.current_page?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200 shadow-sm"])},r(o),11,Kt))),128))])])])):H("",!0)])]),C(Ae,{show:y.value,document:_.value,onClose:V},null,8,["show","document"]),n.value?(d(),i("div",Jt,[e("div",Zt,[e("div",Qt,[t[40]||(t[40]=e("div",{class:"flex items-center space-x-3 mb-6"},[e("div",{class:"w-10 h-10 bg-gradient-to-br from-purple-100 to-indigo-200 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])]),e("h3",{class:"text-xl font-bold text-gray-900"},"Update Document Status")],-1)),e("form",{onSubmit:te(E,["prevent"]),class:"space-y-6"},[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Status",-1)),F(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>p.value.status=o),class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white",required:""},[...t[37]||(t[37]=[e("option",{value:"pending"},"Pending Review",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],512),[[I,p.value.status]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Notes (Optional)",-1)),F(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>p.value.notes=o),rows:"4",placeholder:"Add any notes about this status change...",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 resize-none",maxlength:"500"},null,512),[[G,p.value.notes]])]),e("div",Xt,[e("button",{type:"button",onClick:j,class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold transition-all duration-200"}," Cancel "),e("button",{type:"submit",disabled:u.value,class:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed"},r(u.value?"Updating...":"Update Status"),9,eo)])],32)])])])):H("",!0)]),_:1}))}};export{uo as default};

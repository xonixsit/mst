import{Q as S,r as w,e as k,w as j,a as e,c as u,g as b,b as g,u as a,t as l,o as n,F as N,h as $,p as y,f as C,j as B,k as A,v as T,N as R}from"./app-DCXfZtg7.js";import{e as f,A as V}from"./AppLayout-B_7w1R7Y.js";import{r as z}from"./UserIcon-DyKuXcXy.js";import{r as D}from"./CheckCircleIcon-BCDqvKkf.js";import{r as F}from"./EnvelopeIcon-kFryV_M1.js";import{r as L}from"./ArrowLeftIcon-DrEVUXEW.js";import"./ConsentBanner-BMXIllXs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"relative overflow-hidden"},P={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},Y={class:"flex items-center space-x-4"},q={class:"w-14 h-14 bg-gradient-to-br from-cyan-500 via-cyan-600 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-cyan-100"},H={class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-cyan-900 to-blue-900 bg-clip-text text-transparent"},O={class:"mt-2 text-sm text-gray-600 font-medium"},Q={class:"flex items-center space-x-4 mt-3"},G={class:"flex items-center space-x-2"},I={class:"text-xs font-semibold text-cyan-700"},J={class:"flex items-center space-x-2"},K={class:"flex items-center space-x-3"},W={class:"py-6"},X={class:"max-w-6xl mx-auto sm:px-6 lg:px-4"},Z={class:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden"},ee={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},te={class:"flex items-center"},se={class:"w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center mr-3"},re={class:"text-sm text-gray-600"},oe={class:"p-8 space-y-6"},le={class:"px-6 py-5 border-b border-gray-200"},ae={class:"flex items-center justify-between"},ne={class:"flex items-center space-x-4"},ie={class:"text-lg font-bold text-gray-900"},de={class:"flex items-center space-x-3 mt-1"},ce={class:"text-sm font-medium text-gray-600"},ue={key:0,class:"flex items-center space-x-1"},ge={class:"flex items-center space-x-3"},ye={class:"px-6 py-6"},me={class:"text-lg font-bold text-gray-900 mb-4"},xe={class:"bg-white rounded-xl p-4 border border-gray-200 shadow-inner"},be={class:"whitespace-pre-wrap text-gray-800 leading-relaxed"},fe={key:0,class:"px-6 py-4 bg-gradient-to-r from-green-50 to-emerald-100 border-t border-gray-200 rounded-b-2xl"},he={class:"flex items-center space-x-2"},pe={class:"text-sm font-medium text-green-800"},ve={key:0,class:"flex justify-center my-4"},we={key:0,class:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4"},_e={class:"relative bg-white shadow-2xl rounded-2xl border border-gray-100 w-full max-w-2xl max-h-[90vh] overflow-y-auto"},ke={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200 rounded-t-2xl"},je={class:"flex items-center justify-between"},Ce={class:"flex items-center"},Re={class:"w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center mr-3"},Ue={class:"p-8"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se={class:"space-y-2"},Ne=["value"],$e={class:"space-y-2"},Be=["value"],Ae={class:"space-y-2"},Te={class:"flex justify-between items-center"},Ve={class:"text-xs text-gray-500"},ze={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},De=["disabled"],Fe={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ge={__name:"Show",props:{message:Object,conversation:Array},setup(s){const i=s,m=S(),h=w(!1),x=w(!1),d=w({body:""}),U=()=>{var o;if(!d.value.body||!d.value.body.trim()){alert("Please enter a reply message");return}x.value=!0,R.post(`/admin/messages/${i.message.id}/reply`,{body:d.value.body.trim(),client_id:(o=i.message.client)==null?void 0:o.id},{onSuccess:()=>{p(),R.reload()},onError:t=>{alert("Error sending reply: "+(t.error||"Unknown error"))},onFinish:()=>{x.value=!1}})},p=()=>{h.value=!1,d.value={body:""}},M=()=>i.message.sender_id===i.message.recipient_id?c(i.message.sender):i.message.sender_id===m.props.auth.user.id?c(i.message.recipient):c(i.message.sender),c=o=>{if(!o)return"Unknown User";if(o.name)return o.name;const t=[];return o.first_name&&t.push(o.first_name),o.last_name&&t.push(o.last_name),t.length>0?t.join(" "):o.email?o.email:"Unknown User"},_=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(o,t)=>(n(),k(V,null,{header:j(()=>{var r;return[e("div",E,[t[6]||(t[6]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-cyan-50 to-blue-50"},null,-1)),t[7]||(t[7]=e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-cyan-100/40 to-transparent rounded-bl-full"},null,-1)),t[8]||(t[8]=e("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-blue-100/30 to-transparent rounded-tr-full"},null,-1)),e("div",P,[e("div",Y,[e("div",q,[g(a(F),{class:"w-8 h-8 text-white"})]),e("div",null,[e("h1",H,l(s.message.subject),1),e("p",O,l(s.message.sender_id===a(m).props.auth.user.id?"To: "+c(s.message.recipient):"From: "+c(s.message.sender)),1),e("div",Q,[e("div",G,[t[3]||(t[3]=e("div",{class:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"},null,-1)),e("span",I,"Client: "+l((r=s.message.client)!=null&&r.user?c(s.message.client.user):"Unknown Client"),1)]),e("div",J,[e("div",{class:y([{"bg-red-400":s.message.priority==="high","bg-yellow-400":s.message.priority==="normal","bg-gray-400":s.message.priority==="low"},"w-2 h-2 rounded-full"])},null,2),e("span",{class:y([{"text-red-700":s.message.priority==="high","text-yellow-700":s.message.priority==="normal","text-gray-700":s.message.priority==="low"},"text-xs font-semibold"])},l(s.message.priority.charAt(0).toUpperCase()+s.message.priority.slice(1))+" Priority",3)])])])]),e("div",K,[e("button",{onClick:t[0]||(t[0]=v=>o.$inertia.visit("/admin/messages")),class:"bg-gradient-to-r from-slate-500 to-gray-600 hover:from-slate-600 hover:to-gray-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group font-semibold"},[g(a(L),{class:"w-5 h-5 mr-2"}),t[4]||(t[4]=e("span",null,"Back to Messages",-1))]),e("button",{onClick:t[1]||(t[1]=v=>h.value=!0),class:"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group font-semibold"},[g(a(f),{class:"w-5 h-5 mr-2"}),t[5]||(t[5]=e("span",null,"Reply",-1))])])])])]}),default:j(()=>[e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[g(a(f),{class:"w-4 h-4 text-white"})]),e("div",null,[t[9]||(t[9]=e("h3",{class:"text-lg font-bold text-gray-900"},"Message Thread",-1)),e("p",re,l((s.conversation||[s.message]).length)+" message"+l((s.conversation||[s.message]).length!==1?"s":"")+" in this conversation",1)])])]),e("div",oe,[(n(!0),u(N,null,$(s.conversation||[s.message],(r,v)=>(n(),u("div",{key:r.id,class:"relative"},[e("div",{class:y(["bg-gradient-to-br rounded-2xl shadow-lg border-2 transition-all duration-300 hover:shadow-xl",{"from-cyan-50 to-blue-100 border-cyan-200 ring-2 ring-cyan-300":r.id===s.message.id,"from-gray-50 to-slate-100 border-gray-200":r.id!==s.message.id}])},[e("div",le,[e("div",ae,[e("div",ne,[e("div",{class:y(["w-12 h-12 rounded-xl flex items-center justify-center shadow-lg",r.sender_id===a(m).props.auth.user.id?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-purple-500 to-pink-600"])},[g(a(z),{class:"w-6 h-6 text-white"})],2),e("div",null,[e("h3",ie,l(r.sender_id===a(m).props.auth.user.id?"You":c(r.sender)),1),e("div",de,[e("p",ce,l(_(r.created_at)),1),!r.is_read&&r.recipient_id===a(m).props.auth.user.id?(n(),u("div",ue,[...t[10]||(t[10]=[e("div",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"},null,-1),e("span",{class:"text-xs font-semibold text-blue-700"},"Unread",-1)])])):b("",!0)])])]),e("div",ge,[e("span",{class:y([{"bg-red-100 text-red-800 border-red-200":r.priority==="high","bg-yellow-100 text-yellow-800 border-yellow-200":r.priority==="normal","bg-gray-100 text-gray-800 border-gray-200":r.priority==="low"},"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border shadow-sm"])},[e("div",{class:y([{"bg-red-500":r.priority==="high","bg-yellow-500":r.priority==="normal","bg-gray-500":r.priority==="low"},"w-1.5 h-1.5 rounded-full mr-2"])},null,2),C(" "+l(r.priority.charAt(0).toUpperCase()+r.priority.slice(1)),1)],2)])])]),e("div",ye,[e("h4",me,l(r.subject),1),e("div",xe,[e("p",be,l(r.body),1)])]),r.read_at?(n(),u("div",fe,[e("div",he,[g(a(D),{class:"w-4 h-4 text-green-600"}),e("p",pe," Read on "+l(_(r.read_at)),1)])])):b("",!0)],2),v<(s.conversation||[s.message]).length-1?(n(),u("div",ve,[...t[11]||(t[11]=[e("div",{class:"w-px h-8 bg-gradient-to-b from-cyan-300 to-blue-400"},null,-1)])])):b("",!0)]))),128))])])])]),h.value?(n(),u("div",we,[e("div",_e,[e("div",ke,[e("div",je,[e("div",Ce,[e("div",Re,[g(a(f),{class:"w-4 h-4 text-white"})]),t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-gray-900"},"Reply to Message",-1))]),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...t[13]||(t[13]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Ue,[e("form",{onSubmit:B(U,["prevent"]),class:"space-y-6"},[e("div",Me,[e("div",Se,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-gray-700"},"To",-1)),e("input",{value:M(),type:"text",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed",disabled:""},null,8,Ne)]),e("div",$e,[t[15]||(t[15]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Subject",-1)),e("input",{value:"Re: "+s.message.subject,type:"text",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed",disabled:""},null,8,Be)])]),e("div",Ae,[t[16]||(t[16]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Your Reply",-1)),A(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>d.value.body=r),rows:"8",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-200 resize-none text-gray-900",maxlength:"2000",required:"",placeholder:"Type your reply here..."},null,512),[[T,d.value.body]]),e("div",Te,[e("p",Ve,l(d.value.body.length)+"/2000 characters",1)])]),e("div",ze,[e("button",{type:"button",onClick:p,class:"bg-gradient-to-r from-gray-500 to-slate-600 hover:from-gray-600 hover:to-slate-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105"}," Cancel "),e("button",{type:"submit",disabled:x.value||!d.value.body.trim(),class:"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center"},[x.value?(n(),u("svg",Fe,[...t[17]||(t[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(n(),k(a(f),{key:1,class:"w-5 h-5 mr-2"})),C(" "+l(x.value?"Sending Reply...":"Send Reply"),1)],8,De)])],32)])])])):b("",!0)]),_:1}))}};export{Ge as default};

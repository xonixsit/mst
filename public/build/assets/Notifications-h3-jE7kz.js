import{l as u,q as y,b as h,w as _,a as t,c as r,f as m,o as a,F as v,r as k,p as g,e as D,t as l,x as A,N as p}from"./app-BWB3rdom.js";import{_ as B,d as j,r as L}from"./AppLayout-BJNZDLSI.js";import{r as U}from"./ExclamationTriangleIcon-64XBs6FU.js";import{r as V}from"./CheckCircleIcon-z1hjkOrA.js";import{r as J}from"./InformationCircleIcon-BsKGZxUZ.js";import{r as R}from"./UserIcon-B7y7Xt8h.js";const Z={class:"max-w-4xl mx-auto"},E={class:"mb-6"},I={class:"flex space-x-8"},F=["onClick"],Y={class:"bg-white shadow rounded-lg"},q={key:0,class:"p-8 text-center"},z={key:1,class:"divide-y divide-gray-200"},H={class:"flex items-start space-x-3"},W={class:"flex-shrink-0"},G={class:"flex-1 min-w-0"},K={class:"flex items-center justify-between"},O={class:"text-sm font-medium text-gray-900"},P={class:"flex items-center space-x-2"},Q={class:"text-xs text-gray-500"},X={key:0,class:"w-2 h-2 bg-blue-600 rounded-full"},ee={class:"mt-1 text-sm text-gray-600"},te={key:0,class:"mt-2"},se=["href"],oe={class:"flex-shrink-0"},ae=["onClick"],re={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:0,class:"mt-6 text-center"},ie=["disabled"],xe={__name:"Notifications",setup(de){const i=u("all"),c=u(!1),f=u(!0),n=u([{id:1,type:"client_update",title:"Client Information Updated",message:"John Doe has updated their personal information.",read:!1,created_at:"2024-01-15T10:30:00Z",action_url:"/admin/clients/1",action_text:"View Client"},{id:2,type:"system",title:"System Maintenance Scheduled",message:"Scheduled maintenance will occur on January 20th from 2-4 AM EST.",read:!1,created_at:"2024-01-14T15:45:00Z"},{id:3,type:"success",title:"Tax Return Completed",message:"Tax return for Jane Smith has been successfully processed.",read:!0,created_at:"2024-01-13T09:15:00Z",action_url:"/admin/clients/2/tax-returns",action_text:"View Return"},{id:4,type:"warning",title:"Document Missing",message:"W-2 form is missing for client Michael Johnson.",read:!0,created_at:"2024-01-12T14:20:00Z",action_url:"/admin/clients/3/documents"}]),b=y(()=>[{key:"all",name:"All",count:n.value.length},{key:"unread",name:"Unread",count:n.value.filter(e=>!e.read).length},{key:"client_update",name:"Client Updates",count:n.value.filter(e=>e.type==="client_update").length},{key:"system",name:"System",count:n.value.filter(e=>e.type==="system").length}]),x=y(()=>i.value==="all"?n.value:i.value==="unread"?n.value.filter(e=>!e.read):n.value.filter(e=>e.type===i.value)),w=e=>{const s={client_update:R,system:J,success:V,warning:U,document:L,default:j};return s[e]||s.default},C=e=>{const s={client_update:"bg-blue-100 text-blue-600",system:"bg-gray-100 text-gray-600",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",document:"bg-purple-100 text-purple-600",default:"bg-gray-100 text-gray-600"};return s[e]||s.default},$=e=>{const s=new Date(e),d=Math.floor((new Date-s)/(1e3*60*60));return d<1?"Just now":d<24?`${d}h ago`:d<48?"Yesterday":s.toLocaleDateString()},M=e=>{e.read=!e.read;const s=$page.props.auth.user,o=(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="tax_professional"?"/admin":"/client";p.patch(`${o}/notifications/${e.id}/toggle-read`,{},{preserveScroll:!0})},S=()=>{n.value.forEach(o=>o.read=!0);const e=$page.props.auth.user,s=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="tax_professional"?"/admin":"/client";p.post(`${s}/notifications/mark-all-read`,{},{preserveScroll:!0})},N=()=>{if(confirm("Are you sure you want to clear all notifications?")){n.value=[];const e=$page.props.auth.user,s=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="tax_professional"?"/admin":"/client";p.delete(`${s}/notifications/clear-all`,{preserveScroll:!0})}},T=()=>{c.value=!0,setTimeout(()=>{c.value=!1,f.value=!1},1e3)};return(e,s)=>(a(),h(B,null,{header:_(()=>[t("div",{class:"flex items-center justify-between"},[s[0]||(s[0]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Notifications"),t("p",{class:"mt-1 text-sm text-gray-600"},"Stay updated with your latest notifications")],-1)),t("div",{class:"flex space-x-3"},[t("button",{onClick:S,class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}," Mark All as Read "),t("button",{onClick:N,class:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 text-sm"}," Clear All ")])])]),default:_(()=>[t("div",Z,[t("div",E,[t("nav",I,[(a(!0),r(v,null,k(b.value,o=>(a(),r("button",{key:o.key,onClick:d=>i.value=o.key,class:g([i.value===o.key?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])},[D(l(o.name)+" ",1),o.count>0?(a(),r("span",{key:0,class:g([i.value===o.key?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900","ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium"])},l(o.count),3)):m("",!0)],10,F))),128))])]),t("div",Y,[x.value.length===0?(a(),r("div",q,[...s[1]||(s[1]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5-5-5h5v-12"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No notifications",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"You're all caught up!",-1)])])):(a(),r("ul",z,[(a(!0),r(v,null,k(x.value,o=>(a(),r("li",{key:o.id,class:g(["p-4 hover:bg-gray-50 transition-colors duration-200",o.read?"":"bg-blue-50"])},[t("div",H,[t("div",W,[t("div",{class:g(["w-8 h-8 rounded-full flex items-center justify-center",C(o.type)])},[(a(),h(A(w(o.type)),{class:"w-4 h-4"}))],2)]),t("div",G,[t("div",K,[t("p",O,l(o.title),1),t("div",P,[t("span",Q,l($(o.created_at)),1),o.read?m("",!0):(a(),r("div",X))])]),t("p",ee,l(o.message),1),o.action_url?(a(),r("div",te,[t("a",{href:o.action_url,class:"text-sm text-indigo-600 hover:text-indigo-500"},l(o.action_text||"View Details")+" â†’ ",9,se)])):m("",!0)]),t("div",oe,[t("button",{onClick:d=>M(o),class:"text-gray-400 hover:text-gray-600 focus:outline-none"},[o.read?(a(),r("svg",ne,[...s[3]||(s[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(a(),r("svg",re,[...s[2]||(s[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],8,ae)])])],2))),128))]))]),f.value?(a(),r("div",le,[t("button",{onClick:T,class:"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:c.value},l(c.value?"Loading...":"Load More"),9,ie)])):m("",!0)])]),_:1}))}};export{xe as default};

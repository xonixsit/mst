import{q as b,b as k,w as f,a as t,d as g,u,i as N,e as A,c as l,f as c,t as d,p as D,o as a,F as S,r as V}from"./app-CzvPvdPJ.js";import{A as C}from"./AppLayout-DDhoF4nJ.js";import{r as O}from"./ArrowLeftIcon-CxOy1Ucb.js";import{r as B}from"./UserIcon-BM2cacIp.js";const j={class:"py-12"},E={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},U={class:"p-6 border-b border-gray-200"},J={class:"flex justify-between items-center"},T={class:"p-6"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},M={class:"space-y-4"},q={class:"mt-1 text-sm text-gray-900"},z={class:"mt-1 text-sm text-gray-900"},P={class:"mt-1 text-sm text-gray-900"},R={class:"mt-1 text-sm text-gray-900"},$={class:"space-y-4"},G={class:"mt-1 flex items-center"},H={class:"flex-shrink-0 h-8 w-8"},K={class:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center"},Q={class:"ml-3"},W={class:"text-sm font-medium text-gray-900"},X={key:0,class:"text-sm text-gray-500"},Y={class:"mt-1 text-sm text-gray-900"},Z={class:"mt-1 text-sm text-gray-900 break-all"},tt={key:0,class:"mt-8"},et={class:"bg-gray-50 rounded-lg p-4"},st={key:0,class:"space-y-4"},ot={class:"text-sm font-medium text-gray-900 mb-2"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},at={class:"bg-red-50 border border-red-200 rounded p-2"},lt={class:"text-xs text-red-800"},it={class:"bg-green-50 border border-green-200 rounded p-2"},rt={class:"text-xs text-green-800"},nt={key:1,class:"text-center py-4"},ut={class:"mt-3 bg-green-50 border border-green-200 rounded p-3"},gt={class:"text-xs text-green-800 whitespace-pre-wrap"},ct={key:2,class:"text-center py-4"},mt={class:"mt-3 bg-red-50 border border-red-200 rounded p-3"},xt={class:"text-xs text-red-800 whitespace-pre-wrap"},bt={key:3,class:"text-center py-4"},ft={key:1,class:"mt-8"},yt={class:"bg-gray-50 rounded-lg p-4"},vt={class:"text-xs text-gray-800 whitespace-pre-wrap"},_t={__name:"Show",props:{auditLog:Object},setup(s){const y=window.route,i=s,m=b(()=>{if(!i.auditLog.old_values||!i.auditLog.new_values)return{};const o={};return Object.keys(i.auditLog.new_values).forEach(e=>{const r=i.auditLog.old_values[e],n=i.auditLog.new_values[e];r!==n&&(o[e]={old:r,new:n})}),o}),v=b(()=>Object.keys(m.value).length>0),p=o=>new Date(o).toLocaleString(),w=o=>o.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),h=o=>o.split("\\").pop(),L=o=>o.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),x=o=>o===null?"null":o===void 0?"undefined":typeof o=="object"?JSON.stringify(o,null,2):String(o),_=o=>({created:"bg-green-100 text-green-800",updated:"bg-blue-100 text-blue-800",deleted:"bg-red-100 text-red-800",status_changed:"bg-yellow-100 text-yellow-800",assigned:"bg-purple-100 text-purple-800",bulk_email:"bg-indigo-100 text-indigo-800",bulk_status_update:"bg-orange-100 text-orange-800"})[o]||"bg-gray-100 text-gray-800";return(o,e)=>(a(),k(C,{title:"Audit Log Details"},{default:f(()=>[t("div",j,[t("div",E,[t("div",I,[t("div",U,[t("div",J,[e[1]||(e[1]=t("div",null,[t("h2",{class:"text-2xl font-bold text-gray-900"},"Audit Log Details"),t("p",{class:"mt-1 text-sm text-gray-600"}," Detailed information about this audit event ")],-1)),g(u(N),{href:u(y)("admin.audit.index"),class:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:f(()=>[g(u(O),{class:"w-4 h-4 mr-2"}),e[0]||(e[0]=A(" Back to Audit Logs ",-1))]),_:1},8,["href"])])]),t("div",T,[t("div",F,[t("div",M,[e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900"},"Basic Information",-1)),t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"Event ID",-1)),t("p",q,d(s.auditLog.id),1)]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date & Time",-1)),t("p",z,d(p(s.auditLog.created_at)),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Event Type",-1)),t("span",{class:D([_(s.auditLog.event),"inline-flex px-2 py-1 text-xs font-semibold rounded-full mt-1"])},d(w(s.auditLog.event)),3)]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Model",-1)),t("p",P,d(h(s.auditLog.auditable_type))+" #"+d(s.auditLog.auditable_id),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),t("p",R,d(s.auditLog.description),1)])]),t("div",$,[e[11]||(e[11]=t("h3",{class:"text-lg font-medium text-gray-900"},"User Information",-1)),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"User",-1)),t("div",G,[t("div",H,[t("div",K,[g(u(B),{class:"h-4 w-4 text-gray-600"})])]),t("div",Q,[t("p",W,d(s.auditLog.user?s.auditLog.user.name:"System"),1),s.auditLog.user?(a(),l("p",X,d(s.auditLog.user.email),1)):c("",!0)])])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"IP Address",-1)),t("p",Y,d(s.auditLog.ip_address||"N/A"),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"User Agent",-1)),t("p",Z,d(s.auditLog.user_agent||"N/A"),1)])])]),s.auditLog.old_values||s.auditLog.new_values?(a(),l("div",tt,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Data Changes",-1)),t("div",et,[v.value?(a(),l("div",st,[(a(!0),l(S,null,V(m.value,(r,n)=>(a(),l("div",{key:n,class:"border-b border-gray-200 pb-3 last:border-b-0"},[t("h4",ot,d(L(n)),1),t("div",dt,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs font-medium text-red-700 mb-1"},"Old Value",-1)),t("div",at,[t("code",lt,d(x(r.old)),1)])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs font-medium text-green-700 mb-1"},"New Value",-1)),t("div",it,[t("code",rt,d(x(r.new)),1)])])])]))),128))])):s.auditLog.event==="created"?(a(),l("div",nt,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-600"},"New record created with the following data:",-1)),t("div",ut,[t("pre",gt,d(JSON.stringify(s.auditLog.new_values,null,2)),1)])])):s.auditLog.event==="deleted"?(a(),l("div",ct,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600"},"Record deleted with the following data:",-1)),t("div",mt,[t("pre",xt,d(JSON.stringify(s.auditLog.old_values,null,2)),1)])])):(a(),l("div",bt,[...e[16]||(e[16]=[t("p",{class:"text-sm text-gray-500"},"No data changes recorded for this event.",-1)])]))])])):c("",!0),s.auditLog.metadata?(a(),l("div",ft,[e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Additional Information",-1)),t("div",yt,[t("pre",vt,d(JSON.stringify(s.auditLog.metadata,null,2)),1)])])):c("",!0)])])])])]),_:1}))}};export{_t as default};

import{T as N,s as M,q as w,e as P,w as y,b as e,a,u as s,j as L,k as c,c as d,g,p,o as i,F as k,h as $,t as l,l as _,v as x,f as O,i as U}from"./app-BSz5IB2B.js";import{A as z}from"./AppLayout-AJ-Za7h8.js";import{r as q}from"./DocumentTextIcon-wFrXj-Xc.js";import{r as Q,a as Y}from"./ListBulletIcon-D3Zvv_lq.js";import{r as G}from"./PlusIcon-Bo5bteGu.js";import{r as H}from"./TrashIcon-DfV4PRlZ.js";import{r as J}from"./CurrencyDollarIcon-DMMLt8k9.js";import{r as K}from"./XMarkIcon-D-BH2_RC.js";import{r as R}from"./CheckIcon-9VpP574g.js";import{r as W}from"./PaperAirplaneIcon-DVFErOC4.js";import{r as X}from"./PencilIcon-DjpAbkep.js";import{r as Z}from"./ArrowLeftIcon-QWUZfmaO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"relative overflow-hidden"},te={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},se={class:"flex items-center space-x-4"},oe={class:"w-14 h-14 bg-gradient-to-br from-emerald-500 via-emerald-600 to-green-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-emerald-100"},re={class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-emerald-900 to-green-900 bg-clip-text text-transparent"},ne={class:"flex items-center space-x-4 mt-3"},ie={class:"flex items-center space-x-2"},de={class:"flex items-center space-x-2"},le={class:"text-xs font-semibold text-green-700"},ae={class:"flex items-center"},me={class:"py-6"},ue={class:"max-w-6xl mx-auto sm:px-6 lg:px-4"},ce={class:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden"},be={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-8 py-6 border-b border-gray-200"},fe={class:"flex items-center justify-between"},ge={class:"flex items-center space-x-2"},pe={class:"bg-gradient-to-br from-emerald-50 to-green-100 rounded-xl p-6 border border-emerald-200"},ve={class:"flex items-center mb-6"},xe={class:"w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center mr-3"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"space-y-2"},he=["value"],we={key:0,class:"text-red-600 text-sm font-medium"},ke={class:"space-y-2"},$e={key:0,class:"text-red-600 text-sm font-medium"},Ie={class:"space-y-2"},Se={key:0,class:"text-red-600 text-sm font-medium"},Ue={class:"space-y-2"},qe={key:0,class:"text-red-600 text-sm font-medium"},Ve={class:"space-y-2 md:col-span-2"},je={key:0,class:"text-red-600 text-sm font-medium"},Ce={class:"bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-6 border border-amber-200"},Ae={class:"flex items-center mb-4"},Te={class:"w-10 h-10 bg-amber-500 rounded-lg flex items-center justify-center mr-3"},Ee={class:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden"},Fe={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},Be={class:"flex items-center justify-between"},De={class:"flex items-center"},Ne={class:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center mr-3"},Me={class:"p-6 space-y-6"},Pe={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Le={class:"md:col-span-2 space-y-2"},Oe=["onUpdate:modelValue","onChange"],ze=["value"],Qe={class:"space-y-2"},Ye=["onUpdate:modelValue","onInput"],Ge={class:"space-y-2"},He=["onUpdate:modelValue","onInput"],Je={class:"flex items-end justify-between"},Ke={class:"flex-1 space-y-2"},Re={class:"text-lg font-bold text-emerald-600 bg-emerald-50 px-3 py-2 rounded-lg border border-emerald-200"},We=["onClick"],Xe={key:0,class:"text-red-600 text-sm font-medium bg-red-50 p-3 rounded-lg border border-red-200"},Ze={class:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6 border border-green-200"},et={class:"flex items-center mb-4"},tt={class:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center mr-3"},st={class:"max-w-md ml-auto space-y-3"},ot={class:"flex justify-between items-center py-2 border-b border-green-200/50"},rt={class:"text-sm font-bold text-green-900"},nt={class:"flex justify-between items-center py-2 border-b border-green-200/50"},it={class:"text-sm font-bold text-green-900"},dt={class:"flex justify-between items-center py-3 border-t-2 border-green-300"},lt={class:"text-xl font-bold text-green-600"},at={class:"flex flex-wrap justify-end gap-3 pt-8 border-t border-gray-200"},mt=["disabled"],ut={class:"font-semibold"},ct={key:0},bt={key:1},ft=["disabled"],gt={class:"font-semibold"},pt={key:0},vt={key:1},Ct={__name:"Edit",props:{invoice:Object,clients:Array,defaultServices:Array},setup(b){const u=b,o=N({client_id:u.invoice.client_id,title:u.invoice.title,comments:u.invoice.comments||"",send_to_email:u.invoice.send_to_email,invoice_year:u.invoice.invoice_year,status:u.invoice.status,items:u.invoice.items.map(n=>({service_name:n.service_name,quantity:n.quantity,unit_price:parseFloat(n.unit_price)}))});M(()=>o.client_id,n=>{if(n){const t=u.clients.find(r=>r.id==n);t&&(o.send_to_email=t.email)}});const h=w(()=>o.items.reduce((n,t)=>n+t.quantity*t.unit_price,0)),I=w(()=>h.value*.18),V=w(()=>h.value+I.value),j=()=>{o.items.push({service_name:"",quantity:1,unit_price:0})},C=n=>{o.items.splice(n,1)},A=n=>{const t=o.items[n],r=u.defaultServices.find(f=>f.name===t.service_name);r&&(t.unit_price=r.price)},S=n=>{},v=n=>parseFloat(n||0).toFixed(2),T=n=>({draft:"bg-gray-500",sent:"bg-blue-500",paid:"bg-green-500",overdue:"bg-red-500"})[n]||"bg-gray-500",E=n=>({draft:"text-gray-700",sent:"text-blue-700",paid:"text-green-700",overdue:"text-red-700"})[n]||"text-gray-700",F=n=>({draft:"Draft",sent:"Sent",paid:"Paid",overdue:"Overdue"})[n]||n,B=()=>{o.put(`/admin/invoices/${u.invoice.id}`)},D=()=>{o.transform(n=>({...n,send_email:!0})).put(`/admin/invoices/${u.invoice.id}`)};return(n,t)=>(i(),P(z,{title:"Edit Invoice"},{header:y(()=>[e("div",ee,[t[9]||(t[9]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-emerald-50 to-green-50"},null,-1)),t[10]||(t[10]=e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-emerald-100/40 to-transparent rounded-bl-full"},null,-1)),t[11]||(t[11]=e("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-green-100/30 to-transparent rounded-tr-full"},null,-1)),e("div",te,[e("div",se,[e("div",oe,[a(s(X),{class:"w-8 h-8 text-white"})]),e("div",null,[e("h1",re," Edit Invoice #"+l(b.invoice.invoice_number),1),t[7]||(t[7]=e("p",{class:"mt-2 text-sm text-gray-600 font-medium"},"Modify invoice details and billing information",-1)),e("div",ne,[e("div",ie,[e("div",{class:p([T(b.invoice.status),"w-2 h-2 rounded-full"])},null,2),e("span",{class:p([E(b.invoice.status),"text-xs font-semibold"])},l(F(b.invoice.status)),3)]),e("div",de,[t[6]||(t[6]=e("div",{class:"w-2 h-2 bg-green-400 rounded-full"},null,-1)),e("span",le,"$"+l(v(b.invoice.total_amount)),1)])])])]),e("div",ae,[a(s(U),{href:"/admin/invoices",class:"bg-gradient-to-r from-slate-500 to-gray-600 hover:from-slate-600 hover:to-gray-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group"},{default:y(()=>[a(s(Z),{class:"w-5 h-5 mr-2"}),t[8]||(t[8]=e("span",{class:"font-semibold"},"Back to Invoices",-1))]),_:1})])])])]),default:y(()=>[e("div",me,[e("div",ue,[e("div",ce,[e("div",be,[e("div",fe,[t[12]||(t[12]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900"},"Invoice Form"),e("p",{class:"text-sm text-gray-600 mt-1"},"Update invoice information and line items")],-1)),e("div",ge,[a(s(q),{class:"w-5 h-5 text-gray-400"})])])]),e("form",{onSubmit:L(B,["prevent"]),class:"p-8 space-y-8"},[e("div",pe,[e("div",ve,[e("div",xe,[a(s(q),{class:"w-5 h-5 text-white"})]),t[13]||(t[13]=e("h3",{class:"text-lg font-bold text-emerald-900"},"Basic Information",-1))]),e("div",ye,[e("div",_e,[t[15]||(t[15]=e("label",{class:"block text-sm font-semibold text-emerald-700"}," Invoice Assign To * ",-1)),c(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>s(o).client_id=r),class:p(["w-full px-4 py-3 border-2 border-emerald-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white",{"border-red-500 focus:ring-red-500 focus:border-red-500":s(o).errors.client_id}]),required:""},[t[14]||(t[14]=e("option",{value:""},"Select Client",-1)),(i(!0),d(k,null,$(b.clients,r=>(i(),d("option",{key:r.id,value:r.id},l(r.first_name)+" "+l(r.last_name)+" ("+l(r.email)+") ",9,he))),128))],2),[[_,s(o).client_id]]),s(o).errors.client_id?(i(),d("div",we,l(s(o).errors.client_id),1)):g("",!0)]),e("div",ke,[t[16]||(t[16]=e("label",{class:"block text-sm font-semibold text-emerald-700"}," Send to Email * ",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s(o).send_to_email=r),type:"email",class:p(["w-full px-4 py-3 border-2 border-emerald-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200",{"border-red-500 focus:ring-red-500 focus:border-red-500":s(o).errors.send_to_email}]),required:""},null,2),[[x,s(o).send_to_email]]),s(o).errors.send_to_email?(i(),d("div",$e,l(s(o).errors.send_to_email),1)):g("",!0)]),e("div",Ie,[t[17]||(t[17]=e("label",{class:"block text-sm font-semibold text-emerald-700"}," Invoice Title * ",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s(o).title=r),type:"text",class:p(["w-full px-4 py-3 border-2 border-emerald-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200",{"border-red-500 focus:ring-red-500 focus:border-red-500":s(o).errors.title}]),required:""},null,2),[[x,s(o).title]]),s(o).errors.title?(i(),d("div",Se,l(s(o).errors.title),1)):g("",!0)]),e("div",Ue,[t[19]||(t[19]=e("label",{class:"block text-sm font-semibold text-emerald-700"}," Invoice Year * ",-1)),c(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s(o).invoice_year=r),class:p(["w-full px-4 py-3 border-2 border-emerald-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white",{"border-red-500 focus:ring-red-500 focus:border-red-500":s(o).errors.invoice_year}]),required:""},[...t[18]||(t[18]=[e("option",{value:"2024"},"2024",-1),e("option",{value:"2025"},"2025",-1),e("option",{value:"2026"},"2026",-1)])],2),[[_,s(o).invoice_year]]),s(o).errors.invoice_year?(i(),d("div",qe,l(s(o).errors.invoice_year),1)):g("",!0)]),e("div",Ve,[t[21]||(t[21]=e("label",{class:"block text-sm font-semibold text-emerald-700"}," Status * ",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>s(o).status=r),class:p(["w-full px-4 py-3 border-2 border-emerald-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white",{"border-red-500 focus:ring-red-500 focus:border-red-500":s(o).errors.status}]),required:""},[...t[20]||(t[20]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"overdue"},"Overdue",-1)])],2),[[_,s(o).status]]),s(o).errors.status?(i(),d("div",je,l(s(o).errors.status),1)):g("",!0)])])]),e("div",Ce,[e("div",Ae,[e("div",Te,[a(s(Q),{class:"w-5 h-5 text-white"})]),t[22]||(t[22]=e("h3",{class:"text-lg font-bold text-amber-900"},"Comments",-1))]),c(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=r=>s(o).comments=r),rows:"4",class:"w-full px-4 py-3 border-2 border-amber-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-200 resize-none",placeholder:"Additional comments or notes about this invoice..."},null,512),[[x,s(o).comments]])]),e("div",Ee,[e("div",Fe,[e("div",Be,[e("div",De,[e("div",Ne,[a(s(Y),{class:"w-4 h-4 text-white"})]),t[23]||(t[23]=e("h3",{class:"text-lg font-bold text-gray-900"},"Invoice Items",-1))]),e("button",{type:"button",onClick:j,class:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105 flex items-center"},[a(s(G),{class:"w-4 h-4 mr-2"}),t[24]||(t[24]=O(" Add Item ",-1))])])]),e("div",Me,[(i(!0),d(k,null,$(s(o).items,(r,f)=>(i(),d("div",{key:f,class:"bg-gradient-to-br from-gray-50 to-slate-100 rounded-xl p-6 border border-gray-200 hover:shadow-md transition-all duration-200"},[e("div",Pe,[e("div",Le,[t[26]||(t[26]=e("label",{class:"block text-sm font-semibold text-gray-700"}," Service Name * ",-1)),c(e("select",{"onUpdate:modelValue":m=>r.service_name=m,class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white",onChange:m=>A(f),required:""},[t[25]||(t[25]=e("option",{value:""},"Select Service",-1)),(i(!0),d(k,null,$(b.defaultServices,m=>(i(),d("option",{key:m.name,value:m.name},l(m.name),9,ze))),128))],40,Oe),[[_,r.service_name]])]),e("div",Qe,[t[27]||(t[27]=e("label",{class:"block text-sm font-semibold text-gray-700"}," Quantity * ",-1)),c(e("input",{"onUpdate:modelValue":m=>r.quantity=m,type:"number",min:"1",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200",onInput:m=>S(f),required:""},null,40,Ye),[[x,r.quantity,void 0,{number:!0}]])]),e("div",Ge,[t[28]||(t[28]=e("label",{class:"block text-sm font-semibold text-gray-700"}," Unit Price * ",-1)),c(e("input",{"onUpdate:modelValue":m=>r.unit_price=m,type:"number",step:"0.01",min:"0",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200",onInput:m=>S(f),required:""},null,40,He),[[x,r.unit_price,void 0,{number:!0}]])]),e("div",Je,[e("div",Ke,[t[29]||(t[29]=e("label",{class:"block text-sm font-semibold text-gray-700"}," Total ",-1)),e("div",Re," $"+l(v(r.quantity*r.unit_price)),1)]),s(o).items.length>1?(i(),d("button",{key:0,type:"button",onClick:m=>C(f),class:"ml-3 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white p-2 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105"},[a(s(H),{class:"w-4 h-4"})],8,We)):g("",!0)])])]))),128)),s(o).errors.items?(i(),d("div",Xe,l(s(o).errors.items),1)):g("",!0)])]),e("div",Ze,[e("div",et,[e("div",tt,[a(s(J),{class:"w-5 h-5 text-white"})]),t[30]||(t[30]=e("h3",{class:"text-lg font-bold text-green-900"},"Invoice Summary",-1))]),e("div",st,[e("div",ot,[t[31]||(t[31]=e("span",{class:"text-sm font-semibold text-green-700"},"Subtotal:",-1)),e("span",rt,"$"+l(v(h.value)),1)]),e("div",nt,[t[32]||(t[32]=e("span",{class:"text-sm font-semibold text-green-700"},"Tax (18%):",-1)),e("span",it,"$"+l(v(I.value)),1)]),e("div",dt,[t[33]||(t[33]=e("span",{class:"text-lg font-bold text-green-900"},"Total Amount:",-1)),e("span",lt,"$"+l(v(V.value)),1)]),t[34]||(t[34]=e("div",{class:"text-xs text-green-600 italic bg-green-100 p-2 rounded-lg border border-green-200"}," Tax will be auto calculated at 18% once saved ",-1))])]),e("div",at,[a(s(U),{href:"/admin/invoices",class:"bg-gradient-to-r from-gray-500 to-slate-600 hover:from-gray-600 hover:to-slate-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group"},{default:y(()=>[a(s(K),{class:"w-5 h-5 mr-2"}),t[35]||(t[35]=e("span",{class:"font-semibold"},"Cancel",-1))]),_:1}),e("button",{type:"submit",disabled:s(o).processing,class:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[a(s(R),{class:"w-5 h-5 mr-2"}),e("span",ut,[s(o).processing?(i(),d("span",ct,"Updating...")):(i(),d("span",bt,"Update Invoice"))])],8,mt),e("button",{type:"button",onClick:D,disabled:s(o).processing,class:"bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-700 hover:to-amber-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[a(s(W),{class:"w-5 h-5 mr-2"}),e("span",gt,[s(o).processing?(i(),d("span",pt,"Updating...")):(i(),d("span",vt,"Update & Email"))])],8,ft)])],32)])])])]),_:1}))}};export{Ct as default};

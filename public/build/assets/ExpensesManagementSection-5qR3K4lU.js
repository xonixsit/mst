import{c as p,o as m,a as e,l as z,f as w,d as T,u as R,p as _,e as F,t as u,q as K,s as Y,b as Ne,I as de,m as j,z as fe,g as se,h as S,v as O,j as oe,k as ae,A as be,F as re,r as me,C as ze,J as Le,n as He,_ as Re}from"./app-Dpla5MbZ.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Ye}from"./EyeIcon-CluSGkfN.js";import{r as _e}from"./InformationCircleIcon-CI-6RiZW.js";import{r as ue}from"./PlusIcon-DDv7Sclb.js";import{r as Ce}from"./TrashIcon-D7nQotUf.js";import{d as Ze}from"./AppLayout-CNJ2SeGy.js";import{b as We,r as Ke}from"./ReceiptRefundIcon-UW1T1YSA.js";import{r as je}from"./UserIcon-CZBTRvTc.js";import{r as Ve}from"./ExclamationTriangleIcon-DrLehM5p.js";function De(n,N){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Ge(n,N){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Je(n,N){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function zi(n,N){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 14.25 6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185ZM9.75 9h.008v.008H9.75V9Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008V13.5Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const Xe={class:"relative inline-block"},Qe={class:"relative"},Ee={__name:"HelpTooltip",props:{text:{type:String,required:!0},position:{type:String,default:"right",validator:n=>["left","right"].includes(n)}},setup(n){const N=z(!1);return(c,D)=>(m(),p("div",Xe,[e("button",{onMouseenter:D[0]||(D[0]=t=>N.value=!0),onMouseleave:D[1]||(D[1]=t=>N.value=!1),onFocus:D[2]||(D[2]=t=>N.value=!0),onBlur:D[3]||(D[3]=t=>N.value=!1),type:"button",class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600"},[T(R(Je),{class:"w-4 h-4"})],32),N.value?(m(),p("div",{key:0,class:_(["absolute z-10 w-64 p-2 mt-1 text-sm text-white bg-gray-900 rounded-lg shadow-lg",n.position==="left"?"right-0":"left-0"])},[e("div",Qe,[F(u(n.text)+" ",1),e("div",{class:_(["absolute w-2 h-2 bg-gray-900 transform rotate-45",n.position==="left"?"top-0 right-2 -mt-1":"top-0 left-2 -mt-1"])},null,2)])],2)):w("",!0)]))}};function et(n){if(!n||typeof n!="string")return"";const N=n.replace(/\D/g,"");if(N.length===9)return`***-**-${N.slice(-4)}`;if(N.length>=4){const c=N.slice(-4),D=Math.max(0,N.length-4),t="*".repeat(D);return N.length>=7?`${t.slice(0,3)}-${t.slice(3,5)}-${c}`:N.length>=5?`${t.slice(0,3)}-${t.slice(3)}${c}`:t+c}return n}function tt(n){return!n||typeof n!="string"?!1:n.replace(/\D/g,"").length>=4}function Ie(n){if(!n)return"";let N=n.replace(/\D/g,"");return N=N.substring(0,9),N.length>=6?`${N.slice(0,3)}-${N.slice(3,5)}-${N.slice(5)}`:N.length>=4?`${N.slice(0,3)}-${N.slice(3)}`:N}function st(n,N,c){return!c||!n?"":N?n:tt(n)?et(n):n}const ot={class:"relative"},lt=["id","value","placeholder","disabled","readonly"],nt={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},at={class:"flex items-center space-x-1"},rt={__name:"SSNInput",props:{modelValue:{type:String,default:""},inputId:{type:String,required:!0},placeholder:{type:String,default:"123-45-6789"},inputClasses:{type:String,default:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},showSecurityIndicator:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!1},autoMask:{type:Boolean,default:!0},isPreMasked:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur","input"],setup(n,{emit:N}){const c=n,D=N,t=z(null),r=z(!1),A=z(!0),E=z(c.modelValue||""),q=K(()=>E.value&&E.value.length>0),U=K(()=>!c.autoMask||c.isPreMasked&&E.value.includes("*")&&!r.value?E.value:r.value&&E.value.includes("*")?"":st(E.value,r.value||!A.value,q.value)),V=i=>{const I=i.target.value;if(I.includes("*")&&(I.length>E.value.length||!r.value)){i.target.value="",E.value="",D("update:modelValue",""),D("input","");return}const X=Ie(I);E.value=X,i.target.value=X,D("update:modelValue",X),D("input",X)},k=i=>{r.value=!0,de(()=>{t.value&&c.autoMask&&(t.value.value=E.value)}),D("focus",i)},B=i=>{if(r.value=!1,A.value=!0,E.value){const I=Ie(E.value);I!==E.value&&(E.value=I,D("update:modelValue",I))}D("blur",i)},s=i=>{[8,9,27,13,46].includes(i.keyCode)||i.ctrlKey&&[65,67,86,88].includes(i.keyCode)||i.keyCode>=37&&i.keyCode<=40||(i.keyCode<48||i.keyCode>57)&&(i.keyCode<96||i.keyCode>105)&&i.preventDefault()},b=()=>{A.value=!A.value,de(()=>{t.value&&(t.value.value=U.value)})};return Y(()=>c.modelValue,i=>{i!==E.value&&(E.value=i||"")}),E.value=c.modelValue||"",(i,I)=>(m(),p("div",ot,[e("input",{id:n.inputId,ref_key:"inputRef",ref:t,value:U.value,type:"text",class:_(n.inputClasses),placeholder:n.placeholder,maxlength:11,disabled:n.disabled,readonly:n.readonly,onInput:V,onFocus:k,onBlur:B,onKeydown:s},null,42,lt),n.showSecurityIndicator&&q.value&&!r.value?(m(),p("div",nt,[e("div",at,[T(R(De),{class:"h-4 w-4 text-gray-400"}),I[0]||(I[0]=e("span",{class:"text-xs text-gray-500"},"Secured",-1))])])):w("",!0),n.showToggle&&q.value?(m(),p("button",{key:1,type:"button",onClick:b,class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600"},[A.value?(m(),Ne(R(Ye),{key:0,class:"h-4 w-4"})):(m(),Ne(R(De),{key:1,class:"h-4 w-4"}))])):w("",!0)]))}},Ae=ce(rt,[["__scopeId","data-v-75bfc2d3"]]);function it(n){const N=n.replace(/\D/g,"");return N?N.length<=3?`(${N}`:N.length<=6?`(${N.slice(0,3)}) ${N.slice(3)}`:`(${N.slice(0,3)}) ${N.slice(3,6)}-${N.slice(6,10)}`:""}function Ue(n){return n.replace(/\D/g,"")}function Pe(n){return Ue(n).length===10}function dt(n){if(!n)return"";const N=Ue(n);return N.length===10?`(${N.slice(0,3)}) ${N.slice(3,6)}-${N.slice(6)}`:n}function ut(n,N){const c=n.target,D=c.selectionStart,r=c.value.length,A=it(c.value);c.value=A;const q=A.length-r;let U=D+q;q>0&&(A[D]===")"||A[D]===" "||A[D]==="-")&&(U=D+1),setTimeout(()=>{c.setSelectionRange(U,U)},0),N&&N(A)}const mt={class:"personal-details-section"},ct={class:"bg-white rounded-lg shadow-sm border border-gray-200"},pt={class:"p-6"},bt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gt={key:0,class:"mt-1 text-sm text-red-600"},yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xt={for:"ssn",class:"flex items-center text-sm font-medium text-gray-700 mb-1"},vt={key:0,class:"mt-1 text-sm text-red-600"},ht={key:0,class:"mt-1 text-sm text-red-600"},wt={for:"maritalStatus",class:"flex items-center text-sm font-medium text-gray-700 mb-1"},kt={key:0,class:"mt-1 text-sm text-red-600"},$t={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_t={class:"flex items-center space-x-4 mt-2"},Ct={class:"flex items-center"},St={class:"border-t border-gray-200 pt-6"},Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Vt={key:0,class:"mt-1 text-sm text-red-600"},Dt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Et={key:0,class:"mt-1 text-sm text-red-600"},It={key:0,class:"mt-1 text-sm text-red-600"},Pt=["value"],At={key:0,class:"mt-1 text-sm text-red-600"},Ut={class:"border-t border-gray-200 pt-6"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ot={key:0,class:"border-t border-gray-200 pt-6"},Mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qt={class:"relative"},Ft={class:"block truncate text-left"},Tt={key:0,class:"absolute bottom-full left-0 z-50 w-full mb-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},zt={class:"py-1"},Lt=["onMousedown"],Ht={for:"date_of_entry_us",class:"block text-sm font-medium text-gray-700 mb-1"},Rt={key:0,class:"text-xs text-gray-500 ml-1"},Yt=["disabled"],Zt={key:0,class:"mt-1 text-xs text-gray-500"},Wt={__name:"PersonalDetailsSection",props:{modelValue:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},readonly:{type:Boolean,default:!1},visaStatusOptions:{type:Array,default:()=>[{value:"",label:"Select visa status"},{value:"citizen",label:"US Citizen"},{value:"permanent_resident",label:"Permanent Resident"},{value:"h1b",label:"H-1B"},{value:"f1",label:"F-1 Student"},{value:"j1",label:"J-1 Exchange"},{value:"l1",label:"L-1 Intracompany"},{value:"other",label:"Other"}]}},emits:["update:modelValue","update","validate"],setup(n,{emit:N}){const c=n,D=N,t=j({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",maritalStatus:"",occupation:"",insuranceCovered:!1,streetNo:"",apartmentNo:"",zipCode:"",city:"",state:"",country:"United States",mobileNumber:"",workNumber:"",visaStatus:"",dateOfEntryUs:""}),r=j({}),A=z(!1),E=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],q=K(()=>!0),U=M=>{const o="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500";return r[M]?`${o} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:o},V=M=>{const o=t[M];let a=null;switch(M){case"firstName":case"lastName":!o||o.trim().length===0?a=`${M==="firstName"?"First":"Last"} name is required`:o.length>50&&(a=`${M==="firstName"?"First":"Last"} name must be less than 50 characters`);break;case"email":o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)||(a="Please enter a valid email address"):a="Email address is required";break;case"phone":o?Pe(o)||(a="Please enter a valid 10-digit phone number"):a="Phone number is required";break;case"mobileNumber":case"workNumber":o&&!Pe(o)&&(a="Please enter a valid 10-digit phone number");break;case"ssn":o?/^\d{3}-\d{2}-\d{4}$/.test(o)||(a="SSN must be in format 123-45-6789"):a="Social Security Number is required";break;case"dateOfBirth":o?new Date(o)>=new Date&&(a="Date of birth must be in the past"):a="Date of birth is required";break;case"streetNo":(!o||o.trim().length===0)&&(a="Street address is required");break;case"zipCode":o?/^\d{5}(-\d{4})?$/.test(o)||(a="Please enter a valid ZIP code"):a="ZIP code is required";break;case"city":(!o||o.trim().length===0)&&(a="City is required");break;case"state":o||(a="State is required");break}return a?r[M]=a:delete r[M],D("validate",r),!a},k=(M,o)=>{t[M]=o,r[M]&&delete r[M],D("update:modelValue",{...t}),D("update",{...t})},B=M=>{t.ssn=M,k("ssn",M)},s=(M,o)=>{ut(o,a=>{t[M]=a,k(M,a)})},b=M=>{const o=M.target.value;k("maritalStatus",o),D("marital-status-change",o)},i=()=>{const M=["firstName","lastName","email","phone","ssn","dateOfBirth","streetNo","zipCode","city","state"];let o=!0;M.forEach(a=>{V(a)||(o=!1)}),o&&D("submit",{...t})},I=()=>{A.value=!A.value},X=()=>{setTimeout(()=>{A.value=!1},150)},le=M=>{t.visaStatus=M,A.value=!1,k("visaStatus",M)},G=()=>{const M=c.visaStatusOptions.find(o=>o.value===t.visaStatus);return M?M.label:""},Q=()=>{c.modelValue&&Object.keys(t).forEach(M=>{if(c.modelValue[M]!==void 0){let o=c.modelValue[M];["phone","mobileNumber","workNumber"].includes(M)&&o&&(o=dt(o)),t[M]=o}})};return Y(()=>c.errors,M=>{Object.keys(r).forEach(o=>delete r[o]),Object.assign(r,M)},{deep:!0}),Y(()=>c.modelValue,Q,{deep:!0}),fe(()=>{Q()}),(M,o)=>(m(),p("div",mt,[e("div",ct,[o[69]||(o[69]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Personal Details"),e("p",{class:"text-sm text-gray-600 mt-1"},"Basic personal information and contact details")],-1)),e("div",pt,[e("form",{onSubmit:se(i,["prevent"]),class:"space-y-6"},[e("div",bt,[e("div",null,[o[38]||(o[38]=e("label",{for:"firstName",class:"flex items-center text-sm font-medium text-gray-700 mb-1"},[F(" First Name "),e("span",{class:"text-xs text-gray-500 ml-1"},"(Update in Profile)")],-1)),S(e("input",{id:"firstName","onUpdate:modelValue":o[0]||(o[0]=a=>t.firstName=a),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-50 cursor-not-allowed",placeholder:"Enter first name",readonly:"",disabled:""},null,512),[[O,t.firstName]]),o[39]||(o[39]=e("p",{class:"mt-1 text-xs text-gray-500"},[F(" Name fields can be updated in your "),e("a",{href:"/client/profile",class:"text-blue-600 hover:text-blue-800 underline"},"Profile"),F(" section. ")],-1))]),e("div",null,[o[40]||(o[40]=e("label",{for:"middleName",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Middle Name "),e("span",{class:"text-xs text-gray-500 ml-1"},"(Update in Profile)")],-1)),S(e("input",{id:"middleName","onUpdate:modelValue":o[1]||(o[1]=a=>t.middleName=a),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-50 cursor-not-allowed",placeholder:"Enter middle name",readonly:"",disabled:""},null,512),[[O,t.middleName]])]),e("div",null,[o[41]||(o[41]=e("label",{for:"lastName",class:"flex items-center text-sm font-medium text-gray-700 mb-1"},[F(" Last Name "),e("span",{class:"text-xs text-gray-500 ml-1"},"(Update in Profile)")],-1)),S(e("input",{id:"lastName","onUpdate:modelValue":o[2]||(o[2]=a=>t.lastName=a),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-50 cursor-not-allowed",placeholder:"Enter last name",readonly:"",disabled:""},null,512),[[O,t.lastName]])])]),e("div",ft,[e("div",null,[o[42]||(o[42]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Email Address "),e("span",{class:"text-red-500"},"*"),e("span",{class:"text-xs text-gray-500 ml-1"},"(Contact admin to change)")],-1)),S(e("input",{id:"email","onUpdate:modelValue":o[3]||(o[3]=a=>t.email=a),type:"email",class:_(U("email")+" bg-gray-50 cursor-not-allowed"),placeholder:"Enter email address",readonly:"",disabled:""},null,2),[[O,t.email]]),o[43]||(o[43]=e("p",{class:"mt-1 text-xs text-gray-500"}," Your email address is used for account login and cannot be changed here. Contact your tax professional to update this information. ",-1))]),e("div",null,[o[44]||(o[44]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"phone","onUpdate:modelValue":o[4]||(o[4]=a=>t.phone=a),type:"tel",class:_(U("phone")),placeholder:"(555) 123-4567",maxlength:"14",onBlur:o[5]||(o[5]=a=>V("phone")),onInput:o[6]||(o[6]=a=>s("phone",a))},null,34),[[O,t.phone]]),r.phone?(m(),p("p",gt,u(r.phone),1)):w("",!0)])]),e("div",yt,[e("div",null,[e("label",xt,[o[45]||(o[45]=F(" Social Security Number ",-1)),o[46]||(o[46]=e("span",{class:"text-red-500"},"*",-1)),T(Ee,{text:"Your 9-digit Social Security Number in format 123-45-6789. This is required for tax filing and must match your Social Security card exactly.",class:"ml-1"})]),T(Ae,{"input-id":"ssn",modelValue:t.ssn,"onUpdate:modelValue":o[7]||(o[7]=a=>t.ssn=a),"input-classes":U("ssn"),placeholder:"123-45-6789","is-pre-masked":!0,onBlur:o[8]||(o[8]=a=>V("ssn")),onInput:B},null,8,["modelValue","input-classes"]),r.ssn?(m(),p("p",vt,u(r.ssn),1)):w("",!0)]),e("div",null,[o[47]||(o[47]=e("label",{for:"dateOfBirth",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Date of Birth "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"dateOfBirth","onUpdate:modelValue":o[9]||(o[9]=a=>t.dateOfBirth=a),type:"date",class:_(U("dateOfBirth")),onBlur:o[10]||(o[10]=a=>V("dateOfBirth")),onInput:o[11]||(o[11]=a=>k("dateOfBirth",a.target.value))},null,34),[[O,t.dateOfBirth]]),r.dateOfBirth?(m(),p("p",ht,u(r.dateOfBirth),1)):w("",!0)]),e("div",null,[e("label",wt,[o[48]||(o[48]=F(" Marital Status ",-1)),o[49]||(o[49]=e("span",{class:"text-red-500"},"*",-1)),T(Ee,{text:"Your marital status as of December 31st of the tax year. If married, you'll need to provide spouse information in the next section.",class:"ml-1"})]),S(e("select",{id:"maritalStatus","onUpdate:modelValue":o[12]||(o[12]=a=>t.maritalStatus=a),class:_(U("maritalStatus")),onChange:b},[...o[50]||(o[50]=[ae('<option value="" data-v-962a8c51>Select marital status</option><option value="single" data-v-962a8c51>Single</option><option value="married" data-v-962a8c51>Married</option><option value="divorced" data-v-962a8c51>Divorced</option><option value="widowed" data-v-962a8c51>Widowed</option>',5)])],34),[[oe,t.maritalStatus]]),r.maritalStatus?(m(),p("p",kt,u(r.maritalStatus),1)):w("",!0)])]),e("div",$t,[e("div",null,[o[51]||(o[51]=e("label",{for:"occupation",class:"block text-sm font-medium text-gray-700 mb-1"}," Occupation ",-1)),S(e("input",{id:"occupation","onUpdate:modelValue":o[13]||(o[13]=a=>t.occupation=a),type:"text",class:_(U("occupation")),placeholder:"Enter occupation",onInput:o[14]||(o[14]=a=>k("occupation",a.target.value))},null,34),[[O,t.occupation]])]),e("div",null,[o[53]||(o[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Insurance Coverage ",-1)),e("div",_t,[e("label",Ct,[S(e("input",{"onUpdate:modelValue":o[15]||(o[15]=a=>t.insuranceCovered=a),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",onChange:o[16]||(o[16]=a=>k("insuranceCovered",a.target.checked))},null,544),[[be,t.insuranceCovered]]),o[52]||(o[52]=e("span",{class:"ml-2 text-sm text-gray-700"},"I have insurance coverage",-1))])])])]),e("div",St,[o[61]||(o[61]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Address Information",-1)),e("div",Nt,[e("div",null,[o[54]||(o[54]=e("label",{for:"streetNo",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Street Number/Address "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"streetNo","onUpdate:modelValue":o[17]||(o[17]=a=>t.streetNo=a),type:"text",class:_(U("streetNo")),placeholder:"123 Main Street",onBlur:o[18]||(o[18]=a=>V("streetNo")),onInput:o[19]||(o[19]=a=>k("streetNo",a.target.value))},null,34),[[O,t.streetNo]]),r.streetNo?(m(),p("p",Vt,u(r.streetNo),1)):w("",!0)]),e("div",null,[o[55]||(o[55]=e("label",{for:"apartmentNo",class:"block text-sm font-medium text-gray-700 mb-1"}," Apartment/Unit Number ",-1)),S(e("input",{id:"apartmentNo","onUpdate:modelValue":o[20]||(o[20]=a=>t.apartmentNo=a),type:"text",class:_(U("apartmentNo")),placeholder:"Apt 4B",onInput:o[21]||(o[21]=a=>k("apartmentNo",a.target.value))},null,34),[[O,t.apartmentNo]])])]),e("div",Dt,[e("div",null,[o[56]||(o[56]=e("label",{for:"zipCode",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" ZIP Code "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"zipCode","onUpdate:modelValue":o[22]||(o[22]=a=>t.zipCode=a),type:"text",class:_(U("zipCode")),placeholder:"12345",maxlength:"10",onBlur:o[23]||(o[23]=a=>V("zipCode")),onInput:o[24]||(o[24]=a=>k("zipCode",a.target.value))},null,34),[[O,t.zipCode]]),r.zipCode?(m(),p("p",Et,u(r.zipCode),1)):w("",!0)]),e("div",null,[o[57]||(o[57]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" City "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"city","onUpdate:modelValue":o[25]||(o[25]=a=>t.city=a),type:"text",class:_(U("city")),placeholder:"New York",onBlur:o[26]||(o[26]=a=>V("city")),onInput:o[27]||(o[27]=a=>k("city",a.target.value))},null,34),[[O,t.city]]),r.city?(m(),p("p",It,u(r.city),1)):w("",!0)]),e("div",null,[o[59]||(o[59]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" State "),e("span",{class:"text-red-500"},"*")],-1)),S(e("select",{id:"state","onUpdate:modelValue":o[28]||(o[28]=a=>t.state=a),class:_(U("state")),onChange:o[29]||(o[29]=a=>k("state",a.target.value))},[o[58]||(o[58]=e("option",{value:""},"Select state",-1)),(m(),p(re,null,me(E,a=>e("option",{key:a.code,value:a.code},u(a.name),9,Pt)),64))],34),[[oe,t.state]]),r.state?(m(),p("p",At,u(r.state),1)):w("",!0)]),e("div",null,[o[60]||(o[60]=e("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Country "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"country","onUpdate:modelValue":o[30]||(o[30]=a=>t.country=a),type:"text",class:_(U("country")),placeholder:"United States",onInput:o[31]||(o[31]=a=>k("country",a.target.value))},null,34),[[O,t.country]])])])]),e("div",Ut,[o[64]||(o[64]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Additional Contact Information",-1)),e("div",Bt,[e("div",null,[o[62]||(o[62]=e("label",{for:"mobileNumber",class:"block text-sm font-medium text-gray-700 mb-1"}," Mobile Number ",-1)),S(e("input",{id:"mobileNumber","onUpdate:modelValue":o[32]||(o[32]=a=>t.mobileNumber=a),type:"tel",class:_(U("mobileNumber")),placeholder:"(555) 123-4567",maxlength:"14",onInput:o[33]||(o[33]=a=>s("mobileNumber",a))},null,34),[[O,t.mobileNumber]])]),e("div",null,[o[63]||(o[63]=e("label",{for:"workNumber",class:"block text-sm font-medium text-gray-700 mb-1"}," Work Number ",-1)),S(e("input",{id:"workNumber","onUpdate:modelValue":o[34]||(o[34]=a=>t.workNumber=a),type:"tel",class:_(U("workNumber")),placeholder:"(555) 987-6543",maxlength:"14",onInput:o[35]||(o[35]=a=>s("workNumber",a))},null,34),[[O,t.workNumber]])])])]),q.value?(m(),p("div",Ot,[o[68]||(o[68]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Immigration Information",-1)),e("div",Mt,[e("div",null,[o[66]||(o[66]=e("label",{for:"visaStatus",class:"block text-sm font-medium text-gray-700 mb-1"}," Visa Status ",-1)),e("div",qt,[e("button",{type:"button",class:_(U("visaStatus")+" visa-dropdown-button"),onClick:I,onBlur:X},[e("span",Ft,u(G()||"Select visa status"),1),o[65]||(o[65]=e("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})])],-1))],34),A.value?(m(),p("div",Tt,[e("ul",zt,[(m(!0),p(re,null,me(n.visaStatusOptions,a=>(m(),p("li",{key:a.value,onMousedown:l=>le(a.value),class:_(["px-3 py-2 text-sm text-gray-900 cursor-pointer hover:bg-blue-50 hover:text-blue-900",{"bg-blue-100 text-blue-900":t.visaStatus===a.value}])},u(a.label),43,Lt))),128))])])):w("",!0)])]),e("div",null,[e("label",Ht,[o[67]||(o[67]=F(" Date of Entry to US ",-1)),t.visaStatus==="citizen"?(m(),p("span",Rt,"(Not applicable for US Citizens)")):w("",!0)]),S(e("input",{id:"dateOfEntryUs","onUpdate:modelValue":o[36]||(o[36]=a=>t.dateOfEntryUs=a),type:"date",class:_(U("dateOfEntryUs")),disabled:t.visaStatus==="citizen",onInput:o[37]||(o[37]=a=>k("dateOfEntryUs",a.target.value))},null,42,Yt),[[O,t.dateOfEntryUs]]),t.visaStatus==="citizen"?(m(),p("p",Zt," This field is not required for US Citizens ")):w("",!0)])])])):w("",!0)],32)])])]))}},Li=ce(Wt,[["__scopeId","data-v-962a8c51"]]),Kt={class:"spouse-details-section"},jt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},Gt={class:"flex items-center"},Jt={class:"flex-shrink-0"},Xt={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Qt={class:"p-6"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ts=["disabled"],ss={key:0,class:"mt-1 text-sm text-red-600"},os=["disabled"],ls={key:0,class:"mt-1 text-sm text-red-600"},ns={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},as={key:0,class:"mt-1 text-sm text-red-600"},rs=["disabled"],is={key:0,class:"mt-1 text-sm text-red-600"},ds={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},us=["disabled"],ms={key:0,class:"mt-1 text-sm text-red-600"},cs=["disabled"],ps={key:0,class:"mt-1 text-sm text-red-600"},bs=["disabled"],fs={__name:"SpouseDetailsSection",props:{modelValue:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},showSpouse:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","update","validate"],setup(n,{emit:N}){const c=n,D=N,t=j({firstName:"",lastName:"",ssn:"",dateOfBirth:"",email:"",phone:"",occupation:""}),r=j({}),A=b=>{const i="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500 disabled:bg-gray-50 disabled:text-gray-500";return r[b]?`${i} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:i},E=b=>{if(!c.showSpouse)return!0;const i=t[b];let I=null;switch(b){case"firstName":!i||i.trim().length===0?I="Spouse first name is required":i.length>50&&(I="First name must be less than 50 characters");break;case"lastName":!i||i.trim().length===0?I="Spouse last name is required":i.length>50&&(I="Last name must be less than 50 characters");break;case"ssn":i&&!/^\d{3}-\d{2}-\d{4}$/.test(i)&&(I="SSN must be in format 123-45-6789");break;case"dateOfBirth":i&&new Date(i)>=new Date&&(I="Date of birth must be in the past");break;case"email":i&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)&&(I="Please enter a valid email address");break;case"phone":i&&!/^[\+]?[1-9][\d]{0,15}$/.test(i.replace(/\D/g,""))&&(I="Please enter a valid phone number");break}return I?r[b]=I:delete r[b],D("validate",r),!I},q=(b,i)=>{t[b]=i,r[b]&&delete r[b],D("update:modelValue",{...t}),D("update",{...t})},U=b=>{t.ssn=b,q("ssn",b)},V=b=>{let i=b.target.value.replace(/\D/g,"");i.length>=7?i=`(${i.slice(0,3)}) ${i.slice(3,6)}-${i.slice(6,10)}`:i.length>=4?i=`(${i.slice(0,3)}) ${i.slice(3)}`:i.length>=1&&(i=`(${i}`),t.phone=i,b.target.value=i,q("phone",i)},k=()=>{if(!c.showSpouse)return;const b=["firstName","lastName"];let i=!0;b.forEach(I=>{E(I)||(i=!1)}),i&&D("submit",{...t})},B=()=>{c.showSpouse||(Object.keys(t).forEach(b=>{t[b]=""}),Object.keys(r).forEach(b=>delete r[b]),D("update:modelValue",{...t}),D("update",{...t}),D("validate",{}))},s=()=>{c.modelValue&&c.showSpouse&&Object.keys(t).forEach(b=>{c.modelValue[b]!==void 0&&(t[b]=c.modelValue[b])})};return Y(()=>c.errors,b=>{Object.keys(r).forEach(i=>delete r[i]),Object.assign(r,b)},{deep:!0}),Y(()=>c.modelValue,s,{deep:!0}),Y(()=>c.showSpouse,b=>{b?s():B()},{immediate:!0}),fe(()=>{c.showSpouse&&s()}),(b,i)=>(m(),p("div",Kt,[n.showSpouse?(m(),p("div",Xt,[i[28]||(i[28]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Spouse Details"),e("p",{class:"text-sm text-gray-600 mt-1"},"Information about your spouse for tax filing purposes")],-1)),e("div",Qt,[e("form",{onSubmit:se(k,["prevent"]),class:"space-y-6"},[e("div",es,[e("div",null,[i[19]||(i[19]=e("label",{for:"spouseFirstName",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" First Name "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"spouseFirstName","onUpdate:modelValue":i[0]||(i[0]=I=>t.firstName=I),type:"text",class:_(A("firstName")),placeholder:"Enter spouse's first name",disabled:n.readonly,onBlur:i[1]||(i[1]=I=>E("firstName")),onInput:i[2]||(i[2]=I=>q("firstName",I.target.value))},null,42,ts),[[O,t.firstName]]),r.firstName?(m(),p("p",ss,u(r.firstName),1)):w("",!0)]),e("div",null,[i[20]||(i[20]=e("label",{for:"spouseLastName",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Last Name "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"spouseLastName","onUpdate:modelValue":i[3]||(i[3]=I=>t.lastName=I),type:"text",class:_(A("lastName")),placeholder:"Enter spouse's last name",disabled:n.readonly,onBlur:i[4]||(i[4]=I=>E("lastName")),onInput:i[5]||(i[5]=I=>q("lastName",I.target.value))},null,42,os),[[O,t.lastName]]),r.lastName?(m(),p("p",ls,u(r.lastName),1)):w("",!0)])]),e("div",ns,[e("div",null,[i[21]||(i[21]=e("label",{for:"spouseSSN",class:"block text-sm font-medium text-gray-700 mb-1"}," Social Security Number ",-1)),T(Ae,{"input-id":"spouseSSN",modelValue:t.ssn,"onUpdate:modelValue":i[6]||(i[6]=I=>t.ssn=I),"input-classes":A("ssn"),placeholder:"123-45-6789",disabled:n.readonly,"is-pre-masked":!0,onBlur:i[7]||(i[7]=I=>E("ssn")),onInput:U},null,8,["modelValue","input-classes","disabled"]),r.ssn?(m(),p("p",as,u(r.ssn),1)):w("",!0),i[22]||(i[22]=e("p",{class:"mt-1 text-xs text-gray-500"}," Optional but recommended for joint tax filing ",-1))]),e("div",null,[i[23]||(i[23]=e("label",{for:"spouseDateOfBirth",class:"block text-sm font-medium text-gray-700 mb-1"}," Date of Birth ",-1)),S(e("input",{id:"spouseDateOfBirth","onUpdate:modelValue":i[8]||(i[8]=I=>t.dateOfBirth=I),type:"date",class:_(A("dateOfBirth")),disabled:n.readonly,onBlur:i[9]||(i[9]=I=>E("dateOfBirth")),onInput:i[10]||(i[10]=I=>q("dateOfBirth",I.target.value))},null,42,rs),[[O,t.dateOfBirth]]),r.dateOfBirth?(m(),p("p",is,u(r.dateOfBirth),1)):w("",!0)])]),e("div",ds,[e("div",null,[i[24]||(i[24]=e("label",{for:"spouseEmail",class:"block text-sm font-medium text-gray-700 mb-1"}," Email Address ",-1)),S(e("input",{id:"spouseEmail","onUpdate:modelValue":i[11]||(i[11]=I=>t.email=I),type:"email",class:_(A("email")),placeholder:"spouse@example.com",disabled:n.readonly,onBlur:i[12]||(i[12]=I=>E("email")),onInput:i[13]||(i[13]=I=>q("email",I.target.value))},null,42,us),[[O,t.email]]),r.email?(m(),p("p",ms,u(r.email),1)):w("",!0)]),e("div",null,[i[25]||(i[25]=e("label",{for:"spousePhone",class:"block text-sm font-medium text-gray-700 mb-1"}," Phone Number ",-1)),S(e("input",{id:"spousePhone","onUpdate:modelValue":i[14]||(i[14]=I=>t.phone=I),type:"tel",class:_(A("phone")),placeholder:"(555) 123-4567",disabled:n.readonly,onBlur:i[15]||(i[15]=I=>E("phone")),onInput:V},null,42,cs),[[O,t.phone]]),r.phone?(m(),p("p",ps,u(r.phone),1)):w("",!0)])]),e("div",null,[i[26]||(i[26]=e("label",{for:"spouseOccupation",class:"block text-sm font-medium text-gray-700 mb-1"}," Occupation ",-1)),S(e("input",{id:"spouseOccupation","onUpdate:modelValue":i[16]||(i[16]=I=>t.occupation=I),type:"text",class:_(A("occupation")),placeholder:"Enter spouse's occupation",disabled:n.readonly,onInput:i[17]||(i[17]=I=>q("occupation",I.target.value))},null,42,bs),[[O,t.occupation]]),i[27]||(i[27]=e("p",{class:"mt-1 text-xs text-gray-500"}," Employment information helps with tax deductions and credits ",-1))])],32)])])):(m(),p("div",jt,[e("div",Gt,[e("div",Jt,[T(R(_e),{class:"h-5 w-5 text-blue-400"})]),i[18]||(i[18]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"}," Spouse Information Not Required "),e("div",{class:"mt-2 text-sm text-blue-700"},[e("p",null,'Spouse details are only required when marital status is set to "Married". Please update your marital status in the Personal Details section if you need to add spouse information.')])],-1))])]))]))}},Hi=ce(fs,[["__scopeId","data-v-6a14daa7"]]),gs={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ys={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},vs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},hs={class:"sm:flex sm:items-start"},ws={class:"w-full"},ks={class:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title"},$s={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_s={class:"space-y-4"},Cs={key:0,class:"mt-1 text-sm text-red-600"},Ss={key:0,class:"mt-1 text-sm text-red-600"},Ns={key:0,class:"mt-1 text-sm text-red-600"},Vs={key:0,class:"mt-1 text-sm text-red-600"},Ds={class:"flex items-center space-x-3"},Es={class:"space-y-4"},Is={class:"relative"},Ps={key:0,class:"mt-1 text-sm text-red-600"},As={key:0,class:"mt-1 text-sm text-red-600"},Us={key:0},Bs={class:"relative"},Os={key:0,class:"mt-1 text-sm text-red-600"},Ms={key:1,class:"h-16"},qs={class:"space-y-4"},Fs={key:0,class:"mt-1 text-sm text-red-600"},Ts={key:0,class:"mt-1 text-sm text-red-600"},zs={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Be={__name:"ExpenseModal",props:{show:{type:Boolean,default:!1},expense:{type:Object,default:null},errors:{type:Object,default:()=>({})}},emits:["close","save"],setup(n,{emit:N}){const c=n,D=N,t=K(()=>c.expense&&c.expense.id),r=j({id:null,category:"",particulars:"",date:"",amount:"",taxPayer:"",spouse:"",receiptNumber:"",is_deductible:!0,deductiblePercentage:100,remarks:""}),A=B=>{const s="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500";return c.errors[B]?`${s} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:s},E=K(()=>{const B="block w-full pl-7 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500";return c.errors.amount?`${B} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:B}),q=()=>{Object.assign(r,{id:null,category:"",particulars:"",date:"",amount:"",taxPayer:"",spouse:"",receiptNumber:"",is_deductible:!0,deductiblePercentage:100,remarks:""})},U=()=>{c.expense?Object.assign(r,c.expense):q()},V=()=>{D("save",{...r})},k=()=>{D("close")};return Y(()=>c.show,B=>{B&&U()}),Y(()=>c.expense,U,{deep:!0}),(B,s)=>n.show?(m(),p("div",gs,[e("div",ys,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:k}),e("div",xs,[e("div",vs,[e("div",hs,[e("div",ws,[e("h3",ks,u(t.value?"Edit Expense":"Add New Expense"),1),e("form",{onSubmit:se(V,["prevent"]),class:"space-y-6"},[e("div",$s,[e("div",_s,[e("div",null,[s[11]||(s[11]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Category "),e("span",{class:"text-red-500"},"*")],-1)),S(e("select",{id:"category","onUpdate:modelValue":s[0]||(s[0]=b=>r.category=b),class:_(A("category")),required:""},[...s[10]||(s[10]=[ae('<option value="">Select category</option><option value="miscellaneous">Miscellaneous</option><option value="residency">Residency</option><option value="business">Business</option><option value="medical">Medical</option><option value="education">Education</option><option value="charitable">Charitable</option><option value="travel">Travel</option><option value="office">Office</option><option value="professional">Professional</option><option value="other">Other</option>',11)])],2),[[oe,r.category]]),n.errors.category?(m(),p("p",Cs,u(n.errors.category),1)):w("",!0)]),e("div",null,[s[12]||(s[12]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Date "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"date","onUpdate:modelValue":s[1]||(s[1]=b=>r.date=b),type:"date",class:_(A("date")),required:""},null,2),[[O,r.date]]),n.errors.date?(m(),p("p",Ss,u(n.errors.date),1)):w("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{for:"taxPayer",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Tax Payer "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"taxPayer","onUpdate:modelValue":s[2]||(s[2]=b=>r.taxPayer=b),type:"text",class:_(A("taxPayer")),placeholder:"Enter taxpayer name",required:""},null,2),[[O,r.taxPayer]]),n.errors.taxPayer?(m(),p("p",Ns,u(n.errors.taxPayer),1)):w("",!0)]),e("div",null,[s[14]||(s[14]=e("label",{for:"spouse",class:"block text-sm font-medium text-gray-700 mb-1"}," Spouse ",-1)),S(e("input",{id:"spouse","onUpdate:modelValue":s[3]||(s[3]=b=>r.spouse=b),type:"text",class:_(A("spouse")),placeholder:"Enter spouse name (if applicable)"},null,2),[[O,r.spouse]]),n.errors.spouse?(m(),p("p",Vs,u(n.errors.spouse),1)):w("",!0)]),e("div",Ds,[S(e("input",{id:"is_deductible","onUpdate:modelValue":s[4]||(s[4]=b=>r.is_deductible=b),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[be,r.is_deductible]]),s[15]||(s[15]=e("label",{for:"is_deductible",class:"text-sm text-gray-700"}," Tax deductible ",-1))])]),e("div",Es,[e("div",null,[s[17]||(s[17]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Amount "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Is,[s[16]||(s[16]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),S(e("input",{id:"amount","onUpdate:modelValue":s[5]||(s[5]=b=>r.amount=b),type:"number",step:"0.01",min:"0",class:_(E.value),placeholder:"0.00",required:""},null,2),[[O,r.amount]])]),n.errors.amount?(m(),p("p",Ps,u(n.errors.amount),1)):w("",!0)]),e("div",null,[s[18]||(s[18]=e("label",{for:"receiptNumber",class:"block text-sm font-medium text-gray-700 mb-1"}," Receipt Number ",-1)),S(e("input",{id:"receiptNumber","onUpdate:modelValue":s[6]||(s[6]=b=>r.receiptNumber=b),type:"text",class:_(A("receiptNumber")),placeholder:"Enter receipt number (optional)"},null,2),[[O,r.receiptNumber]]),n.errors.receiptNumber?(m(),p("p",As,u(n.errors.receiptNumber),1)):w("",!0)]),r.is_deductible?(m(),p("div",Us,[s[20]||(s[20]=e("label",{for:"deductiblePercentage",class:"block text-sm font-medium text-gray-700 mb-1"}," Deductible Percentage ",-1)),e("div",Bs,[S(e("input",{id:"deductiblePercentage","onUpdate:modelValue":s[7]||(s[7]=b=>r.deductiblePercentage=b),type:"number",min:"0",max:"100",step:"0.01",class:_(A("deductiblePercentage")),placeholder:"100"},null,2),[[O,r.deductiblePercentage]]),s[19]||(s[19]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"%")],-1))]),n.errors.deductiblePercentage?(m(),p("p",Os,u(n.errors.deductiblePercentage),1)):w("",!0)])):(m(),p("div",Ms))])]),e("div",qs,[e("div",null,[s[21]||(s[21]=e("label",{for:"particulars",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Description "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"particulars","onUpdate:modelValue":s[8]||(s[8]=b=>r.particulars=b),type:"text",class:_(A("particulars")),placeholder:"Enter expense description",required:""},null,2),[[O,r.particulars]]),n.errors.particulars?(m(),p("p",Fs,u(n.errors.particulars),1)):w("",!0)]),e("div",null,[s[22]||(s[22]=e("label",{for:"remarks",class:"block text-sm font-medium text-gray-700 mb-1"}," Remarks ",-1)),S(e("textarea",{id:"remarks","onUpdate:modelValue":s[9]||(s[9]=b=>r.remarks=b),rows:"3",class:_(A("remarks")),placeholder:"Additional notes about this expense..."},null,2),[[O,r.remarks]]),n.errors.remarks?(m(),p("p",Ts,u(n.errors.remarks),1)):w("",!0)])])],32)])])]),e("div",zs,[e("button",{type:"button",onClick:V,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},u(t.value?"Update":"Add")+" Expense ",1),e("button",{type:"button",onClick:k,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)}},Ls={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Hs={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Rs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ys={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Zs={class:"sm:flex sm:items-start"},Ws={class:"w-full"},Ks={key:0,class:"space-y-4"},js={class:"flex items-center justify-between"},Gs={class:"text-right"},Js={class:"text-lg font-semibold text-gray-900"},Xs={key:0,class:"text-sm text-green-600"},Qs={key:1,class:"text-sm text-gray-500"},eo={class:"text-sm text-gray-900"},to={class:"grid grid-cols-2 gap-4"},so={class:"text-sm text-gray-900"},oo={class:"text-sm text-gray-900 capitalize"},lo={key:0},no={class:"text-sm text-gray-900 font-mono bg-gray-50 px-2 py-1 rounded"},ao={key:1,class:"bg-green-50 border border-green-200 rounded-md p-3"},ro={class:"flex"},io={class:"ml-3"},uo={class:"mt-1 text-sm text-green-700"},mo={key:2},co={class:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md"},Oe={__name:"ExpenseViewModal",props:{show:{type:Boolean,default:!1},expense:{type:Object,default:null}},emits:["close","edit"],setup(n,{emit:N}){const c=n,D=N,t=V=>{const k={business:"bg-blue-100 text-blue-800",medical:"bg-red-100 text-red-800",education:"bg-green-100 text-green-800",charitable:"bg-purple-100 text-purple-800",travel:"bg-yellow-100 text-yellow-800",office:"bg-indigo-100 text-indigo-800",professional:"bg-pink-100 text-pink-800",miscellaneous:"bg-gray-100 text-gray-800",other:"bg-gray-100 text-gray-800"};return k[V]||k.other},r=V=>V?new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",A=V=>parseFloat(V||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),E=V=>{if(!V.is_deductible)return"$0.00";const k=parseFloat(V.amount||0),B=parseFloat(V.deductiblePercentage||100)/100;return"$"+(k*B).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},q=()=>{D("close")},U=()=>{D("edit",c.expense)};return(V,k)=>n.show?(m(),p("div",Ls,[e("div",Hs,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:q}),e("div",Rs,[e("div",Ys,[e("div",Zs,[e("div",Ws,[e("div",{class:"flex items-center justify-between mb-4"},[k[0]||(k[0]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Expense Details ",-1)),e("button",{onClick:U,class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Edit ")]),n.expense?(m(),p("div",Ks,[e("div",js,[e("span",{class:_([t(n.expense.category),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},u(n.expense.category),3),e("div",Gs,[e("p",Js," $"+u(A(n.expense.amount)),1),n.expense.is_deductible?(m(),p("p",Xs,u(n.expense.deductiblePercentage)+"% deductible ",1)):(m(),p("p",Qs," Not deductible "))])]),e("div",null,[k[1]||(k[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",eo,u(n.expense.particulars),1)]),e("div",to,[e("div",null,[k[2]||(k[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),e("p",so,u(r(n.expense.date)),1)]),e("div",null,[k[3]||(k[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tax Payer",-1)),e("p",oo,u(n.expense.taxPayer),1)])]),n.expense.receiptNumber?(m(),p("div",lo,[k[4]||(k[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Receipt Number",-1)),e("p",no,u(n.expense.receiptNumber),1)])):w("",!0),n.expense.is_deductible?(m(),p("div",ao,[e("div",ro,[k[6]||(k[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",io,[k[5]||(k[5]=e("h4",{class:"text-sm font-medium text-green-800"},"Tax Deductible",-1)),e("div",uo,[e("p",null,u(n.expense.deductiblePercentage)+"% of this expense ("+u(E(n.expense))+") is tax deductible.",1)])])])])):w("",!0),n.expense.remarks?(m(),p("div",mo,[k[7]||(k[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Remarks",-1)),e("p",co,u(n.expense.remarks),1)])):w("",!0)])):w("",!0)])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{type:"button",onClick:q,class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Close ")])])])])):w("",!0)}},po={class:"employee-information-section"},bo={class:"bg-white rounded-lg shadow-sm border border-gray-200"},fo={class:"p-6"},go={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yo=["disabled"],xo={key:0,class:"mt-1 text-sm text-red-600"},vo=["disabled"],ho={key:0,class:"mt-1 text-sm text-red-600"},wo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ko=["disabled"],$o={key:0,class:"mt-1 text-sm text-red-600"},_o=["disabled"],Co=["disabled"],So={class:"border-t border-gray-200 pt-6"},No={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vo={class:"relative"},Do=["disabled"],Eo={key:0,class:"mt-1 text-sm text-red-600"},Io=["disabled"],Po={class:"border-t border-gray-200 pt-6"},Ao={class:"space-y-4"},Uo={class:"flex items-center space-x-3"},Bo=["disabled"],Oo={class:"flex items-center space-x-3"},Mo=["disabled"],qo={class:"flex items-center space-x-3"},Fo=["disabled"],To={class:"flex items-center space-x-3"},zo=["disabled"],Lo={class:"border-t border-gray-200 pt-6"},Ho={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ro={class:"md:col-span-2"},Yo=["disabled"],Zo=["disabled"],Wo=["disabled"],Ko=["disabled"],jo={class:"border-t border-gray-200 pt-6"},Go=["disabled"],Jo={class:"mt-4"},Xo=["disabled"],Qo={__name:"EmployeeInformationSection",props:{modelValue:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","update","validate"],setup(n,{emit:N}){const c=n,D=N,t=j({id:null,employerName:"",position:"",startDate:"",endDate:"",employmentType:"",salary:"",payFrequency:"",workLocation:"",notes:"",employerAddress:"",employerCity:"",employerState:"",employerZipCode:"",benefits:{healthInsurance:!1,retirementPlan:!1,dentalInsurance:!1,visionInsurance:!1},expenses:[]}),r=z(!1),A=z(!1),E=z(null),q=z({}),U=j({}),V=a=>{const l="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500 disabled:bg-gray-50 disabled:text-gray-500";return U[a]?`${l} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:l},k=K(()=>{const a="block w-full pl-7 pr-12 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500 disabled:bg-gray-50 disabled:text-gray-500";return U.salary?`${a} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:a}),B=a=>{console.log("fieldName",a);const l=t[a];let x=null;switch(a){case"employerName":!l||l.trim().length===0?x="Employer name is required":l.length>100&&(x="Employer name must be less than 100 characters");break;case"position":!l||l.trim().length===0?x="Job title/position is required":l.length>100&&(x="Position must be less than 100 characters");break;case"startDate":l&&new Date(l)>new Date&&(x="Start date cannot be in the future");break;case"salary":l&&(isNaN(l)||parseFloat(l)<0)&&(x="Salary must be a valid positive number");break}return x?U[a]=x:delete U[a],D("validate",U),!x},s=(a,l)=>{t[a]=l,U[a]&&delete U[a],console.log("EmployeeInformationSection handleInput:",{fieldName:a,value:l,localData:{...t}}),D("update:modelValue",{...t}),D("update",{...t})},b=(a,l)=>{t.benefits[a]=l,D("update:modelValue",{...t}),D("update",{...t})},i=()=>{const a=["employerName","position"];let l=!0;a.forEach(x=>{console.log("field",x),B(x)||(l=!1)}),console.log("localData",...t),l&&D("submit",{...t})},I=()=>{c.modelValue&&Object.keys(t).forEach(a=>{c.modelValue[a]!==void 0&&(a==="benefits"&&typeof c.modelValue[a]=="object"?t[a]={...t[a],...c.modelValue[a]}:a==="expenses"&&Array.isArray(c.modelValue[a])?t[a]=[...c.modelValue[a]]:t[a]=c.modelValue[a])})};Y(()=>c.errors,a=>{Object.keys(U).forEach(l=>delete U[l]),Object.assign(U,a)},{deep:!0}),Y(()=>c.modelValue,I,{deep:!0});const X=(a=null)=>{E.value=a,q.value={},r.value=!0},le=()=>{r.value=!1,E.value=null,q.value={}},G=()=>{A.value=!1,E.value=null},Q=a=>{G(),X(a)},M=a=>{const l=o(a);if(Object.keys(l).length>0){q.value=l;return}if(t.expenses||(t.expenses=[]),a.id){const x=t.expenses.findIndex(Z=>Z.id===a.id);x!==-1&&(t.expenses[x]={...a})}else{const x={...a,id:Date.now()};t.expenses.push(x)}D("update:modelValue",{...t}),D("update",{...t}),le()},o=a=>{const l={};return a.category||(l.category="Category is required"),(!a.particulars||a.particulars.trim().length===0)&&(l.particulars="Description is required"),a.expense_date||(l.expense_date="Date is required"),(!a.amount||parseFloat(a.amount)<=0)&&(l.amount="Amount must be greater than 0"),a.tax_payer||(l.tax_payer="Tax payer is required"),l};return fe(()=>{I()}),(a,l)=>(m(),p("div",po,[e("div",bo,[l[64]||(l[64]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Employee Information"),e("p",{class:"text-sm text-gray-600 mt-1"},"Employment details for tax preparation and deductions")],-1)),e("div",fo,[e("form",{onSubmit:se(i,["prevent"]),class:"space-y-6"},[e("div",go,[e("div",null,[l[38]||(l[38]=e("label",{for:"employerName",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Employer Name "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"employerName","onUpdate:modelValue":l[0]||(l[0]=x=>t.employerName=x),type:"text",class:_(V("employerName")),placeholder:"Enter employer name",disabled:n.readonly,onBlur:l[1]||(l[1]=x=>B("employerName")),onInput:l[2]||(l[2]=x=>s("employerName",x.target.value))},null,42,yo),[[O,t.employerName]]),U.employerName?(m(),p("p",xo,u(U.employerName),1)):w("",!0)]),e("div",null,[l[39]||(l[39]=e("label",{for:"position",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Job Title/Position "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"position","onUpdate:modelValue":l[3]||(l[3]=x=>t.position=x),type:"text",class:_(V("position")),placeholder:"Enter job title",disabled:n.readonly,onBlur:l[4]||(l[4]=x=>B("position")),onInput:l[5]||(l[5]=x=>s("position",x.target.value))},null,42,vo),[[O,t.position]]),U.position?(m(),p("p",ho,u(U.position),1)):w("",!0)])]),e("div",wo,[e("div",null,[l[40]||(l[40]=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mb-1"}," Start Date ",-1)),S(e("input",{id:"startDate","onUpdate:modelValue":l[6]||(l[6]=x=>t.startDate=x),type:"date",class:_(V("startDate")),disabled:n.readonly,onBlur:l[7]||(l[7]=x=>B("startDate")),onInput:l[8]||(l[8]=x=>s("startDate",x.target.value))},null,42,ko),[[O,t.startDate]]),U.startDate?(m(),p("p",$o,u(U.startDate),1)):w("",!0)]),e("div",null,[l[41]||(l[41]=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700 mb-1"}," End Date ",-1)),S(e("input",{id:"endDate","onUpdate:modelValue":l[9]||(l[9]=x=>t.endDate=x),type:"date",class:_(V("endDate")),disabled:n.readonly,onInput:l[10]||(l[10]=x=>s("endDate",x.target.value))},null,42,_o),[[O,t.endDate]]),l[42]||(l[42]=e("p",{class:"mt-1 text-xs text-gray-500"}," Leave blank if currently employed ",-1))]),e("div",null,[l[44]||(l[44]=e("label",{for:"employmentType",class:"block text-sm font-medium text-gray-700 mb-1"}," Employment Status ",-1)),S(e("select",{id:"employmentType","onUpdate:modelValue":l[11]||(l[11]=x=>t.employmentType=x),class:_(V("employmentType")),disabled:n.readonly,onChange:l[12]||(l[12]=x=>s("employmentType",x.target.value))},[...l[43]||(l[43]=[ae('<option value="" data-v-64a7249e>Select status</option><option value="full-time" data-v-64a7249e>Full-time</option><option value="part-time" data-v-64a7249e>Part-time</option><option value="contract" data-v-64a7249e>Contract</option><option value="temporary" data-v-64a7249e>Temporary</option><option value="terminated" data-v-64a7249e>Terminated</option>',6)])],42,Co),[[oe,t.employmentType]])])]),e("div",So,[l[49]||(l[49]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Compensation Information",-1)),e("div",No,[e("div",null,[l[46]||(l[46]=e("label",{for:"salary",class:"block text-sm font-medium text-gray-700 mb-1"}," Annual Salary/Wage ",-1)),e("div",Vo,[l[45]||(l[45]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),S(e("input",{id:"salary","onUpdate:modelValue":l[13]||(l[13]=x=>t.salary=x),type:"number",step:"0.01",min:"0",class:_(k.value),placeholder:"0.00",disabled:n.readonly,onBlur:l[14]||(l[14]=x=>B("salary")),onInput:l[15]||(l[15]=x=>s("salary",x.target.value))},null,42,Do),[[O,t.salary]])]),U.salary?(m(),p("p",Eo,u(U.salary),1)):w("",!0)]),e("div",null,[l[48]||(l[48]=e("label",{for:"payFrequency",class:"block text-sm font-medium text-gray-700 mb-1"}," Pay Frequency ",-1)),S(e("select",{id:"payFrequency","onUpdate:modelValue":l[16]||(l[16]=x=>t.payFrequency=x),class:_(V("payFrequency")),disabled:n.readonly,onChange:l[17]||(l[17]=x=>s("payFrequency",x.target.value))},[...l[47]||(l[47]=[ae('<option value="" data-v-64a7249e>Select frequency</option><option value="weekly" data-v-64a7249e>Weekly</option><option value="bi-weekly" data-v-64a7249e>Bi-weekly</option><option value="semi-monthly" data-v-64a7249e>Semi-monthly</option><option value="monthly" data-v-64a7249e>Monthly</option><option value="annually" data-v-64a7249e>Annually</option>',6)])],42,Io),[[oe,t.payFrequency]])])])]),e("div",Po,[l[54]||(l[54]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Benefits Information",-1)),e("div",Ao,[e("div",Uo,[S(e("input",{id:"healthInsurance","onUpdate:modelValue":l[18]||(l[18]=x=>t.benefits.healthInsurance=x),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:n.readonly,onChange:l[19]||(l[19]=x=>b("healthInsurance",x.target.checked))},null,40,Bo),[[be,t.benefits.healthInsurance]]),l[50]||(l[50]=e("label",{for:"healthInsurance",class:"text-sm text-gray-700"}," Health Insurance provided by employer ",-1))]),e("div",Oo,[S(e("input",{id:"retirementPlan","onUpdate:modelValue":l[20]||(l[20]=x=>t.benefits.retirementPlan=x),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:n.readonly,onChange:l[21]||(l[21]=x=>b("retirementPlan",x.target.checked))},null,40,Mo),[[be,t.benefits.retirementPlan]]),l[51]||(l[51]=e("label",{for:"retirementPlan",class:"text-sm text-gray-700"}," 401(k) or other retirement plan ",-1))]),e("div",qo,[S(e("input",{id:"dentalInsurance","onUpdate:modelValue":l[22]||(l[22]=x=>t.benefits.dentalInsurance=x),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:n.readonly,onChange:l[23]||(l[23]=x=>b("dentalInsurance",x.target.checked))},null,40,Fo),[[be,t.benefits.dentalInsurance]]),l[52]||(l[52]=e("label",{for:"dentalInsurance",class:"text-sm text-gray-700"}," Dental Insurance ",-1))]),e("div",To,[S(e("input",{id:"visionInsurance","onUpdate:modelValue":l[24]||(l[24]=x=>t.benefits.visionInsurance=x),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:n.readonly,onChange:l[25]||(l[25]=x=>b("visionInsurance",x.target.checked))},null,40,zo),[[be,t.benefits.visionInsurance]]),l[53]||(l[53]=e("label",{for:"visionInsurance",class:"text-sm text-gray-700"}," Vision Insurance ",-1))])])]),e("div",Lo,[l[59]||(l[59]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Employer Address",-1)),e("div",Ho,[e("div",Ro,[l[55]||(l[55]=e("label",{for:"employerAddress",class:"block text-sm font-medium text-gray-700 mb-1"}," Street Address ",-1)),S(e("input",{id:"employerAddress","onUpdate:modelValue":l[26]||(l[26]=x=>t.employerAddress=x),type:"text",class:_(V("employerAddress")),placeholder:"Enter employer street address",disabled:n.readonly,onInput:l[27]||(l[27]=x=>s("employerAddress",x.target.value))},null,42,Yo),[[O,t.employerAddress]])]),e("div",null,[l[56]||(l[56]=e("label",{for:"employerCity",class:"block text-sm font-medium text-gray-700 mb-1"}," City ",-1)),S(e("input",{id:"employerCity","onUpdate:modelValue":l[28]||(l[28]=x=>t.employerCity=x),type:"text",class:_(V("employerCity")),placeholder:"Enter city",disabled:n.readonly,onInput:l[29]||(l[29]=x=>s("employerCity",x.target.value))},null,42,Zo),[[O,t.employerCity]])]),e("div",null,[l[57]||(l[57]=e("label",{for:"employerState",class:"block text-sm font-medium text-gray-700 mb-1"}," State ",-1)),S(e("input",{id:"employerState","onUpdate:modelValue":l[30]||(l[30]=x=>t.employerState=x),type:"text",class:_(V("employerState")),placeholder:"Enter state",maxlength:"2",disabled:n.readonly,onInput:l[31]||(l[31]=x=>s("employerState",x.target.value))},null,42,Wo),[[O,t.employerState]])]),e("div",null,[l[58]||(l[58]=e("label",{for:"employerZipCode",class:"block text-sm font-medium text-gray-700 mb-1"}," ZIP Code ",-1)),S(e("input",{id:"employerZipCode","onUpdate:modelValue":l[32]||(l[32]=x=>t.employerZipCode=x),type:"text",class:_(V("employerZipCode")),placeholder:"Enter ZIP code",disabled:n.readonly,onInput:l[33]||(l[33]=x=>s("employerZipCode",x.target.value))},null,42,Ko),[[O,t.employerZipCode]])])])]),e("div",jo,[l[63]||(l[63]=e("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Additional Information",-1)),e("div",null,[l[61]||(l[61]=e("label",{for:"workLocation",class:"block text-sm font-medium text-gray-700 mb-1"}," Work Location ",-1)),S(e("select",{id:"workLocation","onUpdate:modelValue":l[34]||(l[34]=x=>t.workLocation=x),class:_(V("workLocation")),disabled:n.readonly,onChange:l[35]||(l[35]=x=>s("workLocation",x.target.value))},[...l[60]||(l[60]=[ae('<option value="" data-v-64a7249e>Select work location</option><option value="office" data-v-64a7249e>Office</option><option value="remote" data-v-64a7249e>Remote</option><option value="hybrid" data-v-64a7249e>Hybrid</option><option value="field" data-v-64a7249e>Field work</option><option value="multiple" data-v-64a7249e>Multiple locations</option>',6)])],42,Go),[[oe,t.workLocation]])]),e("div",Jo,[l[62]||(l[62]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-1"}," Additional Notes ",-1)),S(e("textarea",{id:"notes","onUpdate:modelValue":l[36]||(l[36]=x=>t.notes=x),rows:"3",class:_(V("notes")),placeholder:"Any additional employment information relevant for tax preparation...",disabled:n.readonly,onInput:l[37]||(l[37]=x=>s("notes",x.target.value))},null,42,Xo),[[O,t.notes]])])])],32)])]),T(Be,{show:r.value,expense:E.value,errors:q.value,onClose:le,onSave:M},null,8,["show","expense","errors"]),T(Oe,{show:A.value,expense:E.value,onClose:G,onEdit:Q},null,8,["show","expense"])]))}},Ri=ce(Qo,[["__scopeId","data-v-64a7249e"]]),el={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},tl={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},sl={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},ol={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ll={class:"sm:flex sm:items-start"},nl={class:"w-full"},al={class:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title"},rl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},il={key:0,class:"mt-1 text-sm text-red-600"},dl={key:0,class:"mt-1 text-sm text-red-600"},ul={key:0,class:"mt-1 text-sm text-red-600"},ml={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cl=["value"],pl={key:0,class:"mt-1 text-sm text-red-600"},bl={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gl={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},yl={__name:"ProjectModal",props:{show:{type:Boolean,default:!1},project:{type:Object,default:null},errors:{type:Object,default:()=>({})}},emits:["close","save"],setup(n,{emit:N}){const c=n,D=N,t=K(()=>c.project&&c.project.id),r=j({id:null,project_name:"",project_description:"",project_type:"",taxYear:new Date().getFullYear(),status:"pending",priority:"medium",startDate:"",dueDate:"",completionDate:"",estimatedHours:"",actualHours:"",notes:""}),A=K(()=>{const B=new Date().getFullYear(),s=[];for(let b=B+1;b>=B-5;b--)s.push(b);return s}),E=B=>{const s="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900 placeholder-gray-500";return c.errors[B]?`${s} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:s},q=()=>{Object.assign(r,{id:null,project_name:"",project_description:"",project_type:"",taxYear:new Date().getFullYear(),status:"pending",priority:"medium",startDate:"",dueDate:"",completionDate:"",estimatedHours:"",actualHours:"",notes:""})},U=()=>{c.project?Object.assign(r,{id:c.project.id,project_name:c.project.project_name||"",project_description:c.project.project_description||"",project_type:c.project.project_type||"",taxYear:c.project.taxYear||c.project.tax_year||new Date().getFullYear(),status:c.project.status||"pending",priority:c.project.priority||"medium",startDate:c.project.startDate||c.project.start_date||"",dueDate:c.project.dueDate||c.project.due_date||"",completionDate:c.project.completionDate||c.project.completion_date||"",estimatedHours:c.project.estimatedHours||c.project.estimated_hours||"",actualHours:c.project.actualHours||c.project.actual_hours||"",notes:c.project.notes||""}):q()},V=()=>{D("save",{...r})},k=()=>{D("close")};return Y(()=>c.show,B=>{B&&U()}),Y(()=>c.project,U,{deep:!0}),(B,s)=>n.show?(m(),p("div",el,[e("div",tl,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:k}),e("div",sl,[e("div",ol,[e("div",ll,[e("div",nl,[e("h3",al,u(t.value?"Edit Project":"Add New Project"),1),e("form",{onSubmit:se(V,["prevent"]),class:"space-y-4"},[e("div",rl,[e("div",null,[s[12]||(s[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Project Name "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"project_name","onUpdate:modelValue":s[0]||(s[0]=b=>r.project_name=b),type:"text",class:_(E("project_name")),placeholder:"Enter project name",required:""},null,2),[[O,r.project_name]]),n.errors.name?(m(),p("p",il,u(n.errors.name),1)):w("",!0)]),e("div",null,[s[14]||(s[14]=e("label",{for:"project_type",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Project Type "),e("span",{class:"text-red-500"},"*")],-1)),S(e("select",{id:"project_type","onUpdate:modelValue":s[1]||(s[1]=b=>r.project_type=b),class:_(E("project_type")),required:""},[...s[13]||(s[13]=[ae('<option value="">Select project type</option><option value="tax_preparation">Tax Preparation</option><option value="tax_planning">Tax Planning</option><option value="audit_support">Audit Support</option><option value="consultation">Consultation</option><option value="bookkeeping">Bookkeeping</option><option value="payroll">Payroll Services</option><option value="business_formation">Business Formation</option><option value="other">Other</option>',9)])],2),[[oe,r.project_type]]),n.errors.type?(m(),p("p",dl,u(n.errors.type),1)):w("",!0)])]),e("div",null,[s[15]||(s[15]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),S(e("textarea",{id:"description","onUpdate:modelValue":s[2]||(s[2]=b=>r.project_description=b),rows:"3",class:_(E("project_description")),placeholder:"Describe the project details and scope..."},null,2),[[O,r.project_description]]),n.errors.project_description?(m(),p("p",ul,u(n.errors.description),1)):w("",!0)]),e("div",ml,[e("div",null,[s[17]||(s[17]=e("label",{for:"taxYear",class:"block text-sm font-medium text-gray-700 mb-1"}," Tax Year ",-1)),S(e("select",{id:"taxYear","onUpdate:modelValue":s[3]||(s[3]=b=>r.taxYear=b),class:_(E("taxYear"))},[s[16]||(s[16]=e("option",{value:""},"Select tax year",-1)),(m(!0),p(re,null,me(A.value,b=>(m(),p("option",{key:b,value:b},u(b),9,cl))),128))],2),[[oe,r.taxYear]])]),e("div",null,[s[19]||(s[19]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Status "),e("span",{class:"text-red-500"},"*")],-1)),S(e("select",{id:"status","onUpdate:modelValue":s[4]||(s[4]=b=>r.status=b),class:_(E("status")),required:""},[...s[18]||(s[18]=[ae('<option value="">Select status</option><option value="pending">Pending</option><option value="in_progress">In Progress</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option>',5)])],2),[[oe,r.status]]),n.errors.status?(m(),p("p",pl,u(n.errors.status),1)):w("",!0)]),e("div",null,[s[21]||(s[21]=e("label",{for:"priority",class:"block text-sm font-medium text-gray-700 mb-1"}," Priority ",-1)),S(e("select",{id:"priority","onUpdate:modelValue":s[5]||(s[5]=b=>r.priority=b),class:_(E("priority"))},[...s[20]||(s[20]=[ae('<option value="">Select priority</option><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option><option value="urgent">Urgent</option>',5)])],2),[[oe,r.priority]])])]),e("div",bl,[e("div",null,[s[22]||(s[22]=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mb-1"}," Start Date ",-1)),S(e("input",{id:"startDate","onUpdate:modelValue":s[6]||(s[6]=b=>r.startDate=b),type:"date",class:_(E("startDate"))},null,2),[[O,r.startDate]])]),e("div",null,[s[23]||(s[23]=e("label",{for:"dueDate",class:"block text-sm font-medium text-gray-700 mb-1"}," Due Date ",-1)),S(e("input",{id:"dueDate","onUpdate:modelValue":s[7]||(s[7]=b=>r.dueDate=b),type:"date",class:_(E("dueDate"))},null,2),[[O,r.dueDate]])]),e("div",null,[s[24]||(s[24]=e("label",{for:"completionDate",class:"block text-sm font-medium text-gray-700 mb-1"}," Completion Date ",-1)),S(e("input",{id:"completionDate","onUpdate:modelValue":s[8]||(s[8]=b=>r.completionDate=b),type:"date",class:_(E("completionDate"))},null,2),[[O,r.completionDate]])])]),e("div",fl,[e("div",null,[s[25]||(s[25]=e("label",{for:"estimatedHours",class:"block text-sm font-medium text-gray-700 mb-1"}," Estimated Hours ",-1)),S(e("input",{id:"estimatedHours","onUpdate:modelValue":s[9]||(s[9]=b=>r.estimatedHours=b),type:"number",step:"0.5",min:"0",class:_(E("estimatedHours")),placeholder:"0.0"},null,2),[[O,r.estimatedHours]])]),e("div",null,[s[26]||(s[26]=e("label",{for:"actualHours",class:"block text-sm font-medium text-gray-700 mb-1"}," Actual Hours ",-1)),S(e("input",{id:"actualHours","onUpdate:modelValue":s[10]||(s[10]=b=>r.actualHours=b),type:"number",step:"0.5",min:"0",class:_(E("actualHours")),placeholder:"0.0"},null,2),[[O,r.actualHours]])])]),e("div",null,[s[27]||(s[27]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-1"}," Notes ",-1)),S(e("textarea",{id:"notes","onUpdate:modelValue":s[11]||(s[11]=b=>r.notes=b),rows:"3",class:_(E("notes")),placeholder:"Additional project notes..."},null,2),[[O,r.notes]])])],32)])])]),e("div",gl,[e("button",{type:"button",onClick:V,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},u(t.value?"Update":"Add")+" Project ",1),e("button",{type:"button",onClick:k,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)}},xl={class:"project-details-section"},vl={class:"bg-white rounded-lg shadow-sm border border-gray-200"},hl={class:"px-6 py-4 border-b border-gray-200"},wl={class:"flex items-center justify-between"},kl=["disabled"],$l={class:"p-6"},_l={key:0,class:"text-center py-12"},Cl={class:"mt-6"},Sl=["disabled"],Nl={key:1,class:"space-y-4"},Vl=["onClick"],Dl={class:"flex items-center space-x-3"},El={class:"flex-shrink-0"},Il={class:"text-lg font-medium text-gray-900"},Pl={class:"text-sm text-gray-500"},Al={key:0},Ul={key:1},Bl={class:"flex items-center space-x-2"},Ol=["onClick","disabled"],Ml=["onClick","disabled"],ql={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},Fl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Tl={class:"ml-2 text-gray-900 capitalize"},zl={class:"ml-2"},Ll={class:"ml-2 text-gray-900"},Hl={class:"ml-2 text-gray-900"},Rl={class:"ml-2 text-gray-900"},Yl={class:"ml-2 text-gray-900"},Zl={class:"ml-2 text-gray-900"},Wl={key:0},Kl={key:1},jl={class:"mt-4"},Gl={class:"mt-1 text-gray-900"},Jl={class:"mt-4"},Xl={class:"mt-1 text-gray-900"},Ql={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},en={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},tn={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},sn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},on={class:"sm:flex sm:items-start"},ln={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},nn={class:"mt-2"},an={key:0,class:"mt-3 p-3 bg-gray-50 rounded-md"},rn={class:"text-sm font-medium text-gray-900"},dn={class:"text-sm text-gray-600"},un={key:0,class:"text-sm text-gray-600"},mn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},cn={__name:"ProjectDetailsSection",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","update","validate"],setup(n,{emit:N}){const c=n,D=N,t=j([]),r=j({}),A=z(!1),E=z(null),q=z({}),U=z(!1),V=z(null),k=j({});K(()=>{const $=new Date().getFullYear(),h=[];for(let d=0;d<=5;d++)h.push($-d);return h});const B=()=>{c.readonly||(E.value=null,q.value={},A.value=!0)},s=$=>{c.readonly||(E.value=$,q.value={},A.value=!0)},b=()=>{A.value=!1,E.value=null,q.value={}},i=$=>{const h=I($);if(console.log($),Object.keys(h).length>0){q.value=h;return}if($.id&&t.find(d=>d.id===$.id)){const d=t.findIndex(L=>L.id===$.id);d!==-1&&(t[d]={...$})}else{const d={...$,id:Date.now()};t.push(d)}M(),b()},I=$=>{const h={};return(!$.project_name||$.project_name.trim().length===0)&&(h.project_name="Project name is required"),$.project_type||(h.project_type="Project type is required"),$.status||(h.status="Status is required"),h},X=$=>{r[$]=!r[$]},le=$=>{c.readonly||(V.value=$,U.value=!0)},G=$=>{if(c.readonly)return;t.splice($,1),Object.keys(k).forEach(d=>{d.startsWith(`projects.${$}.`)&&delete k[d]});const h={};Object.keys(k).forEach(d=>{const L=d.match(/^projects\.(\d+)\.(.+)$/);if(L){const f=parseInt(L[1]),y=L[2];f>$?h[`projects.${f-1}.${y}`]=k[d]:f<$&&(h[d]=k[d])}else h[d]=k[d]}),Object.keys(k).forEach(d=>delete k[d]),Object.assign(k,h),M(),Q()},Q=()=>{U.value=!1,V.value=null},M=()=>{const $=t.map(h=>({...h}));D("update:modelValue",$),D("update",$)},o=()=>{t.splice(0,t.length),c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.forEach($=>{t.push({...$})}),t.forEach(($,h)=>{r[h]===void 0&&(r[h]=!1)})};Y(()=>c.errors,$=>{Object.keys(k).forEach(h=>delete k[h]),Object.assign(k,$)},{deep:!0}),Y(()=>c.modelValue,o,{deep:!0});const a=$=>$?$.replace("_"," "):"",l=$=>$?$.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase()):"",x=$=>$?new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",Z=$=>{const h={pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return h[$]||h.pending},ie=$=>{const h={low:"text-gray-600",medium:"text-blue-600",high:"text-orange-600",urgent:"text-red-600"};return h[$]||h.medium},pe=$=>{const h=parseFloat(($==null?void 0:$.estimatedHours)||($==null?void 0:$.estimated_hours)||0),L=parseFloat(($==null?void 0:$.actualHours)||($==null?void 0:$.actual_hours)||0)-h;return L>0?`+${L}h`:`${L}h`},ge=$=>{const h=parseFloat(($==null?void 0:$.estimatedHours)||($==null?void 0:$.estimated_hours)),L=parseFloat(($==null?void 0:$.actualHours)||($==null?void 0:$.actual_hours))-h;return L>0?"text-red-600":L<0?"text-green-600":"text-gray-600"};return fe(()=>{o()}),($,h)=>(m(),p(re,null,[e("div",xl,[e("div",vl,[e("div",hl,[e("div",wl,[h[2]||(h[2]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Project Details"),e("p",{class:"text-sm text-gray-600 mt-1"},"Tax-related projects and their current status")],-1)),e("button",{onClick:B,disabled:n.readonly,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-1"}),h[1]||(h[1]=F(" Add Project ",-1))],8,kl)])]),e("div",$l,[t.length===0?(m(),p("div",_l,[T(R(Ge),{class:"mx-auto h-12 w-12 text-gray-400"}),h[4]||(h[4]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No projects",-1)),h[5]||(h[5]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding your first tax project.",-1)),e("div",Cl,[e("button",{onClick:B,disabled:n.readonly,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-2"}),h[3]||(h[3]=F(" Add Project ",-1))],8,Sl)])])):(m(),p("div",Nl,[(m(!0),p(re,null,me(t,(d,L)=>(m(),p("div",{key:d.id||L,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[e("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:f=>X(L)},[e("div",Dl,[e("div",El,[e("div",{class:_([Z(d==null?void 0:d.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},u(a(d==null?void 0:d.status)),3)]),e("div",null,[e("h3",Il,u((d==null?void 0:d.project_name)||`Project ${L+1}`),1),e("p",Pl,[F(u(l(d==null?void 0:d.project_type))+" ",1),d!=null&&d.taxYear||d!=null&&d.tax_year?(m(),p("span",Al," "+u(d.taxYear||d.tax_year),1)):w("",!0),d!=null&&d.dueDate||d!=null&&d.due_date?(m(),p("span",Ul," Due: "+u(x(d.dueDate||d.due_date)),1)):w("",!0)])])]),e("div",Bl,[e("button",{onClick:se(f=>s(d),["stop"]),disabled:n.readonly,class:"text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:cursor-not-allowed"},[...h[6]||(h[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ol),e("button",{onClick:se(f=>le(L),["stop"]),disabled:n.readonly,class:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(Ce),{class:"w-4 h-4"})],8,Ml),(m(),p("svg",{class:_(["w-5 h-5 text-gray-400 transition-transform",r[L]?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[7]||(h[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,Vl),r[L]?(m(),p("div",ql,[e("div",Fl,[e("div",null,[h[8]||(h[8]=e("span",{class:"font-medium text-gray-700"},"Priority:",-1)),e("span",{class:_([ie((d==null?void 0:d.priority)||"medium"),"ml-2 capitalize"])},u((d==null?void 0:d.priority)||"Medium"),3)]),e("div",null,[h[9]||(h[9]=e("span",{class:"font-medium text-gray-700"},"Type:",-1)),e("span",Tl,u(l((d==null?void 0:d.type)||(d==null?void 0:d.project_type))||"Not specified"),1)]),e("div",null,[h[10]||(h[10]=e("span",{class:"font-medium text-gray-700"},"Status:",-1)),e("span",zl,[e("span",{class:_([Z(d==null?void 0:d.status),"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium capitalize"])},u(a(d==null?void 0:d.status)||"Not specified"),3)])]),e("div",null,[h[11]||(h[11]=e("span",{class:"font-medium text-gray-700"},"Start Date:",-1)),e("span",Ll,u(x((d==null?void 0:d.startDate)||(d==null?void 0:d.start_date))||"Not set"),1)]),e("div",null,[h[12]||(h[12]=e("span",{class:"font-medium text-gray-700"},"Due Date:",-1)),e("span",Hl,u(x((d==null?void 0:d.dueDate)||(d==null?void 0:d.due_date))||"Not set"),1)]),e("div",null,[h[13]||(h[13]=e("span",{class:"font-medium text-gray-700"},"Completed:",-1)),e("span",Rl,u(x((d==null?void 0:d.completionDate)||(d==null?void 0:d.completion_date))||"Not completed"),1)]),e("div",null,[h[14]||(h[14]=e("span",{class:"font-medium text-gray-700"},"Est. Hours:",-1)),e("span",Yl,u(d!=null&&d.estimatedHours||d!=null&&d.estimated_hours?`${d.estimatedHours||d.estimated_hours}h`:"Not set"),1)]),e("div",null,[h[15]||(h[15]=e("span",{class:"font-medium text-gray-700"},"Actual Hours:",-1)),e("span",Zl,u(d!=null&&d.actualHours||d!=null&&d.actual_hours?`${d.actualHours||d.actual_hours}h`:"Not tracked"),1)]),(d!=null&&d.estimatedHours||d!=null&&d.estimated_hours)&&(d!=null&&d.actualHours||d!=null&&d.actual_hours)?(m(),p("div",Wl,[h[16]||(h[16]=e("span",{class:"font-medium text-gray-700"},"Variance:",-1)),e("span",{class:_([ge(d),"ml-2"])},u(pe(d)),3)])):(m(),p("div",Kl,[...h[17]||(h[17]=[e("span",{class:"font-medium text-gray-700"},"Variance:",-1),e("span",{class:"ml-2 text-gray-500"},"Not available",-1)])]))]),e("div",jl,[h[18]||(h[18]=e("span",{class:"font-medium text-gray-700"},"Description:",-1)),e("p",Gl,u((d==null?void 0:d.project_description)||"No description provided"),1)]),e("div",Jl,[h[19]||(h[19]=e("span",{class:"font-medium text-gray-700"},"Notes:",-1)),e("p",Xl,u((d==null?void 0:d.notes)||"No notes added"),1)])])):w("",!0)]))),128))]))])])]),T(yl,{show:A.value,project:E.value,errors:q.value,onClose:b,onSave:i},null,8,["show","project","errors"]),U.value?(m(),p("div",Ql,[e("div",en,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:Q}),e("div",tn,[e("div",sn,[e("div",on,[h[22]||(h[22]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",ln,[h[21]||(h[21]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Project ",-1)),e("div",nn,[h[20]||(h[20]=e("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this project? This action cannot be undone and will permanently remove the project from your records. ",-1)),V.value!==null&&t[V.value]?(m(),p("div",an,[e("p",rn,u(t[V.value].project_name||`Project ${V.value+1}`),1),e("p",dn,u(l(t[V.value].project_type)),1),t[V.value].status?(m(),p("p",un,"Status: "+u(a(t[V.value].status)),1)):w("",!0)])):w("",!0)])])])]),e("div",mn,[e("button",{type:"button",onClick:h[0]||(h[0]=d=>G(V.value)),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete Project "),e("button",{type:"button",onClick:Q,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)],64))}},Yi=ce(cn,[["__scopeId","data-v-6c0329ab"]]),pn={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},bn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},fn={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},gn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},yn={class:"sm:flex sm:items-start"},xn={class:"w-full"},vn={class:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title"},hn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wn={key:0,class:"mt-1 text-sm text-red-600"},kn={key:0,class:"mt-1 text-sm text-red-600"},$n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_n={key:0,class:"mt-1 text-sm text-red-600"},Cn={class:"relative"},Sn={key:0,class:"mt-1 text-sm text-red-600"},Nn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vn={class:"relative"},Dn={key:0,class:"mt-1 text-sm text-red-600"},En={class:"relative"},In={key:0,class:"mt-1 text-sm text-red-600"},Pn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},An={class:"relative"},Un={key:0,class:"mt-1 text-sm text-red-600"},Bn={class:"relative"},On={key:0,class:"mt-1 text-sm text-red-600"},Mn={key:0,class:"mt-1 text-sm text-red-600"},qn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Fn={__name:"AssetModal",props:{show:{type:Boolean,default:!1},asset:{type:Object,default:null},errors:{type:Object,default:()=>({})}},emits:["close","save"],setup(n,{emit:N}){const c=n,D=N,t=K(()=>c.asset&&c.asset.id),r=j({id:null,asset_name:"",asset_type:"",date_of_purchase:"",percentage_used_in_business:"",cost_of_acquisition:"",any_reimbursement:"",current_value:"",depreciation_rate:"",description:""}),A=B=>{const s="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm";return c.errors[B]?`${s} border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500`:s},E=()=>{Object.assign(r,{id:null,asset_name:"",asset_type:"",date_of_purchase:"",percentage_used_in_business:"",cost_of_acquisition:"",any_reimbursement:"",current_value:"",depreciation_rate:"",description:""})},q=B=>{if(!B)return"";let s;if(typeof B=="string")s=new Date(B);else if(B instanceof Date)s=B;else return"";return s.toISOString().split("T")[0]},U=()=>{c.asset?Object.assign(r,{id:c.asset.id,asset_name:c.asset.asset_name||"",asset_type:c.asset.asset_type||"",date_of_purchase:q(c.asset.date_of_purchase),percentage_used_in_business:c.asset.percentage_used_in_business||"",cost_of_acquisition:c.asset.cost_of_acquisition||"",any_reimbursement:c.asset.any_reimbursement||"",current_value:c.asset.current_value||"",depreciation_rate:c.asset.depreciation_rate||"",description:c.asset.description||""}):E()},V=()=>{D("save",{...r})},k=()=>{D("close")};return Y(()=>c.show,B=>{B&&U()}),Y(()=>c.asset,U,{deep:!0}),(B,s)=>n.show?(m(),p("div",pn,[e("div",bn,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:k}),e("div",fn,[e("div",gn,[e("div",yn,[e("div",xn,[e("h3",vn,u(t.value?"Edit Asset":"Add New Asset"),1),e("form",{onSubmit:se(V,["prevent"]),class:"space-y-4"},[e("div",hn,[e("div",null,[s[9]||(s[9]=e("label",{for:"asset_name",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Asset Name "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"asset_name","onUpdate:modelValue":s[0]||(s[0]=b=>r.asset_name=b),type:"text",class:_(A("asset_name")),placeholder:"Enter asset name",required:""},null,2),[[O,r.asset_name]]),n.errors.asset_name?(m(),p("p",wn,u(n.errors.asset_name),1)):w("",!0)]),e("div",null,[s[11]||(s[11]=e("label",{for:"asset_type",class:"block text-sm font-medium text-gray-700 mb-1"}," Asset Type ",-1)),S(e("select",{id:"asset_type","onUpdate:modelValue":s[1]||(s[1]=b=>r.asset_type=b),class:_(A("asset_type"))},[...s[10]||(s[10]=[ae('<option value="">Select asset type</option><option value="equipment">Equipment</option><option value="vehicle">Vehicle</option><option value="furniture">Furniture</option><option value="computer">Computer/Technology</option><option value="machinery">Machinery</option><option value="building">Building</option><option value="land">Land</option><option value="other">Other</option>',9)])],2),[[oe,r.asset_type]]),n.errors.asset_type?(m(),p("p",kn,u(n.errors.asset_type),1)):w("",!0)])]),e("div",$n,[e("div",null,[s[12]||(s[12]=e("label",{for:"date_of_purchase",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Purchase Date "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{id:"date_of_purchase","onUpdate:modelValue":s[2]||(s[2]=b=>r.date_of_purchase=b),type:"date",class:_(A("date_of_purchase")),required:""},null,2),[[O,r.date_of_purchase]]),n.errors.date_of_purchase?(m(),p("p",_n,u(n.errors.date_of_purchase),1)):w("",!0)]),e("div",null,[s[14]||(s[14]=e("label",{for:"percentage_used_in_business",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Business Use % "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Cn,[S(e("input",{id:"percentage_used_in_business","onUpdate:modelValue":s[3]||(s[3]=b=>r.percentage_used_in_business=b),type:"number",min:"0",max:"100",step:"0.01",class:_(A("percentage_used_in_business")),placeholder:"0.00",required:""},null,2),[[O,r.percentage_used_in_business]]),s[13]||(s[13]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"%")],-1))]),n.errors.percentage_used_in_business?(m(),p("p",Sn,u(n.errors.percentage_used_in_business),1)):w("",!0)])]),e("div",Nn,[e("div",null,[s[16]||(s[16]=e("label",{for:"cost_of_acquisition",class:"block text-sm font-medium text-gray-700 mb-1"},[F(" Cost of Acquisition "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Vn,[s[15]||(s[15]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),S(e("input",{id:"cost_of_acquisition","onUpdate:modelValue":s[4]||(s[4]=b=>r.cost_of_acquisition=b),type:"number",min:"0",step:"0.01",class:_(A("cost_of_acquisition")+" pl-7"),placeholder:"0.00",required:""},null,2),[[O,r.cost_of_acquisition]])]),n.errors.cost_of_acquisition?(m(),p("p",Dn,u(n.errors.cost_of_acquisition),1)):w("",!0)]),e("div",null,[s[18]||(s[18]=e("label",{for:"any_reimbursement",class:"block text-sm font-medium text-gray-700 mb-1"}," Reimbursement ",-1)),e("div",En,[s[17]||(s[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),S(e("input",{id:"any_reimbursement","onUpdate:modelValue":s[5]||(s[5]=b=>r.any_reimbursement=b),type:"number",min:"0",step:"0.01",class:_(A("any_reimbursement")+" pl-7"),placeholder:"0.00"},null,2),[[O,r.any_reimbursement]])]),n.errors.any_reimbursement?(m(),p("p",In,u(n.errors.any_reimbursement),1)):w("",!0)])]),e("div",Pn,[e("div",null,[s[20]||(s[20]=e("label",{for:"current_value",class:"block text-sm font-medium text-gray-700 mb-1"}," Current Value ",-1)),e("div",An,[s[19]||(s[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),S(e("input",{id:"current_value","onUpdate:modelValue":s[6]||(s[6]=b=>r.current_value=b),type:"number",min:"0",step:"0.01",class:_(A("current_value")+" pl-7"),placeholder:"0.00"},null,2),[[O,r.current_value]])]),n.errors.current_value?(m(),p("p",Un,u(n.errors.current_value),1)):w("",!0)]),e("div",null,[s[22]||(s[22]=e("label",{for:"depreciation_rate",class:"block text-sm font-medium text-gray-700 mb-1"}," Depreciation Rate ",-1)),e("div",Bn,[S(e("input",{id:"depreciation_rate","onUpdate:modelValue":s[7]||(s[7]=b=>r.depreciation_rate=b),type:"number",min:"0",max:"100",step:"0.01",class:_(A("depreciation_rate")),placeholder:"0.00"},null,2),[[O,r.depreciation_rate]]),s[21]||(s[21]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"%")],-1))]),n.errors.depreciation_rate?(m(),p("p",On,u(n.errors.depreciation_rate),1)):w("",!0)])]),e("div",null,[s[23]||(s[23]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),S(e("textarea",{id:"description","onUpdate:modelValue":s[8]||(s[8]=b=>r.description=b),rows:"3",class:_(A("description")),placeholder:"Additional details about the asset..."},null,2),[[O,r.description]]),n.errors.description?(m(),p("p",Mn,u(n.errors.description),1)):w("",!0)])],32)])])]),e("div",qn,[e("button",{type:"button",onClick:V,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},u(t.value?"Update":"Add")+" Asset ",1),e("button",{type:"button",onClick:k,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)}},Tn={class:"asset-details-section"},zn={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ln={class:"px-6 py-4 border-b border-gray-200"},Hn={class:"flex items-center justify-between"},Rn=["disabled"],Yn={class:"p-6"},Zn={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Wn={class:"flex"},Kn={class:"flex-shrink-0"},jn={key:0,class:"text-center py-12"},Gn={class:"mt-6"},Jn=["disabled"],Xn={key:1,class:"space-y-4"},Qn=["onClick"],ea={class:"flex items-center space-x-3"},ta={class:"flex-shrink-0"},sa={class:"text-lg font-medium text-gray-900"},oa={class:"text-sm text-gray-500"},la={key:0},na={key:1},aa={class:"flex items-center space-x-2"},ra=["onClick","disabled"],ia=["onClick","disabled"],da={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},ua={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},ma={class:"ml-2 text-gray-900 capitalize"},ca={class:"ml-2 text-gray-900"},pa={class:"ml-2 text-gray-900"},ba={class:"ml-2 text-gray-900"},fa={class:"ml-2 text-gray-900"},ga={class:"ml-2 text-gray-900"},ya={class:"ml-2 text-gray-900"},xa={class:"ml-2 text-gray-900"},va={class:"ml-2 text-gray-900"},ha={class:"ml-2 text-gray-900"},wa={class:"ml-2 text-gray-900"},ka={key:0},$a={key:1},_a={class:"mt-4"},Ca={class:"mt-1 text-gray-900"},Sa={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Na={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Va={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Da={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ea={class:"sm:flex sm:items-start"},Ia={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Pa={class:"mt-2"},Aa={key:0,class:"mt-3 p-3 bg-gray-50 rounded-md"},Ua={class:"text-sm font-medium text-gray-900"},Ba={class:"text-sm text-gray-600"},Oa={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ma={__name:"AssetDetailsSection",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","update","validate"],setup(n,{emit:N}){const c=n,D=N,t=j([]),r=j({}),A=z(!1),E=z(null),q=z({}),U=z(!1),V=z(null),k=j({}),B=f=>!f||f===0?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),s=f=>f?new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",b=f=>f?f.replace("_"," ").replace(/\b\w/g,y=>y.toUpperCase()):"",i=f=>{const y={equipment:"bg-blue-100 text-blue-800",vehicle:"bg-green-100 text-green-800",furniture:"bg-purple-100 text-purple-800",computer:"bg-indigo-100 text-indigo-800",machinery:"bg-orange-100 text-orange-800",building:"bg-red-100 text-red-800",land:"bg-yellow-100 text-yellow-800",other:"bg-gray-100 text-gray-800"};return y[f]||y.other},I=f=>{if(!(f!=null&&f.cost_of_acquisition))return"$0.00";const y=parseFloat(f.cost_of_acquisition),v=parseFloat(f.any_reimbursement||0);return B(y-v)},X=f=>{if(!(f!=null&&f.cost_of_acquisition)||!(f!=null&&f.percentage_used_in_business))return"$0.00";const y=parseFloat(f.cost_of_acquisition),v=parseFloat(f.percentage_used_in_business)/100;return B(y*v)},le=f=>{if(!(f!=null&&f.cost_of_acquisition)||!(f!=null&&f.percentage_used_in_business))return B((f==null?void 0:f.cost_of_acquisition)||0);const y=parseFloat(f.cost_of_acquisition),v=(100-parseFloat(f.percentage_used_in_business))/100;return B(y*v)},G=f=>{if(!(f!=null&&f.date_of_purchase))return"Unknown";const y=new Date(f.date_of_purchase),v=new Date,H=Math.floor((v-y)/(365.25*24*60*60*1e3)),J=Math.floor((v-y)/(30.44*24*60*60*1e3));return H>0?`${H} year${H!==1?"s":""}`:J>0?`${J} month${J!==1?"s":""}`:"Less than a month"},Q=f=>{if(!(f!=null&&f.current_value)||!(f!=null&&f.cost_of_acquisition))return"N/A";const y=parseFloat(f.current_value),v=parseFloat(f.cost_of_acquisition),H=y-v,J=(H/v*100).toFixed(1);return`${B(H)} (${H>=0?"+":""}${J}%)`},M=f=>{if(!(f!=null&&f.current_value)||!(f!=null&&f.cost_of_acquisition))return"text-gray-600";const y=parseFloat(f.current_value),v=parseFloat(f.cost_of_acquisition);return y>=v?"text-green-600":"text-red-600"},o=()=>{c.readonly||(E.value=null,q.value={},A.value=!0)},a=f=>{c.readonly||(E.value=f,q.value={},A.value=!0)},l=()=>{A.value=!1,E.value=null,q.value={}},x=f=>{const y=Z(f);if(Object.keys(y).length>0){q.value=y;return}if(f.id&&t.find(v=>v.id===f.id)){const v=t.findIndex(H=>H.id===f.id);v!==-1&&(t[v]={...f})}else{const v={...f,id:Date.now()};t.push(v)}d(),l()},Z=f=>{const y={};return(!f.asset_name||f.asset_name.trim().length===0)&&(y.asset_name="Asset name is required"),f.date_of_purchase||(y.date_of_purchase="Purchase date is required"),!f.percentage_used_in_business&&f.percentage_used_in_business!==0?y.percentage_used_in_business="Business use percentage is required":(f.percentage_used_in_business<0||f.percentage_used_in_business>100)&&(y.percentage_used_in_business="Business use percentage must be between 0 and 100"),(!f.cost_of_acquisition||f.cost_of_acquisition<=0)&&(y.cost_of_acquisition="Cost of acquisition is required and must be greater than 0"),y},ie=f=>{r[f]=!r[f]},pe=f=>{c.readonly||(V.value=f,U.value=!0)},ge=f=>{if(c.readonly)return;t.splice(f,1),Object.keys(k).forEach(v=>{v.startsWith(`assets.${f}.`)&&delete k[v]});const y={};Object.keys(k).forEach(v=>{const H=v.match(/^assets\.(\d+)\.(.+)$/);if(H){const J=parseInt(H[1]),ye=H[2];J>f?y[`assets.${J-1}.${ye}`]=k[v]:J<f&&(y[v]=k[v])}else y[v]=k[v]}),Object.keys(k).forEach(v=>delete k[v]),Object.assign(k,y),d(),$()},$=()=>{U.value=!1,V.value=null},h=f=>{if(!f)return null;try{let y;if(typeof f=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(f))return f;y=new Date(f)}else if(f instanceof Date)y=f;else return null;if(isNaN(y.getTime()))return console.warn("Invalid date provided:",f),null;const v=y.getFullYear(),H=String(y.getMonth()+1).padStart(2,"0"),J=String(y.getDate()).padStart(2,"0");return`${v}-${H}-${J}`}catch(y){return console.error("Error formatting date for backend:",y,f),null}},d=()=>{const f=t.map(y=>({...y,date_of_purchase:h(y.date_of_purchase)}));D("update:modelValue",f),D("update",f)},L=()=>{t.splice(0,t.length),c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.forEach(f=>{t.push({...f})}),t.forEach((f,y)=>{r[y]===void 0&&(r[y]=!1)})};return Y(()=>c.errors,f=>{Object.keys(k).forEach(y=>delete k[y]),Object.assign(k,f)},{deep:!0}),Y(()=>c.modelValue,L,{deep:!0}),fe(()=>{L()}),(f,y)=>(m(),p(re,null,[e("div",Tn,[e("div",zn,[e("div",Ln,[e("div",Hn,[y[2]||(y[2]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Asset Details"),e("p",{class:"text-sm text-gray-600 mt-1"},"Business and personal assets for tax purposes")],-1)),e("button",{onClick:o,disabled:n.readonly,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-1"}),y[1]||(y[1]=F(" Add Asset ",-1))],8,Rn)])]),e("div",Yn,[e("div",Zn,[e("div",Wn,[e("div",Kn,[T(R(_e),{class:"h-5 w-5 text-blue-400"})]),y[3]||(y[3]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"}," Asset Information Guidelines "),e("div",{class:"mt-2 text-sm text-blue-700"},[e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Include all business-related assets and equipment"),e("li",null,"Percentage used in business affects tax deductions"),e("li",null,"Keep receipts and documentation for all asset purchases"),e("li",null,"Reimbursements reduce the deductible amount")])])],-1))])]),t.length===0?(m(),p("div",jn,[T(R(Ze),{class:"mx-auto h-12 w-12 text-gray-400"}),y[5]||(y[5]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No assets",-1)),y[6]||(y[6]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding your first business or personal asset.",-1)),e("div",Gn,[e("button",{onClick:o,disabled:n.readonly,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-2"}),y[4]||(y[4]=F(" Add Asset ",-1))],8,Jn)])])):(m(),p("div",Xn,[(m(!0),p(re,null,me(t,(v,H)=>(m(),p("div",{key:v.id||H,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[e("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:J=>ie(H)},[e("div",ea,[e("div",ta,[e("div",{class:_([i(v==null?void 0:v.asset_type),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},u(b(v==null?void 0:v.asset_type)),3)]),e("div",null,[e("h3",sa,u((v==null?void 0:v.asset_name)||`Asset ${H+1}`),1),e("p",oa,[F(u(B(v==null?void 0:v.cost_of_acquisition))+" ",1),v!=null&&v.percentage_used_in_business?(m(),p("span",la," "+u(v.percentage_used_in_business)+"% business use",1)):w("",!0),v!=null&&v.date_of_purchase?(m(),p("span",na," Purchased "+u(s(v.date_of_purchase)),1)):w("",!0)])])]),e("div",aa,[e("button",{onClick:se(J=>a(v),["stop"]),disabled:n.readonly,class:"text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:cursor-not-allowed"},[...y[7]||(y[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ra),e("button",{onClick:se(J=>pe(H),["stop"]),disabled:n.readonly,class:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(Ce),{class:"w-4 h-4"})],8,ia),(m(),p("svg",{class:_(["w-5 h-5 text-gray-400 transition-transform",r[H]?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...y[8]||(y[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,Qn),r[H]?(m(),p("div",da,[e("div",ua,[e("div",null,[y[9]||(y[9]=e("span",{class:"font-medium text-gray-700"},"Type:",-1)),e("span",ma,u(b(v==null?void 0:v.asset_type)||"Not specified"),1)]),e("div",null,[y[10]||(y[10]=e("span",{class:"font-medium text-gray-700"},"Purchase Date:",-1)),e("span",ca,u(s(v==null?void 0:v.date_of_purchase)||"Not set"),1)]),e("div",null,[y[11]||(y[11]=e("span",{class:"font-medium text-gray-700"},"Business Use:",-1)),e("span",pa,u((v==null?void 0:v.percentage_used_in_business)||0)+"%",1)]),e("div",null,[y[12]||(y[12]=e("span",{class:"font-medium text-gray-700"},"Acquisition Cost:",-1)),e("span",ba,u(B(v==null?void 0:v.cost_of_acquisition)),1)]),e("div",null,[y[13]||(y[13]=e("span",{class:"font-medium text-gray-700"},"Reimbursement:",-1)),e("span",fa,u(B(v==null?void 0:v.any_reimbursement)||"None"),1)]),e("div",null,[y[14]||(y[14]=e("span",{class:"font-medium text-gray-700"},"Net Cost:",-1)),e("span",ga,u(I(v)),1)]),e("div",null,[y[15]||(y[15]=e("span",{class:"font-medium text-gray-700"},"Business Cost:",-1)),e("span",ya,u(X(v)),1)]),e("div",null,[y[16]||(y[16]=e("span",{class:"font-medium text-gray-700"},"Personal Cost:",-1)),e("span",xa,u(le(v)),1)]),e("div",null,[y[17]||(y[17]=e("span",{class:"font-medium text-gray-700"},"Current Value:",-1)),e("span",va,u(B(v==null?void 0:v.current_value)||"Not set"),1)]),e("div",null,[y[18]||(y[18]=e("span",{class:"font-medium text-gray-700"},"Depreciation Rate:",-1)),e("span",ha,u(v!=null&&v.depreciation_rate?`${v.depreciation_rate}%`:"Not set"),1)]),e("div",null,[y[19]||(y[19]=e("span",{class:"font-medium text-gray-700"},"Age:",-1)),e("span",wa,u(G(v)),1)]),v!=null&&v.current_value&&(v!=null&&v.cost_of_acquisition)?(m(),p("div",ka,[y[20]||(y[20]=e("span",{class:"font-medium text-gray-700"},"Value Change:",-1)),e("span",{class:_([M(v),"ml-2"])},u(Q(v)),3)])):(m(),p("div",$a,[...y[21]||(y[21]=[e("span",{class:"font-medium text-gray-700"},"Value Change:",-1),e("span",{class:"ml-2 text-gray-500"},"Not available",-1)])]))]),e("div",_a,[y[22]||(y[22]=e("span",{class:"font-medium text-gray-700"},"Description:",-1)),e("p",Ca,u((v==null?void 0:v.description)||"No description provided"),1)])])):w("",!0)]))),128))]))])])]),T(Fn,{show:A.value,asset:E.value,errors:q.value,onClose:l,onSave:x},null,8,["show","asset","errors"]),U.value?(m(),p("div",Sa,[e("div",Na,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:$}),e("div",Va,[e("div",Da,[e("div",Ea,[y[25]||(y[25]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Ia,[y[24]||(y[24]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Asset ",-1)),e("div",Pa,[y[23]||(y[23]=e("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this asset? This action cannot be undone and will permanently remove the asset from your records. ",-1)),V.value!==null&&t[V.value]?(m(),p("div",Aa,[e("p",Ua,u(t[V.value].asset_name),1),e("p",Ba,u(B(t[V.value].cost_of_acquisition)),1)])):w("",!0)])])])]),e("div",Oa,[e("button",{type:"button",onClick:y[0]||(y[0]=v=>ge(V.value)),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete Asset "),e("button",{type:"button",onClick:$,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)],64))}},Zi=ce(Ma,[["__scopeId","data-v-646120eb"]]),qa={class:"expenses-management-section"},Fa={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ta={class:"px-6 py-4 border-b border-gray-200"},za={class:"flex items-center justify-between"},La={class:"flex items-center space-x-4"},Ha={class:"text-right mr-4"},Ra={class:"text-lg font-semibold text-gray-900"},Ya=["disabled"],Za={class:"p-6"},Wa={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Ka={class:"flex"},ja={class:"flex-shrink-0"},Ga={key:0,class:"text-center py-12"},Ja={class:"mt-6"},Xa=["disabled"],Qa={key:1,class:"space-y-4"},er=["onClick"],tr={class:"flex items-center space-x-3"},sr={class:"flex-shrink-0"},or={class:"text-lg font-medium text-gray-900"},lr={class:"text-sm text-gray-500"},nr={key:0},ar={key:1},rr={class:"flex items-center space-x-2"},ir=["onClick"],dr=["onClick","disabled"],ur=["onClick","disabled"],mr={class:"px-4 pb-4 border-t border-gray-100"},cr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},pr={class:"ml-2 text-gray-900"},br={class:"ml-2 text-gray-900"},fr={class:"ml-2 text-gray-900"},gr={class:"ml-2 text-gray-900"},yr={key:0},xr={class:"ml-2 text-gray-900"},vr={key:1},hr={class:"ml-2 text-gray-900"},wr={key:2},kr={class:"ml-2 text-gray-900"},$r={key:0,class:"mt-4"},_r={class:"mt-1 text-gray-900"},Cr={key:2,class:"mt-6 text-center"},Sr=["disabled"],Nr={key:3,class:"mt-6 bg-white rounded-lg border border-gray-200 shadow-sm"},Vr={class:"p-6"},Dr={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Er={class:"flex flex-col items-center"},Ir={class:"relative w-80 h-80"},Pr=["id"],Ar={class:"mt-4 text-center"},Ur={class:"text-2xl font-bold text-gray-900"},Br={class:"space-y-6"},Or={class:"grid grid-cols-2 gap-4"},Mr={class:"bg-blue-50 rounded-lg p-4 text-center"},qr={class:"text-2xl font-bold text-blue-600"},Fr={class:"bg-green-50 rounded-lg p-4 text-center"},Tr={class:"text-2xl font-bold text-green-600"},zr={class:"space-y-3"},Lr={class:"flex items-center space-x-3"},Hr={class:"font-medium text-gray-900"},Rr={class:"text-sm text-gray-500"},Yr={class:"text-right"},Zr={class:"font-semibold text-gray-900"},Wr={class:"text-sm text-gray-500"},Kr={key:0},jr={class:"space-y-3"},Gr={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},Jr={class:"flex items-center space-x-3"},Xr={class:"text-right"},Qr={class:"font-semibold text-blue-900"},ei={class:"text-sm text-blue-700"},ti={key:1,class:"flex items-center justify-between p-3 bg-purple-50 rounded-lg"},si={class:"flex items-center space-x-3"},oi={class:"text-right"},li={class:"font-semibold text-purple-900"},ni={class:"text-sm text-purple-700"},ai={key:1},ri={class:"space-y-3"},ii={key:0,class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},di={class:"text-right"},ui={class:"font-semibold text-green-900"},mi={class:"text-sm text-green-700"},ci={key:1,class:"flex items-center justify-between p-3 bg-red-50 rounded-lg"},pi={class:"text-right"},bi={class:"font-semibold text-red-900"},fi={class:"text-sm text-red-700"},gi={key:4,class:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4"},yi={class:"flex"},xi={class:"flex-shrink-0"},vi={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},hi={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},wi={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},ki={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},$i={class:"sm:flex sm:items-start"},_i={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},Ci={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Si={class:"mt-2"},Ni={key:0,class:"mt-3 p-3 bg-gray-50 rounded-md"},Vi={class:"text-sm font-medium text-gray-900"},Di={class:"text-sm text-gray-500"},Ei={__name:"ExpensesManagementSection",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","update","validate"],setup(n,{emit:N}){const c=n,D=N,t=j([]),r=z(""),A=j({}),E=j({}),q=z(!1),U=z(!1),V=z(null),k=z({}),B=z(!1),s=z(null),b=z(null);let i=null;const I=["#3B82F6","#EF4444","#10B981","#8B5CF6","#F59E0B","#EC4899","#6366F1","#84CC16","#F97316","#06B6D4"],X=[{key:"category",label:"Category",type:"select",required:!0,placeholder:"Select category",options:[{value:"miscellaneous",label:"Miscellaneous"},{value:"residency",label:"Residency"},{value:"business",label:"Business"},{value:"medical",label:"Medical"},{value:"education",label:"Education"},{value:"charitable",label:"Charitable"},{value:"travel",label:"Travel"},{value:"office",label:"Office Supplies"},{value:"professional",label:"Professional Services"},{value:"other",label:"Other"}]},{key:"particulars",label:"Particulars",type:"text",required:!0,placeholder:"Describe the expense",maxLength:200},{key:"date",label:"Date",type:"date",required:!0},{key:"amount",label:"Amount",type:"currency",required:!0,placeholder:"0.00",validate:C=>C&&(isNaN(C)||parseFloat(C)<=0)?"Amount must be a positive number":null},{key:"taxPayer",label:"Taxpayer",type:"text",placeholder:"Taxpayer name",maxLength:100},{key:"spouse",label:"Spouse",type:"text",placeholder:"Spouse name (if applicable)",maxLength:100},{key:"receiptNumber",label:"Receipt Number",type:"text",placeholder:"Receipt/Invoice number",maxLength:255},{key:"deductiblePercentage",label:"Deductible %",type:"percentage",placeholder:"0-100",validate:C=>C&&(isNaN(C)||parseFloat(C)<0||parseFloat(C)>100)?"Percentage must be between 0 and 100":null},{key:"remarks",label:"Remarks",type:"textarea",placeholder:"Additional notes or comments...",rows:2}],le=K(()=>r.value?t.filter(C=>C.category===r.value):t),G=K(()=>t.reduce((C,g)=>C+(parseFloat(g.amount)||0),0)),Q=K(()=>t.reduce((C,g)=>g.taxPayer&&g.taxPayer.trim()?C+(parseFloat(g.amount)||0):C,0)),M=K(()=>t.reduce((C,g)=>g.spouse&&g.spouse.trim()?C+(parseFloat(g.amount)||0):C,0)),o=K(()=>{const C={};return t.forEach(g=>{var P,ee;const W=g.category||"other",ne=((ee=(P=X.find(te=>te.key==="category"))==null?void 0:P.options.find(te=>te.value===W))==null?void 0:ee.label)||"Other";C[W]||(C[W]={name:ne,count:0,amount:0}),C[W].count++,C[W].amount+=parseFloat(g.amount)||0}),Object.values(C).sort((g,W)=>W.amount-g.amount)}),a=K(()=>t.reduce((C,g)=>{const W=parseFloat(g.amount)||0,ne=parseFloat(g.deductible_percentage)||0;return C+W*(ne/100)},0)),l=K(()=>G.value-a.value),x=K(()=>o.value.length===0?null:{labels:o.value.map(C=>C.name),datasets:[{data:o.value.map(C=>C.amount),backgroundColor:I.slice(0,o.value.length),borderWidth:2,borderColor:"#ffffff",hoverBorderWidth:3,hoverBorderColor:"#ffffff"}]}),Z=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C||0),ie=C=>C?new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",pe=C=>C?C.replace("_"," ").replace(/\b\w/g,g=>g.toUpperCase()):"",ge=C=>({business:"bg-blue-100 text-blue-800",medical:"bg-red-100 text-red-800",education:"bg-green-100 text-green-800",charitable:"bg-purple-100 text-purple-800",travel:"bg-yellow-100 text-yellow-800",office:"bg-indigo-100 text-indigo-800",professional:"bg-pink-100 text-pink-800",miscellaneous:"bg-gray-100 text-gray-800",residency:"bg-orange-100 text-orange-800"})[C]||"bg-gray-100 text-gray-800",$=C=>{A[C]=!A[C]},h=()=>{},d=(C=null)=>{V.value=C,k.value={},q.value=!0},L=()=>{q.value=!1,V.value=null,k.value={}},f=C=>{V.value=C,U.value=!0},y=()=>{U.value=!1,V.value=null},v=C=>{y(),d(C)},H=C=>{const g=qe(C);if(Object.keys(g).length>0){k.value=g;return}if(C.id){const W=t.findIndex(ne=>ne.id===C.id);W!==-1&&(t[W]={...C})}else{const W={...C,id:Date.now()};t.push(W)}D("update:modelValue",[...t]),D("update",[...t]),setTimeout(()=>{xe()},50),L()},J=C=>{s.value={expense:t[C],index:C},B.value=!0},ye=()=>{B.value=!1,s.value=null},Me=()=>{s.value&&(t.splice(s.value.index,1),D("update:modelValue",[...t]),D("update",[...t]),setTimeout(()=>{xe()},50)),ye()},qe=C=>{const g={};return C.category||(g.category="Category is required"),(!C.particulars||C.particulars.trim().length===0)&&(g.particulars="Description is required"),C.date||(g.date="Date is required"),(!C.amount||parseFloat(C.amount)<=0)&&(g.amount="Amount must be greater than 0"),C.taxPayer||(g.taxPayer="Tax payer is required"),g},he=async()=>{if(!(!b.value||!x.value||x.value.datasets[0].data.length===0))try{const{Chart:C,ArcElement:g,Tooltip:W,Legend:ne,DoughnutController:P}=await Re(async()=>{const{Chart:te,ArcElement:we,Tooltip:ve,Legend:ke,DoughnutController:$e}=await import("./chart-B6x78Jwj.js");return{Chart:te,ArcElement:we,Tooltip:ve,Legend:ke,DoughnutController:$e}},[]);C.register(g,W,ne,P);const ee=b.value.getContext("2d");i&&(i.destroy(),i=null),i=new C(ee,{type:"doughnut",data:x.value,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(te){const we=te.label||"",ve=te.parsed,ke=te.dataset.data.reduce((Fe,Te)=>Fe+Te,0),$e=(ve/ke*100).toFixed(1);return`${we}: ${Z(ve)} (${$e}%)`}},backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#ffffff",borderWidth:1}},cutout:"60%",animation:{animateRotate:!0,duration:1e3}}})}catch(C){console.error("Error initializing chart:",C)}},xe=async()=>{if(!x.value||x.value.datasets[0].data.length===0){i&&(i.destroy(),i=null);return}if(i&&i.canvas)try{i.data=x.value,i.update("active")}catch(C){console.error("Error updating chart:",C),i&&(i.destroy(),i=null),await de(),he()}else await de(),he()},Se=()=>{t.splice(0,t.length),c.modelValue&&Array.isArray(c.modelValue)&&t.push(...c.modelValue.map(C=>({...C})))};return Y(()=>c.errors,C=>{Object.keys(E).forEach(g=>delete E[g]),Object.assign(E,C)},{deep:!0}),Y(()=>c.modelValue,async()=>{Se(),await de(),xe()},{deep:!0}),Y(x,async()=>{await de(),xe()},{deep:!0}),fe(async()=>{Se(),await de(),t.length>0&&setTimeout(()=>{he()},100)}),ze(()=>{i&&(i.destroy(),i=null)}),(C,g)=>{var W,ne;return m(),p("div",qa,[e("div",Fa,[e("div",Ta,[e("div",za,[g[7]||(g[7]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Expense Details"),e("p",{class:"text-sm text-gray-600 mt-1"},"Add and manage your deductible expenses")],-1)),e("div",La,[S(e("select",{"onUpdate:modelValue":g[0]||(g[0]=P=>r.value=P),class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-gray-900",onChange:h},[...g[4]||(g[4]=[ae('<option value="" data-v-37062d15>All Categories</option><option value="miscellaneous" data-v-37062d15>Miscellaneous</option><option value="residency" data-v-37062d15>Residency</option><option value="business" data-v-37062d15>Business</option><option value="medical" data-v-37062d15>Medical</option><option value="education" data-v-37062d15>Education</option><option value="charitable" data-v-37062d15>Charitable</option>',7)])],544),[[oe,r.value]]),e("div",Ha,[g[5]||(g[5]=e("p",{class:"text-sm text-gray-500"},"Total Expenses",-1)),e("p",Ra,u(Z(G.value)),1)]),e("button",{onClick:g[1]||(g[1]=P=>d()),disabled:n.readonly,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-1"}),g[6]||(g[6]=F(" Add Expense ",-1))],8,Ya)])])]),e("div",Za,[e("div",Wa,[e("div",Ka,[e("div",ja,[T(R(_e),{class:"h-5 w-5 text-blue-400"})]),g[8]||(g[8]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"}," Expense Information Guidelines "),e("div",{class:"mt-2 text-sm text-blue-700"},[e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Keep detailed records and receipts for all business expenses"),e("li",null,"Separate personal and business expenses for accurate deductions"),e("li",null,"Include both taxpayer and spouse expenses when applicable"),e("li",null,"Categorize expenses properly for maximum tax benefits")])])],-1))])]),t.length===0?(m(),p("div",Ga,[T(R(We),{class:"mx-auto h-12 w-12 text-gray-400"}),g[10]||(g[10]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No expenses",-1)),g[11]||(g[11]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding your first deductible expense.",-1)),e("div",Ja,[e("button",{onClick:g[2]||(g[2]=P=>d()),disabled:n.readonly,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-2"}),g[9]||(g[9]=F(" Add Expense ",-1))],8,Xa)])])):(m(),p("div",Qa,[(m(!0),p(re,null,me(le.value,(P,ee)=>(m(),p("div",{key:P.id||ee,class:"bg-white border border-gray-200 rounded-lg shadow-sm"},[e("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:te=>$(ee)},[e("div",tr,[e("div",sr,[e("div",{class:_([ge(P==null?void 0:P.category),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},u(pe(P==null?void 0:P.category)),3)]),e("div",null,[e("h3",or,u((P==null?void 0:P.particulars)||`Expense ${ee+1}`),1),e("p",lr,[F(u(Z(P==null?void 0:P.amount))+" ",1),P!=null&&P.tax_payer?(m(),p("span",nr," "+u(P.tax_payer),1)):w("",!0),P!=null&&P.expense_date?(m(),p("span",ar," "+u(ie(P.expense_date)),1)):w("",!0)])])]),e("div",rr,[e("button",{onClick:se(te=>f(P),["stop"]),class:"text-blue-600 hover:text-blue-800"},[...g[12]||(g[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,ir),e("button",{onClick:se(te=>d(P),["stop"]),disabled:n.readonly,class:"text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:cursor-not-allowed"},[...g[13]||(g[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,dr),e("button",{onClick:se(te=>J(ee),["stop"]),disabled:n.readonly,class:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(Ce),{class:"w-4 h-4"})],8,ur),(m(),p("svg",{class:_(["w-5 h-5 text-gray-400 transition-transform",A[ee]?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[14]||(g[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,er),S(e("div",mr,[e("div",cr,[e("div",null,[g[15]||(g[15]=e("span",{class:"font-medium text-gray-700"},"Category:",-1)),e("span",pr,u(pe(P==null?void 0:P.category)||"Not set"),1)]),e("div",null,[g[16]||(g[16]=e("span",{class:"font-medium text-gray-700"},"Amount:",-1)),e("span",br,u(Z(P==null?void 0:P.amount)||"Not set"),1)]),e("div",null,[g[17]||(g[17]=e("span",{class:"font-medium text-gray-700"},"Date:",-1)),e("span",fr,u(ie(P==null?void 0:P.expense_date)||"Not set"),1)]),e("div",null,[g[18]||(g[18]=e("span",{class:"font-medium text-gray-700"},"Taxpayer:",-1)),e("span",gr,u((P==null?void 0:P.tax_payer)||"Not set"),1)]),P!=null&&P.spouse?(m(),p("div",yr,[g[19]||(g[19]=e("span",{class:"font-medium text-gray-700"},"Spouse:",-1)),e("span",xr,u(P.spouse),1)])):w("",!0),P!=null&&P.deductible_percentage?(m(),p("div",vr,[g[20]||(g[20]=e("span",{class:"font-medium text-gray-700"},"Deductible:",-1)),e("span",hr,u(P.deductible_percentage)+"%",1)])):w("",!0),P!=null&&P.receipt_number?(m(),p("div",wr,[g[21]||(g[21]=e("span",{class:"font-medium text-gray-700"},"Receipt #:",-1)),e("span",kr,u(P.receipt_number),1)])):w("",!0)]),P!=null&&P.remarks?(m(),p("div",$r,[g[22]||(g[22]=e("span",{class:"font-medium text-gray-700"},"Remarks:",-1)),e("p",_r,u(P.remarks),1)])):w("",!0)],512),[[Le,A[ee]]])]))),128))])),t.length>0?(m(),p("div",Cr,[e("button",{onClick:g[3]||(g[3]=P=>d()),disabled:n.readonly,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T(R(ue),{class:"w-4 h-4 mr-2"}),g[23]||(g[23]=F(" Add Another Expense ",-1))],8,Sr)])):w("",!0),t.length>0?(m(),p("div",Nr,[g[34]||(g[34]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Expense Analytics"),e("p",{class:"text-sm text-gray-600 mt-1"},"Visual breakdown of your expenses by category")],-1)),e("div",Vr,[e("div",Dr,[e("div",Er,[e("div",Ir,[e("canvas",{ref_key:"pieChartCanvas",ref:b,id:`expense-chart-${Math.random().toString(36).substr(2,9)}`,class:"max-w-full max-h-full"},null,8,Pr)]),e("div",Ar,[e("p",Ur,u(Z(G.value)),1),g[24]||(g[24]=e("p",{class:"text-sm text-gray-500"},"Total Expenses",-1))])]),e("div",Br,[e("div",Or,[e("div",Mr,[e("div",qr,u(t.length),1),g[25]||(g[25]=e("div",{class:"text-sm text-blue-800"},"Total Expenses",-1))]),e("div",Fr,[e("div",Tr,u(o.value.length),1),g[26]||(g[26]=e("div",{class:"text-sm text-green-800"},"Categories",-1))])]),e("div",null,[g[27]||(g[27]=e("h4",{class:"text-md font-semibold text-gray-900 mb-4"},"Category Breakdown",-1)),e("div",zr,[(m(!0),p(re,null,me(o.value,(P,ee)=>(m(),p("div",{key:P.name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Lr,[e("div",{class:"w-4 h-4 rounded-full",style:He({backgroundColor:I[ee%I.length]})},null,4),e("div",null,[e("p",Hr,u(P.name),1),e("p",Rr,u(P.count)+" expense"+u(P.count!==1?"s":""),1)])]),e("div",Yr,[e("p",Zr,u(Z(P.amount)),1),e("p",Wr,u((P.amount/G.value*100).toFixed(1))+"%",1)])]))),128))])]),Q.value>0||M.value>0?(m(),p("div",Kr,[g[30]||(g[30]=e("h4",{class:"text-md font-semibold text-gray-900 mb-4"},"Taxpayer vs Spouse",-1)),e("div",jr,[Q.value>0?(m(),p("div",Gr,[e("div",Jr,[T(R(je),{class:"w-5 h-5 text-blue-600"}),g[28]||(g[28]=e("span",{class:"font-medium text-blue-900"},"Taxpayer",-1))]),e("div",Xr,[e("p",Qr,u(Z(Q.value)),1),e("p",ei,u((Q.value/G.value*100).toFixed(1))+"%",1)])])):w("",!0),M.value>0?(m(),p("div",ti,[e("div",si,[T(R(Ke),{class:"w-5 h-5 text-purple-600"}),g[29]||(g[29]=e("span",{class:"font-medium text-purple-900"},"Spouse",-1))]),e("div",oi,[e("p",li,u(Z(M.value)),1),e("p",ni,u((M.value/G.value*100).toFixed(1))+"%",1)])])):w("",!0)])])):w("",!0),a.value>0||l.value>0?(m(),p("div",ai,[g[33]||(g[33]=e("h4",{class:"text-md font-semibold text-gray-900 mb-4"},"Tax Deductibility",-1)),e("div",ri,[a.value>0?(m(),p("div",ii,[g[31]||(g[31]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-3 h-3 bg-green-500 rounded-full"}),e("span",{class:"font-medium text-green-900"},"Deductible")],-1)),e("div",di,[e("p",ui,u(Z(a.value)),1),e("p",mi,u((a.value/G.value*100).toFixed(1))+"%",1)])])):w("",!0),l.value>0?(m(),p("div",ci,[g[32]||(g[32]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-3 h-3 bg-red-500 rounded-full"}),e("span",{class:"font-medium text-red-900"},"Non-Deductible")],-1)),e("div",pi,[e("p",bi,u(Z(l.value)),1),e("p",fi,u((l.value/G.value*100).toFixed(1))+"%",1)])])):w("",!0)])])):w("",!0)])])])])):w("",!0),t.length>0?(m(),p("div",gi,[e("div",yi,[e("div",xi,[T(R(Ve),{class:"h-5 w-5 text-blue-400"})]),g[35]||(g[35]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"}," Tax Deduction Information "),e("div",{class:"mt-2 text-sm text-blue-700"},[e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Business expenses are generally fully deductible"),e("li",null,"Personal expenses may have limitations or require itemization"),e("li",null,"Medical expenses must exceed 7.5% of AGI to be deductible"),e("li",null,"Charitable contributions have specific documentation requirements"),e("li",null,"Consult with your tax professional for specific deduction rules")])])],-1))])])):w("",!0)])]),T(Be,{show:q.value,expense:V.value,errors:k.value,onClose:L,onSave:H},null,8,["show","expense","errors"]),T(Oe,{show:U.value,expense:V.value,onClose:y,onEdit:v},null,8,["show","expense"]),B.value?(m(),p("div",vi,[e("div",hi,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:ye}),e("div",wi,[e("div",ki,[e("div",$i,[e("div",_i,[T(R(Ve),{class:"h-6 w-6 text-red-600"})]),e("div",Ci,[g[37]||(g[37]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Expense ",-1)),e("div",Si,[g[36]||(g[36]=e("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this expense? This action cannot be undone. ",-1)),s.value?(m(),p("div",Ni,[e("p",Vi,u((W=s.value.expense)==null?void 0:W.particulars),1),e("p",Di,u(Z((ne=s.value.expense)==null?void 0:ne.amount)),1)])):w("",!0)])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{type:"button",onClick:Me,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:ye,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)])}}},Wi=ce(Ei,[["__scopeId","data-v-37062d15"]]);export{Zi as A,Ri as E,Li as P,Hi as S,zi as a,Yi as b,Wi as c,Je as d,Ge as r};

import{l as f,q as B,b as O,w as _,a as e,c as n,f as m,h as c,o as l,F as g,r as p,t as a,j as v,d as D,u as C,p as U,g as P,v as j,N as b}from"./app-BL31bG2i.js";import{r as S,A as q}from"./AppLayout-CvciISU7.js";const z={class:"flex items-center justify-between"},L={class:"space-y-6"},E={class:"bg-white shadow rounded-lg p-6"},I={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},R=["value"],W=["value"],G={class:"bg-white shadow rounded-lg"},H={class:"px-6 py-4 border-b border-gray-200"},J={class:"text-lg font-medium text-gray-900"},K={key:0,class:"p-6 text-center"},Q={key:1,class:"divide-y divide-gray-200"},X={class:"flex items-center justify-between"},Z={class:"flex items-center space-x-4"},ee={class:"flex-shrink-0"},te={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},se={class:"text-sm font-medium text-gray-900"},oe={class:"mt-1 flex items-center space-x-4 text-sm text-gray-500"},le={key:0},ne={key:0,class:"mt-1 text-sm text-gray-600"},ae={class:"flex items-center space-x-3"},de=["onClick"],ie=["onClick"],re={key:2,class:"px-6 py-4 border-t border-gray-200"},ue={class:"flex items-center justify-between"},ce={class:"text-sm text-gray-700"},me={class:"flex space-x-2"},ge=["onClick"],pe={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ye={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},xe={class:"mt-3"},fe=["value"],ve=["max"],be={class:"flex justify-end space-x-3 pt-4"},we=["disabled"],_e={__name:"Documents",props:{documents:Object,filters:Object,taxYears:Array,documentTypes:Object},setup(i){const w=i,h=f(!1),y=f(!1),u=f({...w.filters}),d=f({file:null,document_type:"",tax_year:"",notes:""}),F=B(()=>{const o=[],t=w.documents.current_page,s=w.documents.last_page;for(let r=Math.max(1,t-2);r<=Math.min(s,t+2);r++)o.push(r);return o}),T=o=>{d.value.file=o.target.files[0]},M=async()=>{if(!d.value.file)return;y.value=!0;const o=new FormData;o.append("file",d.value.file),o.append("document_type",d.value.document_type),d.value.tax_year&&o.append("tax_year",d.value.tax_year),d.value.notes&&o.append("notes",d.value.notes),b.post("/client/documents",o,{onSuccess:()=>{k()},onFinish:()=>{y.value=!1}})},k=()=>{h.value=!1,d.value={file:null,document_type:"",tax_year:"",notes:""}},A=o=>{window.location.href=`/client/documents/${o.id}/download`},V=o=>{confirm("Are you sure you want to delete this document?")&&b.delete(`/client/documents/${o.id}`)},x=()=>{b.get("/client/documents",u.value,{preserveState:!0,replace:!0})},N=()=>{u.value={type:"",year:"",status:""},x()},Y=o=>{b.get("/client/documents",{...u.value,page:o},{preserveState:!0,replace:!0})},$=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(o,t)=>(l(),O(q,null,{header:_(()=>[e("div",z,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"My Documents"),e("p",{class:"mt-1 text-sm text-gray-600"},"Upload and manage your tax documents")],-1)),e("button",{onClick:t[0]||(t[0]=s=>h.value=!0),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Upload Document ")])]),default:_(()=>[e("div",L,[e("div",E,[e("div",I,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Document Type",-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value.type=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[t[8]||(t[8]=e("option",{value:""},"All Types",-1)),(l(!0),n(g,null,p(i.documentTypes,(s,r)=>(l(),n("option",{key:r,value:r},a(s),9,R))),128))],544),[[v,u.value.type]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tax Year",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.value.year=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[t[10]||(t[10]=e("option",{value:""},"All Years",-1)),(l(!0),n(g,null,p(i.taxYears,s=>(l(),n("option",{key:s,value:s},a(s),9,W))),128))],544),[[v,u.value.year]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),c(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value.status=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[...t[12]||(t[12]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],544),[[v,u.value.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:N,class:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Clear Filters ")])])]),e("div",G,[e("div",H,[e("h2",J," Documents ("+a(i.documents.total)+") ",1)]),i.documents.data.length===0?(l(),n("div",K,[D(C(S),{class:"mx-auto w-12 h-12 text-gray-400"}),t[14]||(t[14]=e("p",{class:"mt-2 text-gray-600"},"No documents found.",-1)),t[15]||(t[15]=e("p",{class:"text-sm text-gray-500"},"Upload your first document to get started.",-1))])):(l(),n("div",Q,[(l(!0),n(g,null,p(i.documents.data,s=>(l(),n("div",{key:s.id,class:"p-6 hover:bg-gray-50"},[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[D(C(S),{class:"w-6 h-6 text-blue-600"})])]),e("div",null,[e("h3",se,a(s.name),1),e("div",oe,[e("span",null,a(i.documentTypes[s.document_type]),1),s.tax_year?(l(),n("span",le,a(s.tax_year),1)):m("",!0),e("span",null,a(s.formatted_file_size),1),e("span",null,a($(s.created_at)),1)]),s.notes?(l(),n("p",ne,a(s.notes),1)):m("",!0)])]),e("div",ae,[e("span",{class:U([{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-green-100 text-green-800":s.status==="approved","bg-red-100 text-red-800":s.status==="rejected"},"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3),e("button",{onClick:r=>A(s),class:"text-indigo-600 hover:text-indigo-500 font-medium text-sm"}," Download ",8,de),s.status==="pending"?(l(),n("button",{key:0,onClick:r=>V(s),class:"text-red-600 hover:text-red-500 font-medium text-sm"}," Delete ",8,ie)):m("",!0)])])]))),128))])),i.documents.last_page>1?(l(),n("div",re,[e("div",ue,[e("div",ce," Showing "+a(i.documents.from)+" to "+a(i.documents.to)+" of "+a(i.documents.total)+" results ",1),e("div",me,[(l(!0),n(g,null,p(F.value,s=>(l(),n("button",{key:s,onClick:r=>Y(s),class:U([{"bg-indigo-600 text-white":s===i.documents.current_page,"bg-white text-gray-700 hover:bg-gray-50":s!==i.documents.current_page},"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium"])},a(s),11,ge))),128))])])])):m("",!0)])]),h.value?(l(),n("div",pe,[e("div",ye,[e("div",xe,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Upload Document",-1)),e("form",{onSubmit:P(M,["prevent"]),class:"space-y-4"},[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"File",-1)),e("input",{ref:"fileInput",type:"file",onChange:T,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},null,544),t[17]||(t[17]=e("p",{class:"mt-1 text-xs text-gray-500"},"Max 10MB. PDF, images, Word, Excel files allowed.",-1))]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Document Type",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>d.value.document_type=s),class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},[t[18]||(t[18]=e("option",{value:""},"Select Type",-1)),(l(!0),n(g,null,p(i.documentTypes,(s,r)=>(l(),n("option",{key:r,value:r},a(s),9,fe))),128))],512),[[v,d.value.document_type]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tax Year (Optional)",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>d.value.tax_year=s),type:"number",min:2e3,max:new Date().getFullYear()+1,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,8,ve),[[j,d.value.tax_year]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes (Optional)",-1)),c(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>d.value.notes=s),rows:"3",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",maxlength:"500"},null,512),[[j,d.value.notes]])]),e("div",be,[e("button",{type:"button",onClick:k,class:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400"}," Cancel "),e("button",{type:"submit",disabled:y.value,class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 disabled:opacity-50"},a(y.value?"Uploading...":"Upload"),9,we)])],32)])])])):m("",!0)]),_:1}))}};export{_e as default};

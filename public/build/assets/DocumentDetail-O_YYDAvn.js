import{c as w,b as t,o as a,B as u,e as v,w as L,a as y,t as i,p as F,k as E,l as H,v as P,f as O,n as R,x as N,r as k,q as h,A as X,N as Z}from"./app-BSz5IB2B.js";import{A as q,d as G}from"./AppLayout-AJ-Za7h8.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as W,r as Y}from"./ReceiptRefundIcon-C-iB-bD0.js";import{r as J}from"./BanknotesIcon-C1wi6t_E.js";import{r as Q}from"./AcademicCapIcon-ad0irD5G.js";import{r as T}from"./BriefcaseIcon-Dgp8xwjF.js";import{r as $}from"./DocumentTextIcon-wFrXj-Xc.js";function tt(d,e){return a(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function et(d,e){return a(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"})])}function ot(d,e){return a(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const nt={name:"AdminDocumentDetail",components:{AppLayout:q},props:{document:Object},setup(d){const e=k(1),l=k(d.document.status),n=k(""),D=k(!1),p=k(!0),C=h(()=>`/admin/documents/${d.document.id}/download`),I=h(()=>S.value?`/admin/documents/${d.document.id}/download`:C.value),S=h(()=>!!(d.document.mime_type==="application/pdf"||d.document.name&&d.document.name.toLowerCase().split(".").pop()==="pdf"||d.document.file_path&&d.document.file_path.toLowerCase().split(".").pop()==="pdf")),_=h(()=>{var o;return((o=d.document.mime_type)==null?void 0:o.startsWith("image/"))||/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(d.document.name)}),M=h(()=>{var r;const o=(r=d.document)==null?void 0:r.status;return o?o.charAt(0).toUpperCase()+o.slice(1):"Pending"}),z=h(()=>{var c,B,U,V;const o=(B=(c=d.document)==null?void 0:c.document_type)==null?void 0:B.toLowerCase(),r=(V=(U=d.document)==null?void 0:U.name)==null?void 0:V.toLowerCase();return _.value?ot:o!=null&&o.includes("tax")||r!=null&&r.includes("tax")?W:o!=null&&o.includes("bank")||o!=null&&o.includes("financial")||r!=null&&r.includes("bank")?J:o!=null&&o.includes("mortgage")||o!=null&&o.includes("property")||r!=null&&r.includes("mortgage")?G:o!=null&&o.includes("id")||o!=null&&o.includes("passport")||o!=null&&o.includes("license")?et:o!=null&&o.includes("education")||o!=null&&o.includes("diploma")||o!=null&&o.includes("certificate")?Q:o!=null&&o.includes("medical")||o!=null&&o.includes("health")||r!=null&&r.includes("medical")?Y:o!=null&&o.includes("employment")||o!=null&&o.includes("payroll")||o!=null&&o.includes("w2")||o!=null&&o.includes("1099")?T:o!=null&&o.includes("upload")||r!=null&&r.includes("upload")?tt:$}),j=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=o=>{if(!o)return"Unknown";const r=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(o)/Math.log(1024));return Math.round(o/Math.pow(1024,c)*100)/100+" "+r[c]},m=o=>({pending:"bg-yellow-50 text-yellow-700 border border-yellow-200",approved:"bg-green-50 text-green-700 border border-green-200",rejected:"bg-red-50 text-red-700 border border-red-200"})[o]||"bg-gray-50 text-gray-700 border border-gray-200",g=()=>{e.value<3&&(e.value=Math.min(3,e.value+.25))},f=()=>{e.value>.5&&(e.value=Math.max(.5,e.value-.25))},x=()=>{e.value=1},b=()=>{console.log("Document loaded successfully"),p.value=!1},s=o=>{console.error("Document load error:",o),p.value=!1};return X(()=>{p.value=!1}),{zoom:e,newStatus:l,statusNotes:n,updating:D,loading:p,documentUrl:C,pdfViewerUrl:I,isPDF:S,isImage:_,displayStatus:M,documentIcon:z,formatDate:j,formatFileSize:A,getStatusClass:m,zoomIn:g,zoomOut:f,resetZoom:x,onDocumentLoad:b,onDocumentError:s,downloadDocument:()=>{const o=`/admin/documents/${d.document.id}/download?download=1`,r=d.document.original_name||d.document.name||"document.pdf",c=document.createElement("a");c.href=o,c.download=r,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)},updateStatus:async()=>{D.value=!0;try{await Z.patch(`/admin/documents/${d.document.id}/status`,{status:l.value,notes:n.value},{preserveState:!0,onSuccess:()=>{d.document.status=l.value,n.value=""}})}catch(o){console.error("Failed to update status:",o)}finally{D.value=!1}},router:Z}}},st={class:"relative overflow-hidden"},rt={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},dt={class:"flex items-center space-x-4"},lt={class:"w-14 h-14 bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-purple-100"},it={class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-purple-900 to-indigo-900 bg-clip-text text-transparent break-words"},at={class:"mt-2 text-sm text-gray-600 font-medium break-words"},ct={class:"flex items-center space-x-4 mt-3"},ut={class:"flex items-center space-x-2"},mt={class:"text-xs font-semibold text-purple-700"},gt={class:"flex items-center space-x-2"},ft={class:"text-xs font-semibold text-indigo-700"},xt={class:"flex flex-col sm:flex-row gap-3 flex-shrink-0"},bt={class:"py-6"},wt={class:"max-w-7xl mx-auto sm:px-6 lg:px-4 space-y-8"},vt={class:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden"},ht={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},pt={class:"flex items-center"},_t={class:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3"},yt={class:"p-8"},kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Dt={class:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4 border border-blue-200"},Ct={class:"text-sm font-bold text-blue-900"},St={class:"bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl p-4 border border-purple-200"},zt={class:"text-sm font-bold text-purple-900 capitalize"},It={class:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4 border border-green-200"},Mt={class:"text-sm font-bold text-green-900"},jt={class:"bg-gradient-to-br from-amber-50 to-orange-100 rounded-xl p-4 border border-amber-200"},At={class:"mt-1"},Bt={class:"whitespace-nowrap"},Ut={class:"bg-gradient-to-br from-cyan-50 to-blue-100 rounded-xl p-4 border border-cyan-200"},Vt={class:"text-sm font-bold text-cyan-900"},Lt={class:"bg-gradient-to-br from-gray-50 to-slate-100 rounded-xl p-4 border border-gray-200"},Et={class:"text-sm font-bold text-gray-900"},Zt={class:"mt-8 pt-8 border-t border-gray-200"},Ft={class:"bg-gradient-to-br from-indigo-50 to-purple-100 rounded-xl p-6 border border-indigo-200"},Ht={class:"flex items-center mb-6"},Pt={class:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center mr-3"},Ot={class:"space-y-6"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Nt={class:"space-y-2"},Xt={class:"space-y-2"},qt={class:"flex justify-end"},Gt=["disabled"],Kt={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Wt={class:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden"},Yt={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},Jt={class:"flex items-center"},Qt={class:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3"},Tt={class:"p-8"},$t={key:0,class:"pdf-viewer-simple"},te=["src"],ee={key:1,class:"image-viewer bg-gray-50 rounded-lg p-4"},oe={class:"flex items-center justify-between mb-4"},ne={class:"flex items-center space-x-2"},se=["disabled"],re={class:"text-sm text-gray-600 px-2"},de=["disabled"],le={class:"overflow-auto max-h-96 bg-white rounded border border-gray-200 p-4"},ie=["src","alt"],ae={key:2,class:"unsupported-file bg-gray-50 rounded-lg"},ce={class:"text-center py-16"},ue={class:"mt-2 text-sm text-gray-500"},me={class:"mt-6"};function ge(d,e,l,n,D,p){const C=u("ArrowDownTrayIcon"),I=u("ArrowLeftIcon"),S=u("InformationCircleIcon"),_=u("CheckCircleIcon"),M=u("XCircleIcon"),z=u("ClockIcon"),j=u("DocumentTextIcon"),A=u("AppLayout");return a(),v(A,null,{header:L(()=>{var m,g,f,x,b;return[t("div",st,[e[16]||(e[16]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-purple-50 to-indigo-50"},null,-1)),e[17]||(e[17]=t("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-purple-100/40 to-transparent rounded-bl-full"},null,-1)),e[18]||(e[18]=t("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-indigo-100/30 to-transparent rounded-tr-full"},null,-1)),t("div",rt,[t("div",dt,[t("div",lt,[(a(),v(N(n.documentIcon),{class:"w-8 h-8 text-white"}))]),t("div",null,[t("h1",it,i(l.document.name),1),t("p",at," Uploaded by "+i((g=(m=l.document.client)==null?void 0:m.user)==null?void 0:g.first_name)+" "+i((x=(f=l.document.client)==null?void 0:f.user)==null?void 0:x.last_name)+" on "+i(n.formatDate(l.document.created_at)),1),t("div",ct,[t("div",ut,[e[12]||(e[12]=t("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"},null,-1)),t("span",mt,i(((b=l.document.document_type)==null?void 0:b.replace("_"," "))||"Document"),1)]),t("div",gt,[e[13]||(e[13]=t("div",{class:"w-2 h-2 bg-indigo-400 rounded-full"},null,-1)),t("span",ft,i(n.formatFileSize(l.document.file_size)),1)])])])]),t("div",xt,[t("button",{onClick:e[0]||(e[0]=(...s)=>n.downloadDocument&&n.downloadDocument(...s)),class:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl flex items-center justify-center text-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group font-semibold"},[y(C,{class:"w-5 h-5 mr-2 transition-transform duration-300 group-hover:translate-y-1"}),e[14]||(e[14]=t("span",null,"Download",-1))]),t("button",{onClick:e[1]||(e[1]=s=>n.router.visit("/admin/documents")),class:"bg-gradient-to-r from-slate-500 to-gray-600 hover:from-slate-600 hover:to-gray-700 text-white px-6 py-3 rounded-xl flex items-center justify-center text-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group font-semibold"},[y(I,{class:"w-5 h-5 mr-2"}),e[15]||(e[15]=t("span",null,"Back to Documents",-1))])])])])]}),default:L(()=>{var m,g,f,x,b;return[t("div",bt,[t("div",wt,[t("div",vt,[t("div",ht,[t("div",pt,[t("div",_t,[y(S,{class:"w-4 h-4 text-white"})]),e[19]||(e[19]=t("h3",{class:"text-lg font-bold text-gray-900"},"Document Information",-1))])]),t("div",yt,[t("div",kt,[t("div",Dt,[e[20]||(e[20]=t("dt",{class:"text-sm font-semibold text-blue-700 mb-2"},"Client",-1)),t("dd",Ct,i((g=(m=l.document.client)==null?void 0:m.user)==null?void 0:g.first_name)+" "+i((x=(f=l.document.client)==null?void 0:f.user)==null?void 0:x.last_name),1)]),t("div",St,[e[21]||(e[21]=t("dt",{class:"text-sm font-semibold text-purple-700 mb-2"},"Document Type",-1)),t("dd",zt,i((b=l.document.document_type)==null?void 0:b.replace("_"," ")),1)]),t("div",It,[e[22]||(e[22]=t("dt",{class:"text-sm font-semibold text-green-700 mb-2"},"Tax Year",-1)),t("dd",Mt,i(l.document.tax_year||"N/A"),1)]),t("div",jt,[e[23]||(e[23]=t("dt",{class:"text-sm font-semibold text-amber-700 mb-2"},"Status",-1)),t("dd",At,[t("span",{class:F(["inline-flex items-center px-3 py-2 text-sm font-bold rounded-xl shadow-sm",n.getStatusClass(l.document.status)])},[l.document.status==="approved"?(a(),v(_,{key:0,class:"w-4 h-4 mr-2 flex-shrink-0"})):l.document.status==="rejected"?(a(),v(M,{key:1,class:"w-4 h-4 mr-2 flex-shrink-0"})):(a(),v(z,{key:2,class:"w-4 h-4 mr-2 flex-shrink-0"})),t("span",Bt,i(n.displayStatus),1)],2)])]),t("div",Ut,[e[24]||(e[24]=t("dt",{class:"text-sm font-semibold text-cyan-700 mb-2"},"File Size",-1)),t("dd",Vt,i(n.formatFileSize(l.document.file_size)),1)]),t("div",Lt,[e[25]||(e[25]=t("dt",{class:"text-sm font-semibold text-gray-700 mb-2"},"Uploaded",-1)),t("dd",Et,i(n.formatDate(l.document.created_at)),1)])]),t("div",Zt,[t("div",Ft,[t("div",Ht,[t("div",Pt,[y(z,{class:"w-4 h-4 text-white"})]),e[26]||(e[26]=t("h4",{class:"text-lg font-bold text-indigo-900"},"Update Document Status",-1))]),t("div",Ot,[t("div",Rt,[t("div",Nt,[e[28]||(e[28]=t("label",{class:"block text-sm font-semibold text-indigo-700"},"New Status",-1)),E(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.newStatus=s),class:"w-full px-4 py-3 border-2 border-indigo-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 bg-white text-gray-900"},[...e[27]||(e[27]=[t("option",{value:"pending"},"ðŸ• Pending Review",-1),t("option",{value:"approved"},"âœ… Approved",-1),t("option",{value:"rejected"},"âŒ Rejected",-1)])],512),[[H,n.newStatus]])]),t("div",Xt,[e[29]||(e[29]=t("label",{class:"block text-sm font-semibold text-indigo-700"},"Notes (Optional)",-1)),E(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.statusNotes=s),type:"text",placeholder:"Add review notes or comments...",class:"w-full px-4 py-3 border-2 border-indigo-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 text-gray-900"},null,512),[[P,n.statusNotes]])])]),t("div",qt,[t("button",{onClick:e[4]||(e[4]=(...s)=>n.updateStatus&&n.updateStatus(...s)),disabled:n.updating,class:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center"},[n.updating?(a(),w("svg",Kt,[...e[30]||(e[30]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),v(_,{key:0,class:"w-5 h-5 mr-2"})),O(" "+i(n.updating?"Updating Status...":"Update Status"),1)],8,Gt)])])])])])])]),t("div",Wt,[t("div",Yt,[t("div",Jt,[t("div",Qt,[y(j,{class:"w-4 h-4 text-white"})]),e[31]||(e[31]=t("h3",{class:"text-lg font-bold text-gray-900"},"Document Preview",-1))])]),t("div",Tt,[n.isPDF?(a(),w("div",$t,[t("iframe",{src:n.pdfViewerUrl+"#toolbar=1&navpanes=1&scrollbar=1",class:"w-full border-2 border-gray-200 rounded-xl shadow-xl",style:{height:"800px","min-height":"800px"},frameborder:"0",allowfullscreen:""},null,8,te)])):n.isImage?(a(),w("div",ee,[t("div",oe,[e[34]||(e[34]=t("h4",{class:"text-sm font-medium text-gray-900"},"Image Preview",-1)),t("div",ne,[t("button",{onClick:e[5]||(e[5]=(...s)=>n.zoomOut&&n.zoomOut(...s)),disabled:n.zoom<=.5,class:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 bg-white border border-gray-300 rounded"},[...e[32]||(e[32]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})],-1)])],8,se),t("span",re,i(Math.round(n.zoom*100))+"%",1),t("button",{onClick:e[6]||(e[6]=(...s)=>n.zoomIn&&n.zoomIn(...s)),disabled:n.zoom>=3,class:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 bg-white border border-gray-300 rounded"},[...e[33]||(e[33]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})],-1)])],8,de),t("button",{onClick:e[7]||(e[7]=(...s)=>n.resetZoom&&n.resetZoom(...s)),class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50"}," Reset "),t("button",{onClick:e[8]||(e[8]=(...s)=>n.downloadDocument&&n.downloadDocument(...s)),class:"px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"}," Download ")])]),t("div",le,[t("img",{src:n.documentUrl,alt:l.document.name,style:R({transform:`scale(${n.zoom})`,transformOrigin:"top left"}),class:"max-w-full h-auto mx-auto transition-transform duration-200",onLoad:e[9]||(e[9]=(...s)=>n.onDocumentLoad&&n.onDocumentLoad(...s)),onError:e[10]||(e[10]=(...s)=>n.onDocumentError&&n.onDocumentError(...s))},null,44,ie)])])):(a(),w("div",ae,[t("div",ce,[e[35]||(e[35]=t("svg",{class:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[36]||(e[36]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Preview not available",-1)),t("p",ue," This file type ("+i(l.document.mime_type||"unknown")+") cannot be previewed in the browser. ",1),t("div",me,[t("button",{onClick:e[11]||(e[11]=(...s)=>n.downloadDocument&&n.downloadDocument(...s)),class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-sm font-medium"}," Download to View ")])])]))])])])]}),_:1})}const De=K(nt,[["render",ge],["__scopeId","data-v-6043d59b"]]);export{De as default};

import{Q as R,r as y,e as B,w as k,a as e,c as a,g as h,o as n,F as S,h as U,p as f,u as p,b as _,t as l,j as N,k as z,f as j,v as D,N as C}from"./app-BQNIn2f8.js";import{A as L}from"./AppLayout-DrkZ1JsK.js";import{r as T}from"./UserIcon-Ccjs6dBn.js";import{r as V}from"./ArrowLeftIcon-bdj3p7VB.js";import"./ConsentBanner-DqKiPM_A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"relative overflow-hidden"},A={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},F={class:"flex items-center space-x-4"},E={class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-purple-900 to-indigo-900 bg-clip-text text-transparent"},I={class:"mt-2 text-sm text-gray-600 font-medium"},O={class:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4"},P={class:"max-w-4xl mx-auto space-y-6"},Y={class:"space-y-6"},q={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-5 border-b border-gray-200"},H={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-4"},G={class:"text-base font-bold text-gray-900"},J={class:"flex items-center space-x-2 mt-1"},K={class:"text-sm text-gray-600 font-medium"},W={class:"flex items-center space-x-3"},X={key:0},Z={class:"px-8 py-6"},ee={class:"text-lg font-bold text-gray-900 mb-4 border-l-4 border-purple-400 pl-4"},te={class:"prose max-w-none"},re={class:"whitespace-pre-wrap text-gray-700 leading-relaxed text-base"},oe={key:0,class:"px-8 py-4 bg-gradient-to-r from-green-50 to-emerald-50 border-t border-green-200"},se={class:"flex items-center space-x-2"},le={class:"text-sm text-green-700 font-medium"},ie={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-start justify-center p-4 pt-8 overflow-y-auto"},ne={class:"relative w-full max-w-2xl bg-white shadow-2xl rounded-2xl border border-gray-100 overflow-hidden transform transition-all my-8"},ae={class:"p-8"},de={class:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 border border-blue-200"},ue={class:"grid grid-cols-1 gap-4"},ge={class:"space-y-2"},pe=["value"],ce={class:"space-y-2"},me=["value"],fe={class:"bg-gradient-to-br from-gray-50 to-slate-100 rounded-xl p-6 border border-gray-200"},xe={class:"space-y-2"},be={class:"text-xs text-gray-500 text-right"},ye={class:"bg-gradient-to-r from-gray-50 to-slate-50 px-8 py-6 border-t border-gray-200 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4"},he=["disabled"],ve={class:"flex items-center justify-center"},we={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ke={key:1,class:"w-5 h-5 mr-2 transition-transform duration-300 group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se={__name:"MessageDetail",props:{message:Object,conversation:Array},setup(s){const i=s,d=R(),x=y(!1),c=y(!1),u=y({body:""}),v=()=>{c.value=!0,console.log("Sending reply:",{url:`/client/messages/${i.message.id}/reply`,data:u.value,messageId:i.message.id,currentUser:d.props.auth.user}),C.post(`/client/messages/${i.message.id}/reply`,u.value,{onSuccess:o=>{console.log("Reply successful"),b(),C.reload()},onError:o=>{console.log("Reply errors:",o)},onFinish:()=>{c.value=!1}})},b=()=>{x.value=!1,u.value={body:""}},M=()=>i.message.sender_id===i.message.recipient_id?g(i.message.sender):i.message.sender_id===d.props.auth.user.id?g(i.message.recipient):g(i.message.sender),g=o=>{if(!o)return"Unknown User";if(o.name)return o.name;const t=[];return o.first_name&&t.push(o.first_name),o.last_name&&t.push(o.last_name),t.length>0?t.join(" "):o.email?o.email:"Unknown User"},w=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(o,t)=>(n(),B(L,null,{header:k(()=>[e("div",$,[t[6]||(t[6]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-purple-50 to-indigo-50"},null,-1)),t[7]||(t[7]=e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-purple-100/40 to-transparent rounded-bl-full"},null,-1)),t[8]||(t[8]=e("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-indigo-100/30 to-transparent rounded-tr-full"},null,-1)),e("div",A,[e("div",F,[e("button",{onClick:t[0]||(t[0]=m=>o.$inertia.visit("/client/messages")),class:"w-12 h-12 bg-gradient-to-br from-gray-500 to-slate-600 rounded-xl flex items-center justify-center shadow-lg ring-4 ring-gray-100 hover:ring-gray-200 transition-all duration-200"},[_(p(V),{class:"w-6 h-6 text-white"})]),t[4]||(t[4]=e("div",{class:"w-14 h-14 bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-purple-100"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),e("div",null,[e("h1",E,l(s.message.subject),1),e("p",I," Conversation with "+l(s.message.sender_id===p(d).props.auth.user.id?g(s.message.recipient):g(s.message.sender)),1),t[3]||(t[3]=e("div",{class:"flex items-center space-x-4 mt-3"},[e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),e("span",{class:"text-xs font-semibold text-purple-700"},"Secure Thread")]),e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-2 h-2 bg-indigo-400 rounded-full"}),e("span",{class:"text-xs font-semibold text-indigo-700"},"Real-time")])],-1))])]),e("div",O,[e("span",{class:f([{"bg-gradient-to-r from-red-500 to-rose-500 text-white":s.message.priority==="high","bg-gradient-to-r from-yellow-500 to-orange-500 text-white":s.message.priority==="normal","bg-gradient-to-r from-gray-400 to-gray-500 text-white":s.message.priority==="low"},"inline-flex items-center px-4 py-2 rounded-xl text-sm font-bold shadow-lg"])},l(s.message.priority.toUpperCase())+" PRIORITY ",3),e("button",{onClick:t[1]||(t[1]=m=>x.value=!0),class:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group"},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5 mr-2 transition-transform duration-300 group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1),e("span",{class:"font-semibold"},"Reply",-1)])])])])])]),default:k(()=>{var m;return[e("div",P,[e("div",Y,[(n(!0),a(S,null,U(s.conversation||[s.message],r=>(n(),a("div",{key:r.id,class:f(["bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden transform transition-all duration-200 hover:shadow-2xl",{"ring-4 ring-purple-200 bg-gradient-to-r from-purple-50 to-indigo-50":r.id===s.message.id}])},[e("div",q,[e("div",H,[e("div",Q,[e("div",{class:f(["w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ring-2 transition-all duration-200",r.sender_id===p(d).props.auth.user.id?"bg-gradient-to-br from-blue-500 to-indigo-600 ring-blue-100":"bg-gradient-to-br from-purple-500 to-indigo-600 ring-purple-100"])},[_(p(T),{class:"w-6 h-6 text-white"})],2),e("div",null,[e("h3",G,l(r.sender_id===p(d).props.auth.user.id?"You":g(r.sender)),1),e("div",J,[t[9]||(t[9]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",K,l(w(r.created_at)),1)])])]),e("div",W,[!r.is_read&&r.recipient_id===p(d).props.auth.user.id?(n(),a("div",X,[...t[10]||(t[10]=[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-sm animate-pulse"}," UNREAD ",-1)])])):h("",!0),e("span",{class:f([{"bg-gradient-to-r from-red-500 to-rose-500 text-white":r.priority==="high","bg-gradient-to-r from-yellow-500 to-orange-500 text-white":r.priority==="normal","bg-gradient-to-r from-gray-400 to-gray-500 text-white":r.priority==="low"},"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-sm"])},l(r.priority.toUpperCase()),3)])])]),e("div",Z,[e("h4",ee,l(r.subject),1),e("div",te,[e("p",re,l(r.body),1)])]),r.read_at?(n(),a("div",oe,[e("div",se,[t[11]||(t[11]=e("svg",{class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("p",le," Read on "+l(w(r.read_at)),1)])])):h("",!0)],2))),128))])]),x.value?(n(),a("div",ie,[e("div",ne,[e("div",{class:"bg-gradient-to-r from-slate-50 via-purple-50 to-indigo-50 px-8 py-6 border-b border-gray-200 relative overflow-hidden"},[t[14]||(t[14]=e("div",{class:"absolute top-0 right-0 w-32 h-16 bg-gradient-to-bl from-purple-100/40 to-transparent rounded-bl-full"},null,-1)),e("div",{class:"relative flex items-center justify-between"},[t[13]||(t[13]=e("div",{class:"flex items-center space-x-4"},[e("div",{class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg ring-4 ring-purple-100"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})])]),e("div",null,[e("h3",{class:"text-2xl font-bold bg-gradient-to-r from-gray-900 via-purple-900 to-indigo-900 bg-clip-text text-transparent"}," Reply to Message "),e("p",{class:"text-sm text-gray-600 font-medium"},"Send a secure reply")])],-1)),e("button",{onClick:b,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200"},[...t[12]||(t[12]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",ae,[e("form",{onSubmit:N(v,["prevent"]),class:"space-y-6"},[e("div",de,[e("div",ue,[e("div",ge,[t[15]||(t[15]=e("label",{class:"block text-sm font-semibold text-blue-700"},"To",-1)),e("input",{value:M(),type:"text",class:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl bg-blue-50 text-gray-700 font-medium",disabled:""},null,8,pe)]),e("div",ce,[t[16]||(t[16]=e("label",{class:"block text-sm font-semibold text-blue-700"},"Subject",-1)),e("input",{value:"Re: "+s.message.subject,type:"text",class:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl bg-blue-50 text-gray-700 font-medium",disabled:""},null,8,me)])])]),e("div",fe,[e("div",xe,[t[17]||(t[17]=e("label",{class:"block text-sm font-semibold text-gray-700"},[j("Reply "),e("span",{class:"text-red-500"},"*")],-1)),z(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>u.value.body=r),rows:"6",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-gray-900 placeholder-gray-500 resize-none",maxlength:"2000",placeholder:"Type your reply here...",required:""},null,512),[[D,u.value.body]]),e("div",be,l(((m=u.value.body)==null?void 0:m.length)||0)+"/2000 characters",1)])])],32)]),e("div",ye,[e("button",{type:"button",onClick:b,class:"w-full sm:w-auto px-6 py-3 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-100 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-sm hover:shadow-md"}," Cancel "),e("button",{type:"submit",onClick:v,disabled:c.value,class:"w-full sm:w-auto bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[e("div",ve,[c.value?(n(),a("svg",we,[...t[18]||(t[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(n(),a("svg",ke,[...t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)])])),j(" "+l(c.value?"Sending...":"Send Reply"),1)])],8,he)])])])):h("",!0)]}),_:1}))}};export{Se as default};

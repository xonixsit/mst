import{r as p,A as v,c as f,g as x,a as t,f as r,b as k,w as h,u as w,i as _,k as c,y as u,o as C}from"./app-EeG-Zs5J.js";const S={key:0,class:"fixed bottom-0 left-0 right-0 z-50 bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 border-t border-blue-800/50 shadow-2xl",style:{display:"block !important"}},A={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},V={class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6"},N={class:"flex-1"},T={class:"text-gray-300 text-sm mb-4"},j={class:"space-y-2 mb-4"},B={class:"flex items-center gap-3 cursor-pointer"},D={class:"flex items-center gap-3 cursor-pointer"},I={class:"flex items-center gap-3 cursor-pointer"},M={__name:"ConsentBanner",setup(E){const o=p(!1),n=p({essential:!0,analytics:!1,marketing:!1});v(()=>{m()});const m=async()=>{try{if(localStorage.getItem("consent_banner_dismissed")==="true"){o.value=!1;return}try{const e=await fetch("/api/consent");if(e.ok){const s=await e.json();s.has_consented?(n.value={essential:!0,analytics:s.consents.analytics||!1,marketing:s.consents.marketing||!1},o.value=!1):o.value=!0}else o.value=!0}catch{o.value=!0}}catch(a){console.error("Error checking consent status:",a),o.value=!0}},i=async(a,e="accepted")=>{var s;try{const l=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content,d=await fetch("/api/consent",{method:"POST",headers:{"Content-Type":"application/json",...l&&{"X-CSRF-Token":l}},body:JSON.stringify({consents:a,source:"banner"})});d.ok?(o.value=!1,localStorage.setItem("consent_banner_dismissed","true"),localStorage.setItem("consent_preferences",JSON.stringify(a))):(console.error("Failed to submit consent:",d.statusText),o.value=!1,localStorage.setItem("consent_banner_dismissed","true"))}catch(l){console.error("Error submitting consent:",l),o.value=!1,localStorage.setItem("consent_banner_dismissed","true")}},g=()=>{i([{type:"terms",given:!0},{type:"privacy",given:!0},{type:"analytics",given:!0},{type:"marketing",given:!0},{type:"cookies",given:!0}],"accepted")},y=()=>{i([{type:"terms",given:!0},{type:"privacy",given:!0},{type:"analytics",given:!1},{type:"marketing",given:!1},{type:"cookies",given:!1}],"accepted")},b=()=>{const a=[{type:"terms",given:!0},{type:"privacy",given:!0},{type:"analytics",given:n.value.analytics},{type:"marketing",given:n.value.marketing},{type:"cookies",given:n.value.analytics||n.value.marketing}];i(a,"accepted")};return(a,e)=>o.value?(C(),f("div",S,[t("div",A,[t("div",V,[t("div",N,[e[9]||(e[9]=t("h3",{class:"text-white font-bold text-lg mb-2"},"Privacy & Cookie Consent",-1)),t("p",T,[e[4]||(e[4]=r(" We use cookies and tracking technologies to enhance your experience, analyze usage, and improve our services. ",-1)),k(w(_),{href:"/legal/privacy",class:"text-blue-400 hover:text-blue-300 underline"},{default:h(()=>[...e[3]||(e[3]=[r("Learn more about our privacy practices",-1)])]),_:1}),e[5]||(e[5]=r(". ",-1))]),t("div",j,[t("label",B,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>n.value.essential=s),disabled:"",class:"w-4 h-4 rounded bg-blue-600 border-blue-500 cursor-not-allowed"},null,512),[[u,n.value.essential]]),e[6]||(e[6]=t("span",{class:"text-gray-300 text-sm"},[t("span",{class:"font-semibold"},"Essential Cookies"),r(" (Required for functionality) ")],-1))]),t("label",D,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>n.value.analytics=s),class:"w-4 h-4 rounded bg-blue-600 border-blue-500 cursor-pointer"},null,512),[[u,n.value.analytics]]),e[7]||(e[7]=t("span",{class:"text-gray-300 text-sm"},[t("span",{class:"font-semibold"},"Analytics"),r(" (Help us improve your experience) ")],-1))]),t("label",I,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=s=>n.value.marketing=s),class:"w-4 h-4 rounded bg-blue-600 border-blue-500 cursor-pointer"},null,512),[[u,n.value.marketing]]),e[8]||(e[8]=t("span",{class:"text-gray-300 text-sm"},[t("span",{class:"font-semibold"},"Marketing"),r(" (Personalized content and offers) ")],-1))])])]),t("div",{class:"flex flex-col sm:flex-row gap-3 w-full md:w-auto"},[t("button",{onClick:y,class:"px-6 py-2 rounded-lg border border-gray-500 text-gray-300 hover:text-white hover:border-gray-300 transition-colors text-sm font-medium"}," Reject All "),t("button",{onClick:b,class:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors text-sm font-medium"}," Accept Selected "),t("button",{onClick:g,class:"px-6 py-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white transition-colors text-sm font-medium"}," Accept All ")])])])])):x("",!0)}};export{M as _};

import{m as I,b as m,w as g,a as e,h as b,j as p,c as a,o as n,F as h,r as _,t as l,f as c,p as w,u as k,i as C,e as x,N as f}from"./app-Dpla5MbZ.js";import{_ as O}from"./AppLayout-CNJ2SeGy.js";const V={class:"font-semibold text-xl text-gray-800 leading-tight"},B={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},F={class:"py-12"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},U={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},q={class:"p-6 border-b border-gray-200"},J={class:"flex flex-wrap gap-4"},L=["value"],W={class:"flex items-end gap-2"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},z={key:0,class:"p-6 text-center text-gray-500"},E={key:1,class:"divide-y divide-gray-200"},H={class:"flex items-start justify-between"},G={class:"flex-1"},K={class:"flex items-center gap-3 mb-2"},Q={class:"flex-shrink-0"},X={class:"text-sm font-medium text-gray-900"},Z={class:"text-xs text-gray-500"},ee={key:0,class:"w-2 h-2 bg-blue-600 rounded-full"},te={class:"ml-11"},se={class:"text-sm text-gray-700"},oe={class:"flex items-center gap-2 ml-4"},ie=["onClick"],ne=["onClick"],ae={key:2,class:"px-6 py-4 border-t border-gray-200"},re={class:"flex items-center justify-between"},le={class:"text-sm text-gray-700"},de={class:"flex gap-2"},fe={__name:"Notifications",props:{notifications:Object,filters:Object,unreadCount:Number,notificationTypes:Object},setup(o){const v=o,u=I({status:v.filters.status||"",type:v.filters.type||""}),y=()=>{f.get(route("client.notifications.index"),u,{preserveState:!0,replace:!0})},N=i=>{f.post(route("client.notifications.mark-read",i),{},{preserveScroll:!0})},D=()=>{f.post(route("client.notifications.mark-all-read"),{},{preserveScroll:!0})},R=i=>{confirm("Are you sure you want to delete this notification?")&&f.delete(route("client.notifications.destroy",i),{preserveScroll:!0})},A=()=>{confirm("Are you sure you want to delete all notifications? This action cannot be undone.")&&f.delete(route("client.notifications.destroy-all"),{preserveScroll:!0})},S=i=>{const t={DocumentApproved:"âœ“",DocumentRejected:"âœ—",InvoiceCreated:"$",InvoicePaid:"ðŸ’°",ClientWelcome:"ðŸ‘‹",ClientReviewRequest:"ðŸ“",MessageReceived:"ðŸ’¬"},s=i.split("\\").pop();return t[s]||"ðŸ””"},M=i=>{const t={DocumentApproved:"bg-green-500",DocumentRejected:"bg-red-500",InvoiceCreated:"bg-blue-500",InvoicePaid:"bg-green-500",ClientWelcome:"bg-purple-500",ClientReviewRequest:"bg-yellow-500",MessageReceived:"bg-indigo-500"},s=i.split("\\").pop();return t[s]||"bg-gray-500"},j=i=>{const t=JSON.parse(i.data);return t.title||t.subject||"Notification"},$=i=>{const t=JSON.parse(i.data);return t.message||t.body||"You have a new notification"},T=i=>{const t=new Date(i),s=new Date,r=(s-t)/(1e3*60*60);if(r<1){const d=Math.floor((s-t)/6e4);return`${d} minute${d!==1?"s":""} ago`}else if(r<24){const d=Math.floor(r);return`${d} hour${d!==1?"s":""} ago`}else if(r<168){const d=Math.floor(r/24);return`${d} day${d!==1?"s":""} ago`}else return t.toLocaleDateString()};return(i,t)=>(n(),m(O,{title:"Notifications"},{header:g(()=>[e("h2",V,[t[2]||(t[2]=x(" Notifications ",-1)),o.unreadCount>0?(n(),a("span",B,l(o.unreadCount)+" unread ",1)):c("",!0)])]),default:g(()=>[e("div",F,[e("div",P,[e("div",U,[e("div",q,[e("div",J,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.status=s),onChange:y,class:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...t[3]||(t[3]=[e("option",{value:""},"All",-1),e("option",{value:"unread"},"Unread",-1),e("option",{value:"read"},"Read",-1)])],544),[[p,u.status]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.type=s),onChange:y,class:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[5]||(t[5]=e("option",{value:""},"All Types",-1)),(n(!0),a(h,null,_(o.notificationTypes,(s,r)=>(n(),a("option",{key:r,value:r},l(s),9,L))),128))],544),[[p,u.type]])]),e("div",W,[o.unreadCount>0?(n(),a("button",{key:0,onClick:D,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Mark All Read ")):c("",!0),e("button",{onClick:A,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Delete All ")])])])]),e("div",Y,[o.notifications.data.length===0?(n(),a("div",z,[...t[7]||(t[7]=[e("div",{class:"text-6xl mb-4"},"ðŸ””",-1),e("h3",{class:"text-lg font-medium mb-2"},"No notifications",-1),e("p",null,"You're all caught up! No notifications to display.",-1)])])):(n(),a("div",E,[(n(!0),a(h,null,_(o.notifications.data,s=>(n(),a("div",{key:s.id,class:w(["p-6 hover:bg-gray-50 transition-colors duration-150",{"bg-blue-50":!s.read_at}])},[e("div",H,[e("div",G,[e("div",K,[e("div",Q,[e("div",{class:w(["w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium",M(s.type)])},l(S(s.type)),3)]),e("div",null,[e("h4",X,l(j(s)),1),e("p",Z,l(T(s.created_at)),1)]),s.read_at?c("",!0):(n(),a("div",ee))]),e("div",te,[e("p",se,l($(s)),1)])]),e("div",oe,[s.read_at?c("",!0):(n(),a("button",{key:0,onClick:r=>N(s.id),class:"text-blue-600 hover:text-blue-800 text-sm",title:"Mark as read"}," Mark Read ",8,ie)),e("button",{onClick:r=>R(s.id),class:"text-red-600 hover:text-red-800 text-sm",title:"Delete notification"}," Delete ",8,ne)])])],2))),128))])),o.notifications.last_page>1?(n(),a("div",ae,[e("div",re,[e("div",le," Showing "+l(o.notifications.from)+" to "+l(o.notifications.to)+" of "+l(o.notifications.total)+" notifications ",1),e("div",de,[o.notifications.prev_page_url?(n(),m(k(C),{key:0,href:o.notifications.prev_page_url,class:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200"},{default:g(()=>[...t[8]||(t[8]=[x(" Previous ",-1)])]),_:1},8,["href"])):c("",!0),o.notifications.next_page_url?(n(),m(k(C),{key:1,href:o.notifications.next_page_url,class:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200"},{default:g(()=>[...t[9]||(t[9]=[x(" Next ",-1)])]),_:1},8,["href"])):c("",!0)])])])):c("",!0)])])])]),_:1}))}};export{fe as default};

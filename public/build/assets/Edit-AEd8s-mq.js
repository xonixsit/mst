import{l as ae,T as ne,q as B,s as ie,b as g,w as T,a as o,c,o as i,F as O,r as z,p as m,f as b,x as q,t as v,u as n,n as L,N as y,e as K}from"./app-CMgtX0Ej.js";import{_ as de}from"./AppLayout-DGhDCHeo.js";import{r as ue,a as ce,P as pe,S as ge,E as me,b as be,A as he,c as ve}from"./ExpensesManagementSection-C7KogG3C.js";import{r as ye}from"./UserIcon-BQzPn_s2.js";import{r as fe,a as xe}from"./ReceiptRefundIcon-DEanPp5v.js";import{r as we}from"./CurrencyDollarIcon-iOFQPLNP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EyeIcon-CcOWW_kZ.js";import"./InformationCircleIcon-CM8x6QI5.js";import"./PlusIcon-vpH0sm3p.js";import"./TrashIcon-BR7MGtR9.js";import"./ExclamationTriangleIcon-BVXfbrEB.js";const _e={class:"flex justify-between items-center"},ke={class:"flex space-x-3"},Se={class:"max-w-7xl mx-auto"},Ce={class:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200 mb-6 p-2 rounded-t-lg"},je={class:"flex space-x-2","aria-label":"Tabs"},Ae=["onClick"],Ne={class:"flex items-center justify-center space-x-2"},Ve={class:"font-medium"},Me={key:0,class:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},$e={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},Ue={class:"lg:col-span-3"},Pe={class:"p-6"},De={class:"lg:col-span-1"},Fe={class:"bg-white shadow rounded-lg p-6 sticky top-6"},Ee={class:"mb-6"},Be={class:"flex items-center justify-between mb-2"},Te={class:"text-sm text-gray-500"},Oe={class:"w-full bg-gray-200 rounded-full h-2"},ze={class:"space-y-3 mb-6"},qe=["onClick"],Le={class:"flex items-center space-x-3"},Ke={class:"flex items-center space-x-2"},Ye={class:"w-8 h-2 bg-gray-200 rounded-full"},Ze={key:1,class:"w-2 h-2 bg-green-500 rounded-full"},Ge={key:2,class:"w-2 h-2 bg-amber-500 rounded-full"},He={key:3,class:"w-2 h-2 bg-gray-300 rounded-full"},Je={class:"space-y-3"},Qe=["disabled"],it={__name:"Edit",props:{client:Object,visaStatusOptions:{type:Array,default:()=>[]}},setup(f){var S,C,j,A,N,V,M,$,U,P,D,F,E;const l=f,d=ae("personal"),s=ne({personal:{firstName:((S=l.client.user)==null?void 0:S.first_name)||"",middleName:((C=l.client.user)==null?void 0:C.middle_name)||"",lastName:((j=l.client.user)==null?void 0:j.last_name)||"",email:((A=l.client.user)==null?void 0:A.email)||"",phone:l.client.phone||"",ssn:l.client.ssn||"",dateOfBirth:l.client.date_of_birth||"",maritalStatus:l.client.marital_status||"single",occupation:l.client.occupation||"",insuranceCovered:l.client.insurance_covered||!1,streetNo:l.client.street_no||"",apartmentNo:l.client.apartment_no||"",zipCode:l.client.zip_code||"",city:l.client.city||"",state:l.client.state||"",country:l.client.country||"United States",mobileNumber:l.client.mobile_number||"",workNumber:l.client.work_number||"",visaStatus:l.client.visa_status||"",date_of_entry_us:l.client.date_of_entry_us||""},spouse:{firstName:((N=l.client.spouse)==null?void 0:N.first_name)||"",middleName:((V=l.client.spouse)==null?void 0:V.middle_name)||"",lastName:((M=l.client.spouse)==null?void 0:M.last_name)||"",email:(($=l.client.spouse)==null?void 0:$.email)||"",phone:((U=l.client.spouse)==null?void 0:U.phone)||"",ssn:((P=l.client.spouse)==null?void 0:P.ssn)||"",dateOfBirth:((D=l.client.spouse)==null?void 0:D.date_of_birth)||"",occupation:((F=l.client.spouse)==null?void 0:F.occupation)||""},employee:[((E=l.client.employees)==null?void 0:E[0])||{}],projects:l.client.projects||[],assets:l.client.assets||[],expenses:l.client.expenses||[]}),x=B(()=>[{id:"personal",name:"Personal Details",icon:ye},{id:"spouse",name:"Spouse Details",icon:fe},{id:"employee",name:"Employment",icon:xe},{id:"projects",name:"Projects",icon:ue},{id:"assets",name:"Assets",icon:we},{id:"expenses",name:"Expenses",icon:ce}]),w=B(()=>{const t=x.value.map(a=>p(a.id)).filter(a=>a!==null),e=t.reduce((a,r)=>a+r,0);return t.length>0?e/t.length:0}),p=t=>{switch(t){case"personal":return re();case"spouse":return se();case"employee":return oe();case"projects":return null;case"assets":return null;case"expenses":return null;default:return 0}},Y=t=>{const e=p(t);return e===null?_(t):e===100?"bg-green-500":e>0?"bg-amber-500":"bg-gray-300"},_=t=>({personal:"bg-blue-500",spouse:"bg-rose-500",employee:"bg-indigo-500",projects:"bg-purple-500",assets:"bg-emerald-500",expenses:"bg-orange-500"})[t]||"bg-gray-500",Z=t=>{var r,u;const e=d.value===t,a={personal:{active:"bg-blue-500 text-white shadow-lg transform scale-105 border-2 border-blue-600",inactive:"bg-blue-100 text-blue-700 hover:bg-blue-200 hover:shadow-md hover:transform hover:scale-102 border border-blue-200"},spouse:{active:"bg-rose-500 text-white shadow-lg transform scale-105 border-2 border-rose-600",inactive:"bg-rose-100 text-rose-700 hover:bg-rose-200 hover:shadow-md hover:transform hover:scale-102 border border-rose-200"},employee:{active:"bg-indigo-500 text-white shadow-lg transform scale-105 border-2 border-indigo-600",inactive:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 hover:shadow-md hover:transform hover:scale-102 border border-indigo-200"},projects:{active:"bg-purple-500 text-white shadow-lg transform scale-105 border-2 border-purple-600",inactive:"bg-purple-100 text-purple-700 hover:bg-purple-200 hover:shadow-md hover:transform hover:scale-102 border border-purple-200"},assets:{active:"bg-emerald-500 text-white shadow-lg transform scale-105 border-2 border-emerald-600",inactive:"bg-emerald-100 text-emerald-700 hover:bg-emerald-200 hover:shadow-md hover:transform hover:scale-102 border border-emerald-200"},expenses:{active:"bg-orange-500 text-white shadow-lg transform scale-105 border-2 border-orange-600",inactive:"bg-orange-100 text-orange-700 hover:bg-orange-200 hover:shadow-md hover:transform hover:scale-102 border border-orange-200"}};return e?(r=a[t])==null?void 0:r.active:(u=a[t])==null?void 0:u.inactive},G=t=>({personal:"bg-gradient-to-br from-blue-50 to-white",spouse:"bg-gradient-to-br from-rose-50 to-white",employee:"bg-gradient-to-br from-indigo-50 to-white",projects:"bg-gradient-to-br from-purple-50 to-white",assets:"bg-gradient-to-br from-emerald-50 to-white",expenses:"bg-gradient-to-br from-orange-50 to-white"})[t]||"bg-white",H=t=>{const e=d.value===t;return{personal:e?"bg-blue-100 border border-blue-200":"bg-gray-50 hover:bg-blue-50",spouse:e?"bg-rose-100 border border-rose-200":"bg-gray-50 hover:bg-rose-50",employee:e?"bg-indigo-100 border border-indigo-200":"bg-gray-50 hover:bg-indigo-50",projects:e?"bg-purple-100 border border-purple-200":"bg-gray-50 hover:bg-purple-50",assets:e?"bg-emerald-100 border border-emerald-200":"bg-gray-50 hover:bg-emerald-50",expenses:e?"bg-orange-100 border border-orange-200":"bg-gray-50 hover:bg-orange-50"}[t]||"bg-gray-50 hover:bg-gray-100"},J=t=>{const e=d.value===t;return{personal:e?"text-blue-600":"text-gray-500",spouse:e?"text-rose-600":"text-gray-500",employee:e?"text-indigo-600":"text-gray-500",projects:e?"text-purple-600":"text-gray-500",assets:e?"text-emerald-600":"text-gray-500",expenses:e?"text-orange-600":"text-gray-500"}[t]||"text-gray-500"},Q=t=>{const e=d.value===t;return{personal:e?"text-blue-900":"text-gray-900",spouse:e?"text-rose-900":"text-gray-900",employee:e?"text-indigo-900":"text-gray-900",projects:e?"text-purple-900":"text-gray-900",assets:e?"text-emerald-900":"text-gray-900",expenses:e?"text-orange-900":"text-gray-900"}[t]||"text-gray-900"},R=t=>d.value===t?"text-white":{personal:"text-blue-600",spouse:"text-rose-600",employee:"text-indigo-600",projects:"text-purple-600",assets:"text-emerald-600",expenses:"text-orange-600"}[t]||"text-gray-600",W=t=>d.value===t?"bg-white bg-opacity-80":{personal:"bg-blue-400",spouse:"bg-rose-400",employee:"bg-indigo-400",projects:"bg-purple-400",assets:"bg-emerald-400",expenses:"bg-orange-400"}[t]||"bg-gray-400",h=()=>{},X=t=>{Array.isArray(s.employee)||(s.employee=[]),s.employee.length===0&&s.employee.push({}),s.employee[0]={...t}},I=()=>{const t={personal:k(s.personal),spouse:k(s.spouse),employee:Array.isArray(s.employee)?s.employee:[],projects:s.projects,assets:Array.isArray(s.assets)?s.assets.map(e=>{const a={...e};return a.date_of_purchase&&(a.date_of_purchase=te(a.date_of_purchase)),a}):[],expenses:s.expenses};s.transform(()=>t).put(route("admin.clients.update",l.client.id),{onSuccess:()=>{y.visit(route("admin.clients.show",l.client.id))},onError:e=>{console.error("Failed to update client:",e)}})},ee=()=>{y.visit(route("admin.clients.show",l.client.id))},k=t=>{const e={};for(const[a,r]of Object.entries(t)){const u=a.replace(/[A-Z]/g,le=>`_${le.toLowerCase()}`);e[u]=r}return e},te=t=>{if(!t)return null;try{let e;if(typeof t=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;e=new Date(t)}else if(t instanceof Date)e=t;else return null;if(isNaN(e.getTime()))return console.warn("Invalid date provided:",t),null;const a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0");return`${a}-${r}-${u}`}catch(e){return console.error("Error formatting date for backend:",e,t),null}},re=()=>{const t=["firstName","lastName","email","phone"];return t.filter(a=>{const r=s.personal[a];return r&&r.toString().trim().length>0}).length/t.length*100},se=()=>{var a;if(((a=s.personal)==null?void 0:a.maritalStatus)!=="married")return 100;const t=["firstName","lastName"];return t.filter(r=>{const u=s.spouse[r];return u&&u.toString().trim().length>0}).length/t.length*100},oe=()=>{if(!s.employee||!Array.isArray(s.employee)||s.employee.length===0)return 0;const t=s.employee[0],e=["employerName","position"];return e.filter(r=>{const u=t[r];return u&&u.toString().trim().length>0}).length/e.length*100};return ie(()=>s.data(),()=>{},{deep:!0}),(t,e)=>(i(),g(de,null,{header:T(()=>[o("div",_e,[e[10]||(e[10]=o("div",null,[o("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Client"),o("p",{class:"text-gray-600 mt-1"},"Update client information")],-1)),o("div",ke,[o("button",{onClick:e[0]||(e[0]=a=>n(y).visit(t.route("admin.clients.show",f.client.id))),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center"},[...e[8]||(e[8]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),K(" View Client ",-1)])]),o("button",{onClick:e[1]||(e[1]=a=>n(y).visit(t.route("admin.clients.index"))),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center"},[...e[9]||(e[9]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),K(" Back to Clients ",-1)])])])])]),default:T(()=>{var a;return[o("div",Se,[o("div",Ce,[o("nav",je,[(i(!0),c(O,null,z(x.value,r=>(i(),c("button",{key:r.id,onClick:u=>d.value=r.id,class:m(["py-3 px-4 font-medium text-sm whitespace-nowrap transition-all duration-200 rounded-lg flex-1 min-w-0",Z(r.id)])},[o("div",Ne,[(i(),g(q(r.icon),{class:m([R(r.id),"w-4 h-4"])},null,8,["class"])),o("span",Ve,v(r.name),1),p(r.id)===100?(i(),c("div",Me)):p(r.id)===null?(i(),c("div",{key:1,class:m(`w-2 h-2 rounded-full ${W(r.id)}`)},null,2)):b("",!0)])],10,Ae))),128))])]),o("div",$e,[o("div",Ue,[o("div",{class:m(["shadow rounded-lg overflow-hidden",G(d.value)])},[o("div",Pe,[d.value==="personal"?(i(),g(pe,{key:0,modelValue:n(s).personal,"onUpdate:modelValue":e[2]||(e[2]=r=>n(s).personal=r),errors:n(s).errors,"visa-status-options":f.visaStatusOptions,onUpdate:h},null,8,["modelValue","errors","visa-status-options"])):b("",!0),d.value==="spouse"?(i(),g(ge,{key:1,modelValue:n(s).spouse,"onUpdate:modelValue":e[3]||(e[3]=r=>n(s).spouse=r),errors:n(s).errors,"show-spouse":((a=n(s).personal)==null?void 0:a.maritalStatus)==="married",onUpdate:h},null,8,["modelValue","errors","show-spouse"])):b("",!0),d.value==="employee"?(i(),g(me,{key:2,modelValue:n(s).employee[0],"onUpdate:modelValue":e[4]||(e[4]=r=>n(s).employee[0]=r),errors:n(s).errors,onUpdate:X},null,8,["modelValue","errors"])):b("",!0),d.value==="projects"?(i(),g(be,{key:3,modelValue:n(s).projects,"onUpdate:modelValue":e[5]||(e[5]=r=>n(s).projects=r),errors:n(s).errors,onUpdate:h},null,8,["modelValue","errors"])):b("",!0),d.value==="assets"?(i(),g(he,{key:4,modelValue:n(s).assets,"onUpdate:modelValue":e[6]||(e[6]=r=>n(s).assets=r),errors:n(s).errors,onUpdate:h},null,8,["modelValue","errors"])):b("",!0),d.value==="expenses"?(i(),g(ve,{key:5,modelValue:n(s).expenses,"onUpdate:modelValue":e[7]||(e[7]=r=>n(s).expenses=r),errors:n(s).errors,onUpdate:h},null,8,["modelValue","errors"])):b("",!0)])],2)]),o("div",De,[o("div",Fe,[e[12]||(e[12]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit Progress",-1)),o("div",Ee,[o("div",Be,[e[11]||(e[11]=o("span",{class:"text-sm font-medium text-gray-700"},"Overall Completion",-1)),o("span",Te,v(Math.round(w.value))+"%",1)]),o("div",Oe,[o("div",{class:"bg-gradient-to-r from-blue-500 to-emerald-500 h-2 rounded-full transition-all duration-300",style:L({width:`${w.value}%`})},null,4)])]),o("div",ze,[(i(!0),c(O,null,z(x.value,r=>(i(),c("div",{key:r.id,class:m(["flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all duration-200",H(r.id)]),onClick:u=>d.value=r.id},[o("div",Le,[(i(),g(q(r.icon),{class:m([J(r.id),"w-4 h-4"])},null,8,["class"])),o("span",{class:m(["text-sm font-medium",Q(r.id)])},v(r.name),3)]),o("div",Ke,[o("div",Ye,[o("div",{class:m(["h-2 rounded-full transition-all duration-300",Y(r.id)]),style:L({width:p(r.id)!==null?`${p(r.id)}%`:"100%"})},null,6)]),p(r.id)===null?(i(),c("div",{key:0,class:m(`w-2 h-2 rounded-full ${_(r.id)}`)},null,2)):p(r.id)===100?(i(),c("div",Ze)):p(r.id)>0?(i(),c("div",Ge)):(i(),c("div",He))])],10,qe))),128))]),o("div",Je,[o("button",{onClick:I,disabled:n(s).processing,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},v(n(s).processing?"Updating Client...":"Update Client"),9,Qe),o("button",{onClick:ee,class:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700"}," Cancel ")])])])])])]}),_:1}))}};export{it as default};

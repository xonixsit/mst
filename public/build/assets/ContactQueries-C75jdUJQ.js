import{r as u,q as f,e as D,w,a as e,c as d,g as _,t as a,k as N,v as P,o as i,F as k,h as C,p as j,f as g}from"./app-EeG-Zs5J.js";import{A as T}from"./AppLayout-D86A2DtM.js";import"./ConsentBanner-s4iJqeMX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"max-w-7xl mx-auto space-y-6"},V={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},$={class:"bg-white rounded-lg shadow p-6"},F={class:"text-3xl font-bold text-gray-900 mt-2"},E={class:"bg-white rounded-lg shadow"},R={class:"px-6 py-4 border-b border-gray-200"},z={class:"flex justify-between items-center"},H={class:"flex gap-2"},U={class:"overflow-x-auto"},X={class:"w-full"},q={class:"divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},J={class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},O={class:"px-6 py-4 whitespace-nowrap text-sm space-x-2"},W=["onClick"],Y={key:0,class:"px-6 py-4 border-t border-gray-200 flex items-center justify-between"},Z={class:"text-sm text-gray-600"},ee={class:"font-medium"},te={class:"font-medium"},se={class:"font-medium"},oe={class:"flex gap-2"},ae=["disabled"],le={class:"flex gap-1"},re=["onClick"],ie=["disabled"],ne={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"query-modal-title"},de={class:"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] flex flex-col"},ue={class:"inset-0 bg-gradient-to-r from-blue-500 via-blue-500 to-cyan-50 border-b border-gray-200 px-6 py-4 flex justify-between items-center flex-shrink-0"},ce={class:"overflow-y-auto flex-1 px-6 py-6 space-y-6"},xe={class:"space-y-4"},me={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},pe={class:"text-sm text-gray-900"},ge={class:"text-sm text-gray-900 break-all"},be={class:"text-sm text-gray-900"},ve={class:"text-sm text-gray-900"},ye={class:"border-t border-gray-200 pt-6 space-y-4"},fe={class:"text-sm font-medium text-gray-900"},he={class:"bg-gray-50 rounded-md p-4 border border-gray-200 max-h-48 overflow-y-auto"},we={class:"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed"},c=10,Le={__name:"ContactQueries",props:{queries:{type:Array,default:()=>[]}},setup(M){const b=u(""),n=u(""),l=u(null),r=u(1),v=u(M.queries),x=f(()=>v.value.filter(o=>{let t=!0;b.value==="unread"?t=!o.read:b.value==="replied"?t=o.replied:b.value==="pending"&&(t=!o.replied);const s=!n.value||o.name.toLowerCase().includes(n.value.toLowerCase())||o.email.toLowerCase().includes(n.value.toLowerCase())||o.subject.toLowerCase().includes(n.value.toLowerCase());return t&&s})),L=f(()=>{const o=(r.value-1)*c,t=o+c;return x.value.slice(o,t)}),m=f(()=>Math.ceil(x.value.length/c)),y=o=>{r.value=Math.max(1,Math.min(o,m.value))},S=o=>{l.value=o,Q(o.id)},Q=async o=>{var t;try{if((await fetch(`/admin/contact-queries/${o}/read`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content}})).ok){const p=v.value.find(A=>A.id===o);p&&(p.read=!0)}}catch(s){console.error("Error marking as read:",s)}},h=o=>new Date(o).toLocaleDateString();return(o,t)=>(i(),D(T,null,{header:w(()=>[...t[4]||(t[4]=[e("div",{class:"relative overflow-hidden"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-blue-50 to-cyan-50"}),e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-blue-100/40 to-transparent rounded-bl-full"}),e("div",{class:"px-10 relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},[e("div",{class:"flex items-center space-x-4"},[e("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-500 via-blue-600 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-blue-100"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])]),e("div",null,[e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent"}," Contact Queries "),e("p",{class:"mt-2 text-sm text-gray-600 font-medium"},"Manage incoming contact form submissions")])])])],-1)])]),default:w(()=>[e("div",B,[e("div",V,[e("div",$,[t[5]||(t[5]=e("p",{class:"text-gray-600 text-sm font-medium"},"Total Queries",-1)),e("p",F,a(v.value.length),1)])]),e("div",E,[e("div",R,[e("div",z,[t[6]||(t[6]=e("h2",{class:"text-lg font-medium text-gray-900"},"All Queries",-1)),e("div",H,[N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),type:"text",placeholder:"Search queries...",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm"},null,512),[[P,n.value]])])])]),e("div",U,[e("table",X,[t[8]||(t[8]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Subject"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Actions")])],-1)),e("tbody",q,[(i(!0),d(k,null,C(L.value,s=>(i(),d("tr",{key:s.id,class:j(["hover:bg-gray-50",s.read?"":"bg-blue-50"])},[e("td",G,a(s.name),1),e("td",I,a(s.email),1),e("td",J,a(s.subject),1),e("td",K,a(h(s.created_at)),1),e("td",O,[e("button",{onClick:p=>S(s),class:"text-blue-600 hover:text-blue-800 font-medium"},"View",8,W),t[7]||(t[7]=e("button",{class:"text-red-600 hover:text-red-800 font-medium"},"Delete",-1))])],2))),128))])])]),m.value>1?(i(),d("div",Y,[e("div",Z,[t[9]||(t[9]=g(" Showing ",-1)),e("span",ee,a((r.value-1)*c+1),1),t[10]||(t[10]=g(" to ",-1)),e("span",te,a(Math.min(r.value*c,x.value.length)),1),t[11]||(t[11]=g(" of ",-1)),e("span",se,a(x.value.length),1),t[12]||(t[12]=g(" queries ",-1))]),e("div",oe,[e("button",{onClick:t[1]||(t[1]=s=>y(r.value-1)),disabled:r.value===1,class:"px-3 py-2 border border-gray-300 rounded text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Previous ",8,ae),e("div",le,[(i(!0),d(k,null,C(m.value,s=>(i(),d("button",{key:s,onClick:p=>y(s),class:j(["px-3 py-2 rounded text-sm font-medium transition-colors",r.value===s?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"])},a(s),11,re))),128))]),e("button",{onClick:t[2]||(t[2]=s=>y(r.value+1)),disabled:r.value===m.value,class:"px-3 py-2 border border-gray-300 rounded text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next ",8,ie)])])):_("",!0)]),l.value?(i(),d("div",ne,[e("div",de,[e("div",ue,[t[14]||(t[14]=e("div",{class:""},[e("h2",{id:"query-modal-title",class:"text-lg font-semibold text-white-900"},"Contact Query"),e("p",{class:"text-sm text-gray-500 mt-1"},"Review and respond to customer inquiry")],-1)),e("button",{onClick:t[3]||(t[3]=s=>l.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close modal"},[...t[13]||(t[13]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ce,[e("section",xe,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-gray-900"},"From",-1)),e("div",me,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Full Name",-1)),e("p",pe,a(l.value.name),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Email Address",-1)),e("p",ge,a(l.value.email),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Phone Number",-1)),e("p",be,a(l.value.phone||"Not provided"),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Date Received",-1)),e("p",ve,a(h(l.value.created_at)),1)])])]),e("section",ye,[t[22]||(t[22]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Message",-1)),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-xs font-medium text-gray-600 mb-2"},"Subject",-1)),e("p",fe,a(l.value.subject),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-xs font-medium text-gray-600 mb-2"},"Message Content",-1)),e("div",he,[e("p",we,a(l.value.message),1)])])])])])])):_("",!0)])]),_:1}))}};export{Le as default};

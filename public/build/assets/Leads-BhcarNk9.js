import{r as p,q as _,e as E,w as N,a as e,c as n,g as b,t as a,k as T,v as U,p as x,o as r,F as C,h as L,f as w,l as q}from"./app-EeG-Zs5J.js";import{A as z}from"./AppLayout-D86A2DtM.js";import"./ConsentBanner-s4iJqeMX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"max-w-7xl mx-auto space-y-6"},I={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},J={class:"bg-white rounded-lg shadow p-6"},O={class:"text-3xl font-bold text-gray-900 mt-2"},X={class:"bg-white rounded-lg shadow p-6"},Q={class:"text-3xl font-bold text-blue-600 mt-2"},G={class:"bg-white rounded-lg shadow p-6"},K={class:"text-3xl font-bold text-indigo-600 mt-2"},W={class:"bg-white rounded-lg shadow p-6"},Y={class:"text-3xl font-bold text-green-600 mt-2"},Z={class:"bg-white rounded-lg shadow"},ee={class:"px-6 py-4 border-b border-gray-200 space-y-3"},te={class:"flex justify-between items-center"},se={class:"flex gap-2 flex-wrap"},oe={class:"overflow-x-auto"},ae={class:"w-full"},le={class:"divide-y divide-gray-200"},re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},ie={class:"px-6 py-4 whitespace-nowrap"},ue=["value","onChange"],xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},ge={class:"px-6 py-4 whitespace-nowrap text-sm space-x-2"},ce=["onClick"],pe={key:0,class:"px-6 py-4 border-t border-gray-200 flex items-center justify-between"},be={class:"text-sm text-gray-600"},me={class:"font-medium"},ve={class:"font-medium"},ye={class:"font-medium"},fe={class:"flex gap-2"},he=["disabled"],we={class:"flex gap-1"},ke=["onClick"],_e=["disabled"],Ce={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"lead-modal-title"},Le={class:"bg-white rounded-lg shadow-lg max-w-2xl w-full flex flex-col max-h-[90vh]"},Se={class:"inset-0 bg-gradient-to-r from-blue-500 via-blue-500 to-cyan-50 border-b border-gray-200 px-6 py-4 flex justify-between items-center flex-shrink-0"},je={class:"overflow-y-auto flex-1 px-6 py-4 space-y-4"},Ae={class:"space-y-2"},Pe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},$e={class:"text-sm text-gray-900"},Ne={class:"text-sm text-gray-900 break-all"},Te={class:"text-sm text-gray-900"},Me={class:"text-sm text-gray-900"},De={class:"border-t border-gray-200 pt-3 space-y-2"},Ve={key:0,class:"border-t border-gray-200 pt-3 space-y-2"},Be={key:0},Fe={class:"text-sm text-gray-900"},Re={key:1},Ee={class:"bg-gray-50 rounded p-2 border border-gray-200 max-h-40 overflow-y-auto"},Ue={class:"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed"},qe={key:1,class:"border-t border-gray-200 pt-3 space-y-2"},ze={key:0,class:"bg-blue-50 border border-blue-200 rounded p-2 mb-2"},He={class:"text-xs text-blue-800 mt-0.5"},Ie=["value"],Je={class:"border-t border-gray-200 px-6 py-3 flex-shrink-0 bg-white flex gap-2 justify-end"},Oe=["disabled"],v=10,We={__name:"Leads",props:{leads:{type:Array,default:()=>[]},taxProfessionals:{type:Array,default:()=>[]}},setup(S){const d=p(""),m=p(""),o=p(null),u=p(1),j=S,g=p(j.leads),M=p(!0),c=p(null),y=_(()=>g.value.filter(l=>{const t=!d.value||l.status===d.value,s=!m.value||l.name.toLowerCase().includes(m.value.toLowerCase())||l.email.toLowerCase().includes(m.value.toLowerCase());return t&&s})),D=_(()=>{const l=(u.value-1)*v,t=l+v;return y.value.slice(l,t)}),f=_(()=>Math.ceil(y.value.length/v)),k=l=>{u.value=Math.max(1,Math.min(l,f.value))},V=async(l,t)=>{var s;try{const i=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content,h=await fetch(`/admin/leads/${l}/status`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":i},body:JSON.stringify({status:t})}),P=await h.json();if(h.ok&&P.success){const $=g.value.find(R=>R.id===l);$&&($.status=t)}else console.error("Failed to update lead status:",P.message)}catch(i){console.error("Error updating lead status:",i)}},A=l=>new Date(l).toLocaleDateString(),B=async()=>{var l;if(!(!c.value||!o.value))try{const t=await fetch(`/admin/leads/${o.value.id}/assign`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.content},body:JSON.stringify({assigned_to:c.value})}),s=await t.json();if(t.ok&&s.success){const i=g.value.find(h=>h.id===o.value.id);i&&(i.assigned_to=c.value,o.value.assigned_to=c.value),o.value=null}}catch(t){console.error("Error assigning lead:",t)}},F=l=>{const t=j.taxProfessionals.find(s=>s.id===l);return t?`${t.first_name} ${t.last_name}`:"Unassigned"};return(l,t)=>(r(),E(z,null,{header:N(()=>[...t[11]||(t[11]=[e("div",{class:"relative overflow-hidden"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-blue-50 to-cyan-50"}),e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-blue-100/40 to-transparent rounded-bl-full"}),e("div",{class:"px-10 relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},[e("div",{class:"flex items-center space-x-4"},[e("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-500 via-blue-600 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-blue-100"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),e("div",null,[e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent"}," Leads Management "),e("p",{class:"mt-2 text-sm text-gray-600 font-medium"},"Track and manage prospective clients")])])])],-1)])]),default:N(()=>[e("div",H,[e("div",I,[e("div",J,[t[12]||(t[12]=e("p",{class:"text-gray-600 text-sm font-medium"},"Total Leads",-1)),e("p",O,a(g.value.length),1)]),e("div",X,[t[13]||(t[13]=e("p",{class:"text-gray-600 text-sm font-medium"},"New",-1)),e("p",Q,a(g.value.filter(s=>s.status==="new").length),1)]),e("div",G,[t[14]||(t[14]=e("p",{class:"text-gray-600 text-sm font-medium"},"Contacted",-1)),e("p",K,a(g.value.filter(s=>s.status==="contacted").length),1)]),e("div",W,[t[15]||(t[15]=e("p",{class:"text-gray-600 text-sm font-medium"},"Converted",-1)),e("p",Y,a(g.value.filter(s=>s.status==="converted").length),1)])]),e("div",Z,[e("div",ee,[e("div",te,[t[16]||(t[16]=e("h2",{class:"text-lg font-medium text-gray-900"},"All Leads",-1)),T(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"Search leads...",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm w-64"},null,512),[[U,m.value]])]),e("div",se,[e("button",{onClick:t[1]||(t[1]=s=>d.value=""),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value===""?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," All Status ",2),e("button",{onClick:t[2]||(t[2]=s=>d.value="new"),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value==="new"?"bg-blue-100 text-blue-800 border-2 border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," New ",2),e("button",{onClick:t[3]||(t[3]=s=>d.value="contacted"),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value==="contacted"?"bg-indigo-100 text-indigo-800 border-2 border-indigo-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Contacted ",2),e("button",{onClick:t[4]||(t[4]=s=>d.value="converted"),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value==="converted"?"bg-green-100 text-green-800 border-2 border-green-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Converted ",2),e("button",{onClick:t[5]||(t[5]=s=>d.value="rejected"),class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",d.value==="rejected"?"bg-red-100 text-red-800 border-2 border-red-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Rejected ",2)])]),e("div",oe,[e("table",ae,[t[19]||(t[19]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Phone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Actions")])],-1)),e("tbody",le,[(r(!0),n(C,null,L(D.value,s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",re,a(s.name),1),e("td",ne,a(s.email),1),e("td",de,a(s.phone),1),e("td",ie,[e("select",{value:s.status,onChange:i=>V(s.id,i.target.value),class:x(["px-3 py-1 rounded-full text-xs font-medium",s.status==="new"?"bg-blue-100 text-blue-800":s.status==="contacted"?"bg-indigo-100 text-indigo-800":s.status==="converted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[...t[17]||(t[17]=[e("option",{value:"new"},"New",-1),e("option",{value:"contacted"},"Contacted",-1),e("option",{value:"converted"},"Converted",-1),e("option",{value:"rejected"},"Rejected",-1)])],42,ue)]),e("td",xe,a(A(s.created_at)),1),e("td",ge,[e("button",{onClick:i=>o.value=s,class:"text-blue-600 hover:text-blue-800 font-medium"},"View",8,ce),t[18]||(t[18]=e("button",{class:"text-red-600 hover:text-red-800 font-medium"},"Delete",-1))])]))),128))])])]),f.value>1?(r(),n("div",pe,[e("div",be,[t[20]||(t[20]=w(" Showing ",-1)),e("span",me,a((u.value-1)*v+1),1),t[21]||(t[21]=w(" to ",-1)),e("span",ve,a(Math.min(u.value*v,y.value.length)),1),t[22]||(t[22]=w(" of ",-1)),e("span",ye,a(y.value.length),1),t[23]||(t[23]=w(" leads ",-1))]),e("div",fe,[e("button",{onClick:t[6]||(t[6]=s=>k(u.value-1)),disabled:u.value===1,class:"px-3 py-2 border border-gray-300 rounded text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Previous ",8,he),e("div",we,[(r(!0),n(C,null,L(f.value,s=>(r(),n("button",{key:s,onClick:i=>k(s),class:x(["px-3 py-2 rounded text-sm font-medium transition-colors",u.value===s?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"])},a(s),11,ke))),128))]),e("button",{onClick:t[7]||(t[7]=s=>k(u.value+1)),disabled:u.value===f.value,class:"px-3 py-2 border border-gray-300 rounded text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next ",8,_e)])])):b("",!0)])]),o.value?(r(),n("div",Ce,[e("div",Le,[e("div",Se,[t[25]||(t[25]=e("div",null,[e("h2",{id:"lead-modal-title",class:"text-lg font-semibold text-gray-900"},"Lead Information"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Review and manage lead details")],-1)),e("button",{onClick:t[8]||(t[8]=s=>o.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors p-1 flex-shrink-0","aria-label":"Close modal"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",je,[e("section",Ae,[t[30]||(t[30]=e("h3",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wide"},"Contact Information",-1)),e("div",Pe,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-xs font-medium text-gray-600"},"Full Name",-1)),e("p",$e,a(o.value.name),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-xs font-medium text-gray-600"},"Email Address",-1)),e("p",Ne,a(o.value.email),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-xs font-medium text-gray-600"},"Phone Number",-1)),e("p",Te,a(o.value.phone||"Not provided"),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-xs font-medium text-gray-600"},"Date Received",-1)),e("p",Me,a(A(o.value.created_at)),1)])])]),e("section",De,[t[31]||(t[31]=e("h3",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wide"},"Status",-1)),e("span",{class:x(["inline-block px-2 py-1 rounded text-xs font-medium",o.value.status==="new"?"bg-blue-50 text-blue-700 border border-blue-200":o.value.status==="contacted"?"bg-indigo-50 text-indigo-700 border border-indigo-200":o.value.status==="converted"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"])},a(o.value.status.charAt(0).toUpperCase()+o.value.status.slice(1)),3)]),o.value.source||o.value.notes?(r(),n("section",Ve,[t[34]||(t[34]=e("h3",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wide"},"Additional Details",-1)),o.value.source?(r(),n("div",Be,[t[32]||(t[32]=e("label",{class:"block text-xs font-medium text-gray-600"},"Lead Source",-1)),e("p",Fe,a(o.value.source),1)])):b("",!0),o.value.notes?(r(),n("div",Re,[t[33]||(t[33]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Notes",-1)),e("div",Ee,[e("p",Ue,a(o.value.notes),1)])])):b("",!0)])):b("",!0),M.value?(r(),n("section",qe,[t[38]||(t[38]=e("h3",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wide"},"Assignment",-1)),o.value.assigned_to?(r(),n("div",ze,[t[35]||(t[35]=e("p",{class:"text-xs font-medium text-blue-900"},"Currently Assigned To",-1)),e("p",He,a(F(o.value.assigned_to)),1)])):b("",!0),e("div",null,[t[37]||(t[37]=e("label",{for:"professional-select",class:"block text-xs font-medium text-gray-600 mb-1"},"Assign to Tax Professional",-1)),T(e("select",{id:"professional-select","onUpdate:modelValue":t[9]||(t[9]=s=>c.value=s),class:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[36]||(t[36]=e("option",{value:null},"Select a professional...",-1)),(r(!0),n(C,null,L(S.taxProfessionals,s=>(r(),n("option",{key:s.id,value:s.id},a(s.first_name)+" "+a(s.last_name),9,Ie))),128))],512),[[q,c.value]])])])):b("",!0)]),e("div",Je,[e("button",{onClick:t[10]||(t[10]=s=>o.value=null),class:"px-3 py-2.5 border border-gray-300 text-gray-700 rounded text-sm font-medium hover:bg-gray-50 transition-colors"}," Close "),e("button",{onClick:B,disabled:!c.value,class:"px-3 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white rounded text-sm font-medium transition-colors"}," Assign ",8,Oe)])])])):b("",!0)]),_:1}))}};export{We as default};

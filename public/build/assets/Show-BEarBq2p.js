import{T as p,b as E,w as f,a as t,t as r,u as s,c as d,f as u,o as n,F as V,r as F,g as H,h as c,p as g,v as I,j as y,d as q,i as G}from"./app-BjP-tNJO.js";import{A as J}from"./AppLayout-BPOsg_Yk.js";const K={class:"relative overflow-hidden"},Q={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},W={class:"flex items-center space-x-4"},X={class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-cyan-900 bg-clip-text text-transparent"},Y={class:"mt-2 text-sm text-gray-600 font-medium"},Z={class:"flex items-center space-x-4 mt-3"},tt={class:"flex items-center space-x-2"},et={class:"flex items-center space-x-2"},st={class:"flex items-center"},ot={class:"py-6"},rt={class:"max-w-6xl mx-auto sm:px-6 lg:px-4"},at={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},it={class:"lg:col-span-2 space-y-6"},lt={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},nt={class:"bg-gradient-to-r from-slate-50 to-gray-50 px-8 py-6 border-b border-gray-200"},dt={class:"grid grid-cols-3 gap-4 text-sm"},gt={class:"font-mono text-gray-900 font-semibold"},pt={class:"text-gray-900 capitalize font-semibold"},ut={class:"text-gray-900 font-semibold"},ct={class:"p-8"},bt={key:0,class:"grid grid-cols-1 gap-6 mb-8"},mt={class:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6 border border-green-200"},xt={class:"text-lg font-bold text-green-900 mt-2"},ft={class:"border-t border-gray-200 pt-8"},yt={class:"text-gray-700 whitespace-pre-wrap leading-relaxed"},vt={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},ht={class:"p-8"},_t={class:"space-y-4 mb-6 max-h-96 overflow-y-auto"},wt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center flex-shrink-0"},kt={class:"text-white font-bold text-sm"},St={class:"flex-1"},Ct={class:"flex items-center gap-2 mb-2"},At={class:"font-semibold text-gray-900"},Ut={key:0,class:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-semibold rounded"},jt={class:"text-xs text-gray-500"},Bt={class:"text-gray-700 whitespace-pre-wrap leading-relaxed"},Dt={key:0,class:"text-red-600 text-sm mt-2"},Mt=["disabled"],Tt={class:"space-y-6"},Vt={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},Ft={class:"p-6 space-y-4"},Pt=["value"],zt={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},Lt={class:"p-6"},Nt={class:"flex items-center gap-3"},Rt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center"},$t={class:"text-white font-bold text-sm"},Ot={class:"font-semibold text-gray-900"},Et={class:"text-xs text-gray-600"},Gt={__name:"Show",props:{ticket:Object,taxProfessionals:Array},setup(v){var _;const o=v.ticket,b=p({status:o.status}),m=p({priority:o.priority}),x=p({assigned_to:((_=o.assigned_to)==null?void 0:_.id)||""}),l=p({message:""}),P=i=>i.replace("_"," ").charAt(0).toUpperCase()+i.slice(1).replace("_"," "),z=i=>i.charAt(0).toUpperCase()+i.slice(1),h=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=i=>i.role==="admin"||i.role==="tax_professional",N=()=>{b.patch(`/admin/support-tickets/${o.id}/status`)},R=()=>{m.patch(`/admin/support-tickets/${o.id}/priority`)},$=()=>{x.patch(`/admin/support-tickets/${o.id}/assign`)},O=()=>{l.post(`/admin/support-tickets/${o.id}/reply`,{onSuccess:()=>{l.reset(),window.location.reload()}})};return(i,e)=>(n(),E(J,{title:"Support Ticket Details"},{header:f(()=>[t("div",K,[e[6]||(e[6]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-blue-50 to-cyan-50"},null,-1)),e[7]||(e[7]=t("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-blue-100/40 to-transparent rounded-bl-full"},null,-1)),e[8]||(e[8]=t("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-cyan-100/30 to-transparent rounded-tr-full"},null,-1)),t("div",Q,[t("div",W,[e[4]||(e[4]=t("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-500 via-blue-600 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-blue-100"},[t("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t("div",null,[t("h1",X,r(s(o).ticket_number),1),t("p",Y,r(s(o).subject),1),t("div",Z,[t("div",tt,[t("div",{class:g(["w-2 h-2 rounded-full",s(o).status==="open"?"bg-yellow-400":s(o).status==="in_progress"?"bg-purple-400":s(o).status==="resolved"?"bg-green-400":"bg-slate-400"])},null,2),t("span",{class:g(["text-xs font-semibold",s(o).status==="open"?"text-yellow-700":s(o).status==="in_progress"?"text-purple-700":s(o).status==="resolved"?"text-green-700":"text-slate-700"])},r(P(s(o).status)),3)]),t("div",et,[t("div",{class:g(["w-2 h-2 rounded-full",s(o).priority==="urgent"?"bg-red-400":s(o).priority==="high"?"bg-orange-400":s(o).priority==="medium"?"bg-yellow-400":"bg-blue-400"])},null,2),t("span",{class:g(["text-xs font-semibold",s(o).priority==="urgent"?"text-red-700":s(o).priority==="high"?"text-orange-700":s(o).priority==="medium"?"text-yellow-700":"text-blue-700"])},r(z(s(o).priority)),3)])])])]),t("div",st,[q(s(G),{href:"/admin/support-tickets",class:"bg-gradient-to-r from-slate-500 to-gray-600 hover:from-slate-600 hover:to-gray-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group"},{default:f(()=>[...e[5]||(e[5]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),t("span",{class:"font-semibold"},"Back to Tickets",-1)])]),_:1})])])])]),default:f(()=>{var w,k,S,C,A,U,j;return[t("div",ot,[t("div",rt,[t("div",at,[t("div",it,[t("div",lt,[t("div",nt,[e[12]||(e[12]=t("div",{class:"mb-6"},[t("h3",{class:"text-xl font-bold text-gray-900"},"Ticket Details"),t("p",{class:"text-sm text-gray-600 mt-1"},"Complete ticket information and status")],-1)),t("div",dt,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-1"},"Ticket Number",-1)),t("p",gt,r(s(o).ticket_number),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-1"},"Category",-1)),t("p",pt,r(s(o).category),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-1"},"Created By",-1)),t("p",ut,r((w=s(o).user)==null?void 0:w.first_name)+" "+r((k=s(o).user)==null?void 0:k.last_name),1)])])]),t("div",ct,[s(o).resolved_at?(n(),d("div",bt,[t("div",mt,[e[13]||(e[13]=t("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Resolved",-1)),t("p",xt,r(h(s(o).resolved_at)),1)])])):u("",!0),t("div",ft,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Description",-1)),t("p",yt,r(s(o).description),1)])])]),t("div",vt,[e[15]||(e[15]=t("div",{class:"bg-gradient-to-r from-slate-50 to-gray-50 px-8 py-6 border-b border-gray-200"},[t("h3",{class:"text-xl font-bold text-gray-900"},"Conversation")],-1)),t("div",ht,[t("div",_t,[(n(!0),d(V,null,F(s(o).replies,a=>{var B,D,M,T;return n(),d("div",{key:a.id,class:"flex gap-4 pb-4 border-b border-gray-200 last:border-b-0"},[t("div",wt,[t("span",kt,r(((D=(B=a.user)==null?void 0:B.first_name)==null?void 0:D.charAt(0))||"U"),1)]),t("div",St,[t("div",Ct,[t("p",At,r((M=a.user)==null?void 0:M.first_name)+" "+r((T=a.user)==null?void 0:T.last_name),1),L(a.user)?(n(),d("span",Ut,"Staff")):u("",!0),t("span",jt,r(h(a.created_at)),1)]),t("p",Bt,r(a.message),1)])])}),128))]),t("form",{onSubmit:H(O,["prevent"]),class:"border-t border-gray-200 pt-6"},[c(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>s(l).message=a),placeholder:"Add a reply...",rows:"4",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white resize-none",{"border-red-500 bg-red-50":s(l).errors.message}])},null,2),[[I,s(l).message]]),s(l).errors.message?(n(),d("p",Dt,r(s(l).errors.message),1)):u("",!0),t("button",{type:"submit",disabled:s(l).processing,class:"mt-4 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-semibold"},r(s(l).processing?"Sending...":"Send Reply"),9,Mt)],32)])])]),t("div",Tt,[t("div",Vt,[e[22]||(e[22]=t("div",{class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-4 border-b border-gray-200"},[t("h4",{class:"font-semibold text-gray-900"},"Update Status")],-1)),t("div",Ft,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Status",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>s(b).status=a),onChange:N,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[16]||(e[16]=[t("option",{value:"open"},"Open",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"resolved"},"Resolved",-1),t("option",{value:"closed"},"Closed",-1)])],544),[[y,s(b).status]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Priority",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s(m).priority=a),onChange:R,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[18]||(e[18]=[t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1),t("option",{value:"urgent"},"Urgent",-1)])],544),[[y,s(m).priority]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Assign To",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s(x).assigned_to=a),onChange:$,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[20]||(e[20]=t("option",{value:""},"Unassigned",-1)),(n(!0),d(V,null,F(v.taxProfessionals,a=>(n(),d("option",{key:a.id,value:a.id},r(a.first_name)+" "+r(a.last_name),9,Pt))),128))],544),[[y,s(x).assigned_to]])])])]),s(o).assigned_to?(n(),d("div",zt,[e[23]||(e[23]=t("div",{class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-4 border-b border-gray-200"},[t("h4",{class:"font-semibold text-gray-900"},"Assigned To")],-1)),t("div",Lt,[t("div",Nt,[t("div",Rt,[t("span",$t,r(((C=(S=s(o).assigned_to)==null?void 0:S.first_name)==null?void 0:C.charAt(0))||"A"),1)]),t("div",null,[t("p",Ot,r((A=s(o).assigned_to)==null?void 0:A.first_name)+" "+r((U=s(o).assigned_to)==null?void 0:U.last_name),1),t("p",Et,r((j=s(o).assigned_to)==null?void 0:j.email),1)])])])])):u("",!0)])])])])]}),_:1}))}};export{Gt as default};

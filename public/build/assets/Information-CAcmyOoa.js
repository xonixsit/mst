import{l as C,c as i,f as p,a as e,d as S,u as n,t as g,F as P,r as O,e as R,p as y,o as l,T as J,q as H,A as xe,s as Q,b as k,w as W,x as ee,n as te,g as ye,h as Y,y as he,j as we,v as _e,i as ke}from"./app-BjP-tNJO.js";import{_ as Se,A as $e}from"./AppLayout-BPOsg_Yk.js";import{r as Ce,a as De,P as je,S as Ae,E as Ee,b as Me,A as Ne,c as Te,d as Re}from"./ExpensesManagementSection-BVk4Q0B4.js";import{r as K}from"./ExclamationTriangleIcon-Cxdr7c5T.js";import{r as Ue}from"./ChevronDownIcon-BFo_cZSm.js";import{r as se}from"./XMarkIcon-IK6_gwdl.js";import{r as Ve}from"./UserIcon-CCkUmewC.js";import{r as Pe}from"./ReceiptRefundIcon-BCzUS7OF.js";import{r as Oe}from"./BriefcaseIcon-DJXDL_Db.js";import{r as Fe}from"./CurrencyDollarIcon-Dk_aKgTs.js";import{r as re}from"./CheckCircleIcon-C0uAllXz.js";import"./EyeIcon-DHlLUwOy.js";import"./InformationCircleIcon-9R1njwbc.js";import"./PlusIcon-BkC3myWp.js";import"./TrashIcon-D2-k-r6w.js";const qe={key:0,class:"error-display"},Be={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4"},Ie={class:"flex items-start"},ze={class:"flex-shrink-0"},Le={class:"ml-3 flex-1"},He={class:"text-sm font-medium text-red-800"},We={class:"mt-2 text-sm text-red-700"},Ye={key:0,class:"mt-3"},Ke={class:"mt-1 list-disc list-inside space-y-1"},Ge={class:"font-medium"},Xe={key:1,class:"mt-3"},Ze={class:"mt-1 list-disc list-inside space-y-1"},Je={key:0,class:"mt-4"},Qe={key:0,class:"mt-2 bg-red-100 rounded p-3 text-xs font-mono"},et={class:"space-y-2"},tt={key:0},st={key:1},rt={key:2},ot={key:3},lt={key:1,class:"mt-4 p-3 bg-blue-50 rounded border border-blue-200"},at={class:"text-sm text-blue-800"},nt={class:"bg-blue-100 px-1 py-0.5 rounded text-xs font-mono"},it={class:"mt-2 flex space-x-2"},dt={class:"flex-shrink-0 ml-4"},ut={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4"},ct={class:"flex items-center"},mt={class:"text-sm text-red-700"},pt={__name:"ErrorDisplay",props:{error:{type:[Object,String],default:null},showDetails:{type:Boolean,default:!0}},emits:["close","report"],setup(m,{emit:b}){const d=m,v=b,$=C(!1),D=C(!1),M=()=>{$.value=!$.value},h=f=>f.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()).trim(),o=f=>{try{return new Date(f).toLocaleString()}catch{return f}},N=async()=>{var f;if((f=d.error)!=null&&f.error_id)try{await navigator.clipboard.writeText(d.error.error_id),D.value=!0,setTimeout(()=>{D.value=!1},2e3)}catch(u){console.error("Failed to copy error ID:",u)}},z=()=>{var _,x,F,U,q,B,I;const f={error_id:(_=d.error)==null?void 0:_.error_id,error_code:(x=d.error)==null?void 0:x.code,timestamp:(F=d.error)==null?void 0:F.timestamp,user_agent:navigator.userAgent,url:window.location.href};v("report",f);const u=encodeURIComponent(`Error Report - ${((U=d.error)==null?void 0:U.code)||"Unknown Error"}`),w=encodeURIComponent(`Error ID: ${(q=d.error)==null?void 0:q.error_id}
Error Code: ${(B=d.error)==null?void 0:B.code}
Timestamp: ${(I=d.error)==null?void 0:I.timestamp}
URL: ${window.location.href}

Please describe what you were doing when this error occurred:

`);window.open(`mailto:support@mysupertax.com?subject=${u}&body=${w}`)};return(f,u)=>m.error?(l(),i("div",qe,[m.error.code&&m.error.code.startsWith("ERR_")?(l(),i("div",Be,[e("div",Ie,[e("div",ze,[S(n(K),{class:"h-5 w-5 text-red-400"})]),e("div",Le,[e("h3",He,g(m.error.title||"Error Occurred"),1),e("div",We,[e("p",null,g(m.error.message),1),m.error.validation_errors?(l(),i("div",Ye,[u[2]||(u[2]=e("p",{class:"font-medium"},"Please correct the following:",-1)),e("ul",Ke,[(l(!0),i(P,null,O(m.error.validation_errors,(w,_)=>(l(),i("li",{key:_},[e("span",Ge,g(h(_))+":",1),R(" "+g(Array.isArray(w)?w[0]:w),1)]))),128))])])):p("",!0),m.error.suggestions&&m.error.suggestions.length>0?(l(),i("div",Xe,[u[3]||(u[3]=e("p",{class:"font-medium"},"Suggested actions:",-1)),e("ul",Ze,[(l(!0),i(P,null,O(m.error.suggestions,w=>(l(),i("li",{key:w},g(w),1))),128))])])):p("",!0)]),m.showDetails?(l(),i("div",Je,[e("button",{onClick:M,class:"text-sm text-red-600 hover:text-red-500 font-medium flex items-center"},[e("span",null,g($.value?"Hide":"Show")+" Technical Details",1),S(n(Ue),{class:y(["ml-1 h-4 w-4 transition-transform",$.value?"rotate-180":""])},null,8,["class"])]),$.value?(l(),i("div",Qe,[e("div",et,[m.error.error_id?(l(),i("div",tt,[u[4]||(u[4]=e("span",{class:"font-semibold"},"Error ID:",-1)),R(" "+g(m.error.error_id),1)])):p("",!0),m.error.code?(l(),i("div",st,[u[5]||(u[5]=e("span",{class:"font-semibold"},"Error Code:",-1)),R(" "+g(m.error.code),1)])):p("",!0),m.error.timestamp?(l(),i("div",rt,[u[6]||(u[6]=e("span",{class:"font-semibold"},"Timestamp:",-1)),R(" "+g(o(m.error.timestamp)),1)])):p("",!0),m.error.details&&m.error.details.debug_message?(l(),i("div",ot,[u[7]||(u[7]=e("span",{class:"font-semibold"},"Debug:",-1)),R(" "+g(m.error.details.debug_message),1)])):p("",!0)])])):p("",!0)])):p("",!0),m.error.error_id?(l(),i("div",lt,[e("p",at,[u[8]||(u[8]=e("strong",null,"Need help?",-1)),u[9]||(u[9]=R(" Contact support and provide this error ID: ",-1)),e("code",nt,g(m.error.error_id),1)]),e("div",it,[e("button",{onClick:N,class:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700"},g(D.value?"Copied!":"Copy Error ID"),1),e("button",{onClick:z,class:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700"}," Report Issue ")])])):p("",!0)]),e("div",dt,[e("button",{onClick:u[0]||(u[0]=w=>f.$emit("close")),class:"text-red-400 hover:text-red-600"},[S(n(se),{class:"h-5 w-5"})])])])])):(l(),i("div",ut,[e("div",ct,[S(n(K),{class:"h-5 w-5 text-red-400 mr-3"}),e("p",mt,g(m.error.message||m.error),1),e("button",{onClick:u[1]||(u[1]=w=>f.$emit("close")),class:"ml-auto text-red-400 hover:text-red-600"},[S(n(se),{class:"h-5 w-5"})])])]))])):p("",!0)}},gt=Se(pt,[["__scopeId","data-v-64e97f4b"]]),bt={class:"relative overflow-hidden"},ft={class:"px-10 relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},vt={class:"flex items-center space-x-4"},xt={class:"flex items-center space-x-4 mt-3"},yt={class:"flex items-center space-x-2"},ht={class:"max-w-7xl mx-auto"},wt={class:"flex items-center"},_t={class:"text-sm text-red-700"},kt={class:"bg-white shadow-lg rounded-lg border border-gray-100 overflow-hidden mb-6"},St={class:"overflow-x-auto"},$t={class:"flex space-x-2 min-w-max px-6 py-4","aria-label":"Tabs"},Ct=["onClick"],Dt={key:0,class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},jt={class:"grid grid-cols-1 lg:grid-cols-5 gap-6"},At={class:"lg:col-span-4"},Et={class:"p-6"},Mt={class:"lg:col-span-1"},Nt={class:"bg-white shadow rounded-lg p-6 sticky top-6"},Tt={class:"mb-6"},Rt={class:"flex items-center justify-between mb-2"},Ut={class:"text-sm text-gray-500"},Vt={class:"w-full bg-gray-200 rounded-full h-2"},Pt={class:"space-y-3 mb-6"},Ot=["onClick"],Ft={class:"flex items-center space-x-3"},qt={class:"flex items-center space-x-2"},Bt={class:"w-8 h-2 bg-gray-200 rounded-full"},It={key:1,class:"w-2 h-2 bg-green-500 rounded-full"},zt={key:2,class:"w-2 h-2 bg-amber-500 rounded-full"},Lt={key:3,class:"w-2 h-2 bg-gray-300 rounded-full"},Ht={class:"space-y-3"},Wt=["disabled"],Yt=["disabled"],Kt={key:0,class:"text-xs text-gray-500 mt-1 text-center"},Gt={class:"mt-6 p-4 bg-blue-50 rounded-lg"},Xt={key:0,class:"mb-3 p-2 bg-blue-100 rounded text-xs text-blue-800"},Zt={class:"space-y-2"},Jt={key:0,class:"mt-4 p-4 bg-green-50 rounded-lg"},Qt={class:"flex items-center"},es={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},ts={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ss={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},rs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},os={class:"sm:flex sm:items-start"},ls={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},as={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ns={class:"text-lg leading-6 font-medium text-gray-900"},is={class:"mt-2"},ds={class:"text-sm text-gray-500 mb-4"},us={key:0,class:"text-sm text-gray-700 space-y-2"},cs={key:1,class:"text-sm text-gray-700 space-y-2"},ms={key:2,class:"text-sm text-gray-700 space-y-2"},ps={key:3,class:"text-sm text-gray-700"},gs={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},bs={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},fs={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},vs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},xs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ys={class:"sm:flex sm:items-start"},hs={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},ws={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},_s={class:"mt-4 space-y-4"},ks={class:"space-y-2"},Ss=["value"],$s={class:"ml-2 text-sm text-gray-700"},Cs={key:0,class:"ml-2 text-xs text-blue-600"},Ds={key:1,class:"ml-2 text-xs text-green-600"},js={key:2,class:"ml-2 text-xs text-yellow-600"},As={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Es=["disabled"],Ws={__name:"Information",props:{clientData:{type:Object,default:()=>({})},visaStatusOptions:{type:Array,default:()=>[]}},setup(m){const b=m,d=C("personal"),v=C("idle"),$=C(null),D=C(!1),M=C(!1),h=J({sections:[],message:"",priority:"normal"}),o=J({personal:{firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",maritalStatus:"single",occupation:"",insuranceCovered:!1,streetNo:"",apartmentNo:"",zipCode:"",city:"",state:"",country:"United States",mobileNumber:"",workNumber:"",visaStatus:"",dateOfEntryUs:""},spouse:{firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",occupation:""},employee:[{}],projects:[],assets:[],expenses:[]}),N=H(()=>[{id:"personal",name:"Personal Details",icon:Ve},{id:"spouse",name:"Spouse Details",icon:Pe},{id:"employee",name:"Employment",icon:Oe},{id:"projects",name:"Projects",icon:Ce},{id:"assets",name:"Assets",icon:Fe},{id:"expenses",name:"Expenses",icon:De}]),z=[{id:"personal",name:"Personal Details"},{id:"spouse",name:"Spouse Details"},{id:"employee",name:"Employment"},{id:"projects",name:"Projects"},{id:"assets",name:"Assets"},{id:"expenses",name:"Expenses"}],f=C(null),u=C(!1),w=H(()=>{var r;switch(v.value){case"saving":return"Saving...";case"saved":return"All changes saved";case"error":return((r=f.value)==null?void 0:r.message)||"Save failed - click for details";default:return"Auto-save enabled"}}),_=H(()=>{const r=N.value.map(a=>x(a.id)).filter(a=>a!==null),t=r.reduce((a,c)=>a+c,0);return r.length>0?t/r.length:0}),x=r=>{switch(r){case"personal":return ge();case"spouse":return be();case"employee":return fe();case"projects":return null;case"assets":return null;case"expenses":return null;default:return 0}},F=r=>{const t=x(r);return t===null?U(r):t===100?"bg-green-500":t>0?"bg-amber-500":"bg-gray-300"},U=r=>({personal:"bg-blue-500",spouse:"bg-rose-500",employee:"bg-indigo-500",projects:"bg-purple-500",assets:"bg-emerald-500",expenses:"bg-orange-500"})[r]||"bg-gray-500",q=r=>{var c,s;const t=d.value===r,a={personal:{active:"bg-blue-500 text-white shadow-lg transform scale-105 border-2 border-blue-600",inactive:"bg-blue-100 text-blue-700 hover:bg-blue-200 hover:shadow-md hover:transform hover:scale-102 border border-blue-200"},spouse:{active:"bg-rose-500 text-white shadow-lg transform scale-105 border-2 border-rose-600",inactive:"bg-rose-100 text-rose-700 hover:bg-rose-200 hover:shadow-md hover:transform hover:scale-102 border border-rose-200"},employee:{active:"bg-indigo-500 text-white shadow-lg transform scale-105 border-2 border-indigo-600",inactive:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 hover:shadow-md hover:transform hover:scale-102 border border-indigo-200"},projects:{active:"bg-purple-500 text-white shadow-lg transform scale-105 border-2 border-purple-600",inactive:"bg-purple-100 text-purple-700 hover:bg-purple-200 hover:shadow-md hover:transform hover:scale-102 border border-purple-200"},assets:{active:"bg-emerald-500 text-white shadow-lg transform scale-105 border-2 border-emerald-600",inactive:"bg-emerald-100 text-emerald-700 hover:bg-emerald-200 hover:shadow-md hover:transform hover:scale-102 border border-emerald-200"},expenses:{active:"bg-orange-500 text-white shadow-lg transform scale-105 border-2 border-orange-600",inactive:"bg-orange-100 text-orange-700 hover:bg-orange-200 hover:shadow-md hover:transform hover:scale-102 border border-orange-200"}};return t?(c=a[r])==null?void 0:c.active:(s=a[r])==null?void 0:s.inactive},B=r=>({personal:"bg-gradient-to-br from-blue-50 to-white",spouse:"bg-gradient-to-br from-rose-50 to-white",employee:"bg-gradient-to-br from-indigo-50 to-white",projects:"bg-gradient-to-br from-purple-50 to-white",assets:"bg-gradient-to-br from-emerald-50 to-white",expenses:"bg-gradient-to-br from-orange-50 to-white"})[r]||"bg-white",I=r=>{const t=d.value===r;return{personal:t?"bg-blue-100 border border-blue-200":"bg-gray-50 hover:bg-blue-50",spouse:t?"bg-rose-100 border border-rose-200":"bg-gray-50 hover:bg-rose-50",employee:t?"bg-indigo-100 border border-indigo-200":"bg-gray-50 hover:bg-indigo-50",projects:t?"bg-purple-100 border border-purple-200":"bg-gray-50 hover:bg-purple-50",assets:t?"bg-emerald-100 border border-emerald-200":"bg-gray-50 hover:bg-emerald-50",expenses:t?"bg-orange-100 border border-orange-200":"bg-gray-50 hover:bg-orange-50"}[r]||"bg-gray-50 hover:bg-gray-100"},oe=r=>{const t=d.value===r;return{personal:t?"text-blue-600":"text-gray-500",spouse:t?"text-rose-600":"text-gray-500",employee:t?"text-indigo-600":"text-gray-500",projects:t?"text-purple-600":"text-gray-500",assets:t?"text-emerald-600":"text-gray-500",expenses:t?"text-orange-600":"text-gray-500"}[r]||"text-gray-500"},le=r=>{const t=d.value===r;return{personal:t?"text-blue-900":"text-gray-900",spouse:t?"text-rose-900":"text-gray-900",employee:t?"text-indigo-900":"text-gray-900",projects:t?"text-purple-900":"text-gray-900",assets:t?"text-emerald-900":"text-gray-900",expenses:t?"text-orange-900":"text-gray-900"}[r]||"text-gray-900"},ae=r=>d.value===r?"text-white":{personal:"text-blue-600",spouse:"text-rose-600",employee:"text-indigo-600",projects:"text-purple-600",assets:"text-emerald-600",expenses:"text-orange-600"}[r]||"text-gray-600",ne=r=>d.value===r?{personal:"bg-blue-600",spouse:"bg-rose-600",employee:"bg-indigo-600",projects:"bg-purple-600",assets:"bg-emerald-600",expenses:"bg-orange-600"}[r]||"bg-gray-600":{personal:"bg-blue-100",spouse:"bg-rose-100",employee:"bg-indigo-100",projects:"bg-purple-100",assets:"bg-emerald-100",expenses:"bg-orange-100"}[r]||"bg-gray-100",L=r=>({personal:"Fill in your basic personal information, contact details, and address. All required fields must be completed.",spouse:"Add spouse information if you are married. This is required for joint tax filing.",employee:"Enter your employment details including employer name, position, and salary information.",projects:"Add any tax-related projects or business activities you are involved in.",assets:"List your assets including purchase dates and business usage percentages.",expenses:"Track your deductible expenses by category for tax preparation."})[r]||"",V=()=>{G()},ie=r=>{Array.isArray(o.employee)||(o.employee=[]),o.employee.length===0&&o.employee.push({}),o.employee[0]={...r},G()},G=()=>{$.value&&clearTimeout($.value),$.value=setTimeout(()=>{de()},2e3)},de=async()=>{var r;try{v.value="saving",console.log("form projects",o.assets);const t=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");if(!t){console.error("CSRF token not found"),v.value="error";return}const a=await fetch("/client/information/auto-save",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({personal:(()=>{const s=T(o.personal);return s.date_of_birth&&(s.date_of_birth=j(s.date_of_birth)),s.date_of_entry_us&&(s.date_of_entry_us=j(s.date_of_entry_us)),s})(),spouse:(()=>{const s=T(o.spouse);return s.date_of_birth&&(s.date_of_birth=j(s.date_of_birth)),s})(),employee:Array.isArray(o.employee)?o.employee.map(s=>T(s)):[],projects:o.projects,assets:Array.isArray(o.assets)?o.assets.map((s,A)=>{const E=T(s);if(E.date_of_purchase){const ve=E.date_of_purchase;E.date_of_purchase=j(E.date_of_purchase),console.log(`Asset ${A} date formatting:`,ve,"->",E.date_of_purchase)}return E}):[],expenses:o.expenses})}),c=await a.json();console.log("result",c),a.ok&&c.success?(v.value="saved",setTimeout(()=>{v.value==="saved"&&(v.value="idle")},3e3)):(v.value="error",f.value=c.error||{message:"Unknown error occurred"},console.error("Auto-save failed:",f.value))}catch(t){v.value="error",f.value={message:"Network error - please check your connection",code:"ERR_NETWORK_001",error_id:"NET_"+Date.now()},console.error("Auto-save failed:",t)}},ue=()=>{var t;const r={personal:(()=>{const a=T(o.personal);return a.date_of_birth&&(a.date_of_birth=j(a.date_of_birth)),a.date_of_entry_us&&(a.date_of_entry_us=j(a.date_of_entry_us)),a})(),spouse:(()=>{const a=T(o.spouse);return a.date_of_birth&&(a.date_of_birth=j(a.date_of_birth)),a})(),employee:Array.isArray(o.employee)?o.employee:[],projects:o.projects,assets:Array.isArray(o.assets)?o.assets.map(a=>{const c={...a};return c.date_of_purchase&&(c.date_of_purchase=j(c.date_of_purchase)),c}):[],expenses:o.expenses};console.log("Saving client information:",r),console.log("Personal data being sent:",r.personal),console.log("Expenses data being sent:",r.expenses),console.log("Expenses count:",((t=r.expenses)==null?void 0:t.length)||0),o.transform(()=>r).post("/client/information",{onSuccess:()=>{}})},ce=()=>{window.open("/client/information/export","_blank")},me=()=>{h.transform(r=>({sections:r.sections||[],message:r.message||"",priority:r.priority||"normal"})).post("/client/information/request-review",{onSuccess:()=>{M.value=!1,h.reset()},onError:r=>{console.error("Review request failed:",r)},preserveState:!0,preserveScroll:!0})},X=r=>{const t={};for(const[a,c]of Object.entries(r)){const s=a.replace(/_([a-z])/g,(A,E)=>E.toUpperCase());t[s]=c}return t},j=r=>{if(!r)return null;try{let t;if(typeof r=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(r))return r;t=new Date(r)}else if(r instanceof Date)t=r;else return null;if(isNaN(t.getTime()))return console.warn("Invalid date provided:",r),null;const a=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${a}-${c}-${s}`}catch(t){return console.error("Error formatting date for backend:",t,r),null}},T=r=>{const t={};for(const[a,c]of Object.entries(r)){const s=a.replace(/[A-Z]/g,A=>`_${A.toLowerCase()}`);t[s]=c}return t},Z=()=>{b.clientData&&(b.clientData.personal&&Object.assign(o.personal,X(b.clientData.personal)),b.clientData.spouse&&Object.assign(o.spouse,X(b.clientData.spouse)),b.clientData.employee&&Array.isArray(b.clientData.employee)?o.employee=b.clientData.employee:b.clientData.employee&&(o.employee=[b.clientData.employee]),b.clientData.projects&&(console.log(b.clientData.projects),o.projects=b.clientData.projects),b.clientData.assets&&(console.log(b.clientData.assets),o.assets=b.clientData.assets),b.clientData.expenses&&(o.expenses=b.clientData.expenses))},pe=r=>{console.log("Error reported:",r)};xe(()=>{Z()}),Q(()=>b.clientData,Z,{deep:!0});const ge=()=>{const r=["firstName","lastName","email","phone","ssn","dateOfBirth","maritalStatus","streetNo","zipCode","city","state"];return r.filter(a=>{const c=o.personal[a];return c&&c.toString().trim().length>0}).length/r.length*100},be=()=>{var a;if(((a=o.personal)==null?void 0:a.maritalStatus)!=="married")return 100;const r=["firstName","lastName"];return r.filter(c=>{const s=o.spouse[c];return s&&s.toString().trim().length>0}).length/r.length*100},fe=()=>{if(!o.employee||!Array.isArray(o.employee)||o.employee.length===0)return 0;const r=o.employee[0],t=["employerName","position"];return t.filter(c=>{const s=r[c];return s&&s.toString().trim().length>0}).length/t.length*100};return Q(()=>o.data(),()=>{},{deep:!0}),(r,t)=>(l(),k($e,null,{header:W(()=>[e("div",bt,[t[22]||(t[22]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-emerald-50 to-blue-50"},null,-1)),t[23]||(t[23]=e("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-emerald-100/40 to-transparent rounded-bl-full"},null,-1)),t[24]||(t[24]=e("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-blue-100/30 to-transparent rounded-tr-full"},null,-1)),e("div",ft,[e("div",vt,[t[20]||(t[20]=e("div",{class:"w-14 h-14 bg-gradient-to-br from-emerald-500 via-emerald-600 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-emerald-100"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[t[18]||(t[18]=e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-emerald-900 to-blue-900 bg-clip-text text-transparent"}," My Information ",-1)),t[19]||(t[19]=e("p",{class:"mt-2 text-sm text-gray-600 font-medium"},"Manage your comprehensive tax information and personal details",-1)),e("div",xt,[e("div",yt,[e("div",{class:y(["w-2 h-2 rounded-full",v.value==="saving"?"bg-yellow-400 animate-pulse":v.value==="saved"?"bg-green-400":"bg-gray-300"])},null,2),e("span",{class:y(["text-xs font-semibold",[v.value==="saving"?"text-yellow-700":v.value==="saved"?"text-green-700":"text-gray-500"]])},g(w.value),3)]),t[17]||(t[17]=e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-2 h-2 bg-blue-400 rounded-full"}),e("span",{class:"text-xs font-semibold text-blue-700"},"Secure Form")],-1))])])]),S(n(ke),{href:"/client/dashboard",class:"bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white px-6 py-3 rounded-xl flex items-center transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 group"},{default:W(()=>[...t[21]||(t[21]=[e("svg",{class:"w-5 h-5 mr-2 transition-transform duration-300 group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})],-1),e("span",{class:"font-semibold"},"Back to Dashboard",-1)])]),_:1})])])]),default:W(()=>{var a,c;return[e("div",ht,[f.value&&u.value?(l(),k(gt,{key:0,error:f.value,onClose:t[0]||(t[0]=s=>u.value=!1),onReport:pe},null,8,["error"])):p("",!0),v.value==="error"&&f.value&&!u.value?(l(),i("div",{key:1,onClick:t[1]||(t[1]=s=>u.value=!0),class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 cursor-pointer hover:bg-red-100 transition-colors"},[e("div",wt,[S(n(K),{class:"h-4 w-4 text-red-400 mr-2"}),e("span",_t,g(f.value.message),1),t[25]||(t[25]=e("span",{class:"text-xs text-red-500 ml-2"},"(Click for details)",-1))])])):p("",!0),e("div",kt,[t[26]||(t[26]=e("div",{class:"bg-gradient-to-r from-slate-50 to-gray-50 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Information Sections")],-1)),e("div",St,[e("nav",$t,[(l(!0),i(P,null,O(N.value,s=>(l(),i("button",{key:s.id,onClick:A=>d.value=s.id,class:y(["px-4 py-2 rounded-lg font-medium text-sm transition-all duration-300 border-2 flex items-center space-x-2 whitespace-nowrap hover:shadow-md",q(s.id)])},[e("div",{class:y(["w-5 h-5 rounded flex items-center justify-center transition-all duration-300",ne(s.id)])},[(l(),k(ee(s.icon),{class:y([ae(s.id),"w-4 h-4"])},null,8,["class"]))],2),e("span",null,g(s.name),1),x(s.id)===100?(l(),i("div",Dt)):p("",!0)],10,Ct))),128))])])]),e("div",jt,[e("div",At,[e("div",{class:y(["shadow rounded-lg overflow-hidden",B(d.value)])},[e("div",Et,[d.value==="personal"?(l(),k(je,{key:0,modelValue:n(o).personal,"onUpdate:modelValue":t[2]||(t[2]=s=>n(o).personal=s),errors:n(o).errors,"visa-status-options":m.visaStatusOptions,onUpdate:V},null,8,["modelValue","errors","visa-status-options"])):p("",!0),d.value==="spouse"?(l(),k(Ae,{key:1,modelValue:n(o).spouse,"onUpdate:modelValue":t[3]||(t[3]=s=>n(o).spouse=s),errors:n(o).errors,"show-spouse":((a=n(o).personal)==null?void 0:a.maritalStatus)==="married",onUpdate:V},null,8,["modelValue","errors","show-spouse"])):p("",!0),d.value==="employee"?(l(),k(Ee,{key:2,modelValue:n(o).employee[0],"onUpdate:modelValue":t[4]||(t[4]=s=>n(o).employee[0]=s),errors:n(o).errors,onUpdate:ie},null,8,["modelValue","errors"])):p("",!0),d.value==="projects"?(l(),k(Me,{key:3,modelValue:n(o).projects,"onUpdate:modelValue":t[5]||(t[5]=s=>n(o).projects=s),errors:n(o).errors,onUpdate:V},null,8,["modelValue","errors"])):p("",!0),d.value==="assets"?(l(),k(Ne,{key:4,modelValue:n(o).assets,"onUpdate:modelValue":t[6]||(t[6]=s=>n(o).assets=s),errors:n(o).errors,onUpdate:V},null,8,["modelValue","errors"])):p("",!0),d.value==="expenses"?(l(),k(Te,{key:5,modelValue:n(o).expenses,"onUpdate:modelValue":t[7]||(t[7]=s=>n(o).expenses=s),errors:n(o).errors,onUpdate:V},null,8,["modelValue","errors"])):p("",!0)])],2)]),e("div",Mt,[e("div",Nt,[t[33]||(t[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Progress Summary",-1)),e("div",Tt,[e("div",Rt,[t[27]||(t[27]=e("span",{class:"text-sm font-medium text-gray-700"},"Overall Completion",-1)),e("span",Ut,g(Math.round(_.value))+"%",1)]),e("div",Vt,[e("div",{class:"bg-gradient-to-r from-blue-500 to-emerald-500 h-2 rounded-full transition-all duration-300",style:te({width:`${_.value}%`})},null,4)])]),e("div",Pt,[(l(!0),i(P,null,O(N.value,s=>(l(),i("div",{key:s.id,class:y(["flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all duration-200",I(s.id)]),onClick:A=>d.value=s.id},[e("div",Ft,[(l(),k(ee(s.icon),{class:y([oe(s.id),"w-4 h-4"])},null,8,["class"])),e("span",{class:y(["text-sm font-medium",le(s.id)])},g(s.name),3)]),e("div",qt,[e("div",Bt,[e("div",{class:y(["h-2 rounded-full transition-all duration-300",F(s.id)]),style:te({width:x(s.id)!==null?`${x(s.id)}%`:"100%"})},null,6)]),x(s.id)===null?(l(),i("div",{key:0,class:y(`w-2 h-2 rounded-full ${U(s.id)}`)},null,2)):x(s.id)===100?(l(),i("div",It)):x(s.id)>0?(l(),i("div",zt)):(l(),i("div",Lt))])],10,Ot))),128))]),e("div",Ht,[e("button",{onClick:ue,disabled:n(o).processing,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},g(n(o).processing?"Saving...":"Save Information"),9,Wt),e("button",{onClick:ce,class:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700"}," Export My Data "),e("button",{onClick:t[8]||(t[8]=s=>M.value=!0),disabled:_.value<50,class:y(["w-full py-2 px-4 rounded-md transition-colors",_.value>=50?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])}," Request Review ",10,Yt),_.value<50?(l(),i("p",Kt," Complete at least 50% to request review ")):p("",!0)]),e("div",Gt,[t[29]||(t[29]=e("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Need Help?",-1)),t[30]||(t[30]=e("p",{class:"text-xs text-blue-700 mb-3"}," Complete all sections to ensure accurate tax preparation. Your tax professional will review your information. ",-1)),L(d.value)?(l(),i("div",Xt,g(L(d.value)),1)):p("",!0),e("div",Zt,[e("button",{onClick:t[9]||(t[9]=s=>D.value=!0),class:"block text-xs text-blue-600 hover:text-blue-800 underline"}," View Section Guide "),t[28]||(t[28]=e("button",{class:"block text-xs text-blue-600 hover:text-blue-800 underline"}," Contact Support ",-1))])]),_.value===100?(l(),i("div",Jt,[e("div",Qt,[S(n(re),{class:"w-5 h-5 text-green-500 mr-2"}),t[31]||(t[31]=e("span",{class:"text-sm font-medium text-green-800"},"All sections completed!",-1))]),t[32]||(t[32]=e("p",{class:"text-xs text-green-700 mt-1"}," Your information is ready for review by your tax professional. ",-1))])):p("",!0)])])])]),D.value?(l(),i("div",es,[e("div",ts,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[10]||(t[10]=s=>D.value=!1)}),e("div",ss,[e("div",rs,[e("div",os,[e("div",ls,[S(n(Re),{class:"h-6 w-6 text-blue-600"})]),e("div",as,[e("h3",ns,g((c=N.value.find(s=>s.id===d.value))==null?void 0:c.name)+" Guide ",1),e("div",is,[e("p",ds,g(L(d.value)),1),d.value==="personal"?(l(),i("div",us,[...t[34]||(t[34]=[e("p",null,[e("strong",null,"Required Fields:")],-1),e("ul",{class:"list-disc list-inside space-y-1 text-xs"},[e("li",null,"First Name, Last Name - Your legal name as it appears on tax documents"),e("li",null,"Email & Phone - Primary contact information"),e("li",null,"SSN - Required for tax filing (format: 123-45-6789)"),e("li",null,"Date of Birth - Used for tax credits and verification"),e("li",null,"Address - Your primary residence address")],-1)])])):d.value==="spouse"?(l(),i("div",cs,[...t[35]||(t[35]=[e("p",null,[e("strong",null,"When to Complete:")],-1),e("ul",{class:"list-disc list-inside space-y-1 text-xs"},[e("li",null,'Only required if marital status is "Married"'),e("li",null,"Spouse SSN is optional but recommended for joint filing"),e("li",null,"All information should match spouse's tax documents")],-1)])])):d.value==="employee"?(l(),i("div",ms,[...t[36]||(t[36]=[e("p",null,[e("strong",null,"Employment Information:")],-1),e("ul",{class:"list-disc list-inside space-y-1 text-xs"},[e("li",null,"Enter information for your primary employer"),e("li",null,"Salary information helps with tax planning"),e("li",null,"Benefits information affects tax deductions")],-1)])])):(l(),i("div",ps,[...t[37]||(t[37]=[e("p",null,"Complete this section with accurate information. All fields are optional unless marked as required.",-1)])]))])])])]),e("div",gs,[e("button",{onClick:t[11]||(t[11]=s=>D.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Got it ")])])])])):p("",!0),M.value?(l(),i("div",bs,[e("div",fs,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[12]||(t[12]=s=>M.value=!1)}),e("div",vs,[e("form",{onSubmit:ye(me,["prevent"])},[e("div",xs,[e("div",ys,[e("div",hs,[S(n(re),{class:"h-6 w-6 text-green-600"})]),e("div",ws,[t[42]||(t[42]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Request Professional Review ",-1)),e("div",_s,[e("div",null,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-gray-700 mb-2 block"}," Which sections would you like reviewed? (Optional - leave blank for all sections) ",-1)),e("div",ks,[(l(),i(P,null,O(z,s=>e("label",{key:s.id,class:"flex items-center"},[Y(e("input",{"onUpdate:modelValue":t[13]||(t[13]=A=>n(h).sections=A),value:s.id,type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50"},null,8,Ss),[[he,n(h).sections]]),e("span",$s,g(s.name),1),x(s.id)===null?(l(),i("span",Cs,"(Optional)")):x(s.id)===100?(l(),i("span",Ds,"(Complete)")):x(s.id)>0?(l(),i("span",js,"(In Progress)")):p("",!0)])),64))])]),e("div",null,[t[40]||(t[40]=e("label",{for:"priority",class:"block text-sm font-medium text-gray-700 mb-1"}," Priority Level ",-1)),Y(e("select",{id:"priority","onUpdate:modelValue":t[14]||(t[14]=s=>n(h).priority=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"},[...t[39]||(t[39]=[e("option",{value:"low"},"Low - Review when convenient",-1),e("option",{value:"normal"},"Normal - Standard review",-1),e("option",{value:"high"},"High - Urgent review needed",-1)])],512),[[we,n(h).priority]])]),e("div",null,[t[41]||(t[41]=e("label",{for:"reviewMessage",class:"block text-sm font-medium text-gray-700 mb-1"}," Additional Message (Optional) ",-1)),Y(e("textarea",{id:"reviewMessage","onUpdate:modelValue":t[15]||(t[15]=s=>n(h).message=s),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm",placeholder:"Any specific questions or areas you'd like your tax professional to focus on..."},null,512),[[_e,n(h).message]])])])])])]),e("div",As,[e("button",{type:"submit",disabled:n(h).processing,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},g(n(h).processing?"Sending...":"Send Review Request"),9,Es),e("button",{onClick:t[16]||(t[16]=s=>M.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):p("",!0)]}),_:1}))}};export{Ws as default};

import{T as v,e as w,w as u,a as t,c as d,g,t as o,o as l,F as _,h as C,j as T,k as j,p as x,u as n,v as A,b as D,i as S,f as B}from"./app-AKBEy-eR.js";import{A as z}from"./AppLayout-9FOdOZQi.js";import"./ConsentBanner-CQGtP13c.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"relative overflow-hidden"},N={class:"relative flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0 py-2"},U={class:"flex items-center space-x-4"},I={class:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-cyan-900 to-blue-900 bg-clip-text text-transparent"},V={class:"mt-2 text-sm text-gray-600 font-medium"},L={class:"flex items-center space-x-3 mt-3"},F={class:"space-y-6"},R={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},E={class:"lg:col-span-2 space-y-6"},O={class:"bg-white rounded-lg shadow p-6"},P={class:"grid grid-cols-2 gap-4 mb-6"},$={class:"text-gray-900 font-semibold mt-1"},q={class:"text-gray-900 font-semibold mt-1"},G={key:0},H={class:"text-gray-900 font-semibold mt-1"},J={key:1},K={class:"text-gray-900 font-semibold mt-1"},Q={class:"border-t border-gray-200 pt-6"},W={class:"text-gray-700 whitespace-pre-wrap"},X={class:"bg-white rounded-lg shadow p-6"},Y={class:"space-y-4 mb-6 max-h-96 overflow-y-auto"},Z={class:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center flex-shrink-0"},tt={class:"text-white font-bold text-sm"},et={class:"flex-1"},st={class:"flex items-center gap-2 mb-1"},ot={class:"font-semibold text-gray-900"},it={class:"text-xs text-gray-500"},rt={class:"text-gray-700 whitespace-pre-wrap text-sm"},at={key:0,class:"text-center py-8"},lt={key:0,class:"text-red-600 text-sm mt-1"},nt=["disabled"],dt={class:"space-y-4"},ct={class:"bg-white rounded-lg shadow p-4"},gt={class:"space-y-3 text-sm"},mt={class:"font-mono text-gray-900"},ut={class:"text-gray-900 capitalize"},xt={class:"text-gray-900 capitalize"},bt={class:"text-gray-900 capitalize"},yt={key:0,class:"bg-white rounded-lg shadow p-4"},ft={class:"flex items-center gap-3"},pt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center"},kt={class:"text-white font-bold text-sm"},ht={class:"font-semibold text-gray-900"},vt={class:"text-xs text-gray-600"},jt={__name:"Show",props:{ticket:Object},setup(s){const c=s,b={open:"bg-blue-100 text-blue-800",in_progress:"bg-amber-100 text-amber-800",resolved:"bg-emerald-100 text-emerald-800",closed:"bg-gray-100 text-gray-800"},y={low:"bg-emerald-100 text-emerald-800",medium:"bg-amber-100 text-amber-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"},a=v({message:""}),f=i=>i.replace("_"," ").charAt(0).toUpperCase()+i.slice(1).replace("_"," "),p=i=>i.charAt(0).toUpperCase()+i.slice(1),k=i=>i.charAt(0).toUpperCase()+i.slice(1),m=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=()=>{var e,r;console.log("Ticket object:",c.ticket),console.log("Ticket ID:",(e=c.ticket)==null?void 0:e.id),console.log("All ticket keys:",Object.keys(c.ticket||{}));const i=(r=c.ticket)==null?void 0:r.id;if(!i){console.error("Ticket ID is missing:",c.ticket),alert("Error: Unable to submit reply. Ticket ID not found.");return}a.post(`/client/support-tickets/${i}/reply`,{onSuccess:()=>{a.reset(),window.location.reload()}})};return(i,e)=>(l(),w(z,null,{header:u(()=>[t("div",M,[e[3]||(e[3]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-50 via-cyan-50 to-blue-50"},null,-1)),e[4]||(e[4]=t("div",{class:"absolute top-0 right-0 w-64 h-32 bg-gradient-to-bl from-cyan-100/40 to-transparent rounded-bl-full"},null,-1)),e[5]||(e[5]=t("div",{class:"absolute bottom-0 left-0 w-48 h-24 bg-gradient-to-tr from-blue-100/30 to-transparent rounded-tr-full"},null,-1)),t("div",N,[t("div",U,[e[2]||(e[2]=t("div",{class:"w-14 h-14 bg-gradient-to-br from-cyan-500 via-cyan-600 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-cyan-100"},[t("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t("div",null,[D(n(S),{href:"/client/support-tickets",class:"inline-flex items-center text-cyan-600 hover:text-cyan-700 mb-2 font-medium transition-colors duration-200"},{default:u(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),B(" Back to Tickets ",-1)])]),_:1}),t("h1",I,o(s.ticket.ticket_number),1),t("p",V,o(s.ticket.subject),1),t("div",L,[t("span",{class:x(["px-3 py-1 text-xs font-semibold rounded-full",b[s.ticket.status]])},o(f(s.ticket.status)),3),t("span",{class:x(["px-3 py-1 text-xs font-semibold rounded-full",y[s.ticket.priority]])},o(p(s.ticket.priority)),3)])])])])])]),default:u(()=>[t("div",F,[t("div",R,[t("div",E,[t("div",O,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Ticket Details",-1)),t("div",P,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-gray-600 text-sm font-medium"},"Category",-1)),t("p",$,o(k(s.ticket.category)),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-gray-600 text-sm font-medium"},"Created",-1)),t("p",q,o(m(s.ticket.created_at)),1)]),s.ticket.assigned_to?(l(),d("div",G,[e[8]||(e[8]=t("p",{class:"text-gray-600 text-sm font-medium"},"Assigned To",-1)),t("p",H,o(s.ticket.assigned_to.first_name)+" "+o(s.ticket.assigned_to.last_name),1)])):g("",!0),s.ticket.resolved_at?(l(),d("div",J,[e[9]||(e[9]=t("p",{class:"text-gray-600 text-sm font-medium"},"Resolved",-1)),t("p",K,o(m(s.ticket.resolved_at)),1)])):g("",!0)]),t("div",Q,[e[10]||(e[10]=t("h4",{class:"text-base font-semibold text-gray-900 mb-3"},"Description",-1)),t("p",W,o(s.ticket.description),1)])]),t("div",X,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Conversation",-1)),t("div",Y,[(l(!0),d(_,null,C(s.ticket.replies,r=>(l(),d("div",{key:r.id,class:"flex gap-4"},[t("div",Z,[t("span",tt,o(r.user.first_name.charAt(0)),1)]),t("div",et,[t("div",st,[t("p",ot,o(r.user.first_name)+" "+o(r.user.last_name),1),t("span",it,o(m(r.created_at)),1)]),t("p",rt,o(r.message),1)])]))),128)),!s.ticket.replies||s.ticket.replies.length===0?(l(),d("div",at,[...e[12]||(e[12]=[t("p",{class:"text-gray-500"},"No replies yet",-1)])])):g("",!0)]),t("form",{onSubmit:T(h,["prevent"]),class:"border-t border-gray-200 pt-4"},[j(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=r=>n(a).message=r),placeholder:"Add a reply...",rows:"4",class:x(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200",{"border-red-500":n(a).errors.message}])},null,2),[[A,n(a).message]]),n(a).errors.message?(l(),d("p",lt,o(n(a).errors.message),1)):g("",!0),t("button",{type:"submit",disabled:n(a).processing,class:"mt-3 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium"},o(n(a).processing?"Sending...":"Send Reply"),9,nt)],32)])]),t("div",dt,[t("div",ct,[e[18]||(e[18]=t("h4",{class:"font-semibold text-gray-900 mb-3"},"Ticket Info",-1)),t("div",gt,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-gray-600"},"Ticket Number",-1)),t("p",mt,o(s.ticket.ticket_number),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-gray-600"},"Status",-1)),t("p",ut,o(s.ticket.status.replace("_"," ")),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-gray-600"},"Priority",-1)),t("p",xt,o(s.ticket.priority),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-gray-600"},"Category",-1)),t("p",bt,o(s.ticket.category),1)])])]),s.ticket.assigned_to?(l(),d("div",yt,[e[19]||(e[19]=t("h4",{class:"font-semibold text-gray-900 mb-3"},"Assigned To",-1)),t("div",ft,[t("div",pt,[t("span",kt,o(s.ticket.assigned_to.first_name.charAt(0)),1)]),t("div",null,[t("p",ht,o(s.ticket.assigned_to.first_name)+" "+o(s.ticket.assigned_to.last_name),1),t("p",vt,o(s.ticket.assigned_to.email),1)])])])):g("",!0)])])])]),_:1}))}};export{jt as default};

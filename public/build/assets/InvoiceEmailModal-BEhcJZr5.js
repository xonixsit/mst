import{r as N,m as B,c as a,b as e,a as c,u,t as l,j as T,k as g,v as p,g as f,f as n,e as A,N as M,o as i}from"./app-BSz5IB2B.js";import{r as V}from"./PaperAirplaneIcon-DVFErOC4.js";import{r as $}from"./XMarkIcon-D-BH2_RC.js";import{r as O}from"./CreditCardIcon-F11YU6jv.js";import{r as U}from"./EyeIcon-BoqOj1Z3.js";const z={class:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-start justify-center p-4 pt-8 overflow-y-auto"},F={class:"relative w-full max-w-2xl bg-white shadow-2xl rounded-2xl border border-gray-100 overflow-hidden transform transition-all flex flex-col mb-8"},q={class:"bg-gradient-to-r from-slate-50 via-emerald-50 to-green-50 px-6 py-5 border-b border-gray-200 relative overflow-hidden"},H={class:"relative flex items-center justify-between"},L={class:"flex items-center space-x-3"},R={class:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg"},Y={class:"text-sm text-gray-600 font-medium"},G={class:"p-8 max-h-[70vh] overflow-y-auto"},J={class:"space-y-2"},K={class:"space-y-2"},Q={class:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 border border-blue-200"},W={class:"flex items-center mb-4"},X={class:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3"},Z={class:"space-y-4"},ee={class:"space-y-2"},te={key:0,class:"space-y-3"},oe={class:"space-y-2"},se={class:"space-y-2"},re={class:"bg-gradient-to-br from-gray-50 to-slate-100 rounded-xl p-6 border border-gray-200"},le={class:"flex items-center mb-4"},ne={class:"w-8 h-8 bg-gray-500 rounded-lg flex items-center justify-center mr-3"},ie={class:"bg-white rounded-lg p-4 border border-gray-200 text-sm"},ae={class:"border-b border-gray-200 pb-3 mb-3"},de={class:"space-y-3"},ue={key:0,class:"bg-blue-50 p-3 rounded border-l-4 border-blue-400"},me={key:1,class:"bg-green-50 p-4 rounded-lg border border-green-200"},be={class:"mt-2 p-2 bg-white rounded border"},ce=["href"],ge={key:0,class:"text-green-600 text-sm mt-2"},pe={class:"flex justify-end gap-3 pt-6 border-t border-gray-200 bg-white sticky bottom-0 -mx-8 px-8 -mb-8 pb-8"},fe=["disabled"],ye={key:1,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xe={key:2},ve={key:3},Ce={__name:"InvoiceEmailModal",props:{invoice:Object},emits:["close","sent"],setup(m,{emit:P}){var w,h,k;const b=m,x=P,d=N(!1),v=r=>parseFloat(r||0).toFixed(2),o=B({email:((w=b.invoice)==null?void 0:w.send_to_email)||"",subject:`Invoice ${((h=b.invoice)==null?void 0:h.invoice_number)||"N/A"} - $${v(((k=b.invoice)==null?void 0:k.total_amount)||0)}`,message:"",payment_link:"",due_date:""}),y=new Date;y.setDate(y.getDate()+30),o.due_date=y.toISOString().split("T")[0];const I=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",E=()=>{var r;if(!((r=b.invoice)!=null&&r.id)){console.error("Invoice ID is missing");return}d.value=!0,M.post(`/admin/invoices/${b.invoice.id}/send-email`,o,{onSuccess:()=>{x("sent"),x("close")},onError:t=>{console.error("Failed to send invoice:",t),d.value=!1},onFinish:()=>{d.value=!1}})};return(r,t)=>{var _,D,C,j,S;return i(),a("div",z,[e("div",F,[e("div",q,[t[8]||(t[8]=e("div",{class:"absolute top-0 right-0 w-32 h-16 bg-gradient-to-bl from-emerald-100/40 to-transparent rounded-bl-full"},null,-1)),e("div",H,[e("div",L,[e("div",R,[c(u(V),{class:"w-5 h-5 text-white"})]),e("div",null,[t[7]||(t[7]=e("h3",{class:"text-xl font-bold bg-gradient-to-r from-gray-900 via-emerald-900 to-green-900 bg-clip-text text-transparent"},"Send Invoice",-1)),e("p",Y,"Email invoice "+l(m.invoice.invoice_number)+" to client",1)])]),e("button",{onClick:t[0]||(t[0]=s=>r.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200"},[c(u($),{class:"w-5 h-5"})])])]),e("div",G,[e("form",{onSubmit:T(E,["prevent"]),class:"space-y-6"},[e("div",J,[t[9]||(t[9]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Recipient Email",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.email=s),type:"email",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 text-gray-900",placeholder:"client@example.com"},null,512),[[p,o.email]])]),e("div",K,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Subject",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.subject=s),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 text-gray-900"},null,512),[[p,o.subject]])]),e("div",Q,[e("div",W,[e("div",X,[c(u(O),{class:"w-4 h-4 text-white"})]),t[11]||(t[11]=e("h4",{class:"text-lg font-bold text-blue-900"},"Payment Options",-1))]),e("div",Z,[e("div",ee,[t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-blue-700"},"Payment Link (Optional)",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.payment_link=s),type:"url",placeholder:"https://your-payment-gateway.com/invoice/...",class:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900"},null,512),[[p,o.payment_link]]),t[13]||(t[13]=e("p",{class:"text-xs text-blue-600"},"Enter a custom payment link for this invoice",-1))]),o.payment_link?(i(),a("div",te,[t[15]||(t[15]=e("div",{class:"text-sm text-blue-600"},[e("p",{class:"font-medium"},"Payment methods available:"),e("ul",{class:"list-disc list-inside mt-1 space-y-1"},[e("li",null,"Credit/Debit Cards (Visa, MasterCard, Amex)"),e("li",null,"Bank Transfer (ACH)"),e("li",null,"PayPal")])],-1)),e("div",oe,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-blue-700"},"Payment Due Date",-1)),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.due_date=s),type:"date",class:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900"},null,512),[[p,o.due_date]])])])):f("",!0)])]),e("div",se,[t[16]||(t[16]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Custom Message (Optional)",-1)),g(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.message=s),rows:"4",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 text-gray-900 placeholder-gray-500 resize-none",placeholder:"Add a personal message to your client..."},null,512),[[p,o.message]])]),e("div",re,[e("div",le,[e("div",ne,[c(u(U),{class:"w-4 h-4 text-white"})]),t[17]||(t[17]=e("h4",{class:"text-lg font-bold text-gray-900"},"Email Preview",-1))]),e("div",ie,[e("div",ae,[e("p",null,[t[18]||(t[18]=e("strong",null,"To:",-1)),n(" "+l(o.email),1)]),e("p",null,[t[19]||(t[19]=e("strong",null,"Subject:",-1)),n(" "+l(o.subject),1)])]),e("div",de,[e("p",null,"Dear "+l(((C=(D=(_=m.invoice)==null?void 0:_.client)==null?void 0:D.user)==null?void 0:C.first_name)||"Valued Client")+",",1),o.message?(i(),a("p",ue,l(o.message),1)):f("",!0),e("p",null,[t[20]||(t[20]=n("Please find attached your invoice ",-1)),e("strong",null,l(((j=m.invoice)==null?void 0:j.invoice_number)||"N/A"),1),t[21]||(t[21]=n(" for the amount of ",-1)),e("strong",null,"$"+l(v(((S=m.invoice)==null?void 0:S.total_amount)||0)),1),t[22]||(t[22]=n(".",-1))]),o.payment_link?(i(),a("div",me,[t[24]||(t[24]=e("p",{class:"font-semibold text-green-800 mb-2"},"ðŸ’³ Pay Online Securely",-1)),t[25]||(t[25]=e("p",{class:"text-green-700 text-sm"},"Click the payment link below to pay securely online using your preferred payment method.",-1)),e("div",be,[e("a",{href:o.payment_link,class:"text-blue-600 text-sm font-medium hover:underline",target:"_blank"},l(o.payment_link),9,ce)]),o.due_date?(i(),a("p",ge,[t[23]||(t[23]=e("strong",null,"Due Date:",-1)),n(" "+l(I(o.due_date)),1)])):f("",!0)])):f("",!0),t[26]||(t[26]=e("p",null,"Thank you for your business!",-1)),t[27]||(t[27]=e("p",null,[n("Best regards,"),e("br"),n("Your Tax Professional")],-1))])])]),e("div",pe,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>r.$emit("close")),class:"bg-gradient-to-r from-gray-500 to-slate-600 hover:from-gray-600 hover:to-slate-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center"},[c(u($),{class:"w-4 h-4 mr-2"}),t[28]||(t[28]=n(" Cancel ",-1))]),e("button",{type:"submit",disabled:d.value,class:"bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center"},[d.value?(i(),a("svg",ye,[...t[29]||(t[29]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),A(u(V),{key:0,class:"w-4 h-4 mr-2"})),d.value?(i(),a("span",xe,"Sending Invoice...")):(i(),a("span",ve,"Send Invoice"))],8,fe)])],32)])])])}}};export{Ce as _};

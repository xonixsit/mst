import{l as w,m as _,c as u,a as e,d as p,u as l,t as i,g as k,h as d,j as P,k as C,v as b,e as $,b as j,N as S,o as m}from"./app-D74OuL-2.js";import{r as V}from"./InvoiceEmailModal-CsJ3SvsB.js";import{r as x}from"./XMarkIcon-C1-90HQG.js";import{r as D}from"./CurrencyDollarIcon-DfA4FUbg.js";import{r as I}from"./CheckCircleIcon-oyCiv9Q1.js";const N={class:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-start justify-center p-4 pt-8 overflow-y-auto"},M={class:"relative w-full max-w-2xl bg-white shadow-2xl rounded-2xl border border-gray-100 overflow-hidden transform transition-all flex flex-col mb-8"},B={class:"bg-gradient-to-r from-slate-50 via-green-50 to-emerald-50 px-6 py-5 border-b border-gray-200 relative overflow-hidden"},A={class:"relative flex items-center justify-between"},T={class:"flex items-center space-x-3"},O={class:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg"},U={class:"text-sm text-gray-600 font-medium"},z={class:"p-8 max-h-[70vh] overflow-y-auto"},F={class:"space-y-2"},R={class:"space-y-2"},q={class:"space-y-2"},E={class:"space-y-2"},H={class:"relative"},G=["placeholder"],J={class:"text-xs text-gray-500"},K={class:"space-y-2"},L={class:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6 border border-green-200"},Q={class:"flex items-center mb-4"},W={class:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center mr-3"},X={class:"space-y-3"},Y={class:"flex justify-between items-center py-2 border-b border-green-200/50"},Z={class:"text-sm font-bold text-green-900"},ee={class:"flex justify-between items-center py-2 border-b border-green-200/50"},te={class:"text-sm font-bold text-green-900"},oe={class:"flex justify-between items-center py-2 border-b border-green-200/50"},se={class:"text-sm font-bold text-green-900"},ne={class:"flex justify-end gap-3 pt-6 border-t border-gray-200 bg-white sticky bottom-0 -mx-8 px-8 -mb-8 pb-8"},re=["disabled"],ae={key:1,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},le={key:2},ie={key:3},be={__name:"PaymentModal",props:{invoice:Object},emits:["close","paid"],setup(r,{emit:v}){var y;const f=r,g=v,a=w(!1),o=_({payment_method:"",transaction_id:"",payment_date:new Date().toISOString().split("T")[0],amount_paid:((y=f.invoice)==null?void 0:y.total_amount)||0,payment_notes:""}),c=n=>parseFloat(n||0).toFixed(2),h=()=>{var n;if(!((n=f.invoice)!=null&&n.id)){console.error("Invoice ID is missing");return}a.value=!0,S.post(`/admin/invoices/${f.invoice.id}/mark-paid`,o,{onSuccess:()=>{g("paid"),g("close")},onError:t=>{console.error("Failed to record payment:",t),a.value=!1},onFinish:()=>{a.value=!1}})};return(n,t)=>(m(),u("div",N,[e("div",M,[e("div",B,[t[8]||(t[8]=e("div",{class:"absolute top-0 right-0 w-32 h-16 bg-gradient-to-bl from-green-100/40 to-transparent rounded-bl-full"},null,-1)),e("div",A,[e("div",T,[e("div",O,[p(l(V),{class:"w-5 h-5 text-white"})]),e("div",null,[t[7]||(t[7]=e("h3",{class:"text-xl font-bold bg-gradient-to-r from-gray-900 via-green-900 to-emerald-900 bg-clip-text text-transparent"},"Record Payment",-1)),e("p",U,"Mark invoice "+i(r.invoice.invoice_number)+" as paid",1)])]),e("button",{onClick:t[0]||(t[0]=s=>n.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200"},[p(l(x),{class:"w-5 h-5"})])])]),e("div",z,[e("form",{onSubmit:k(h,["prevent"]),class:"space-y-6"},[e("div",F,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Payment Method *",-1)),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.payment_method=s),required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-gray-900"},[...t[9]||(t[9]=[C('<option value="">Select Payment Method</option><option value="cash">Cash</option><option value="check">Check</option><option value="credit_card">Credit Card</option><option value="debit_card">Debit Card</option><option value="bank_transfer">Bank Transfer</option><option value="online_payment">Online Payment</option><option value="other">Other</option>',8)])],512),[[P,o.payment_method]])]),e("div",R,[t[11]||(t[11]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Transaction ID / Reference Number",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.transaction_id=s),type:"text",placeholder:"Enter transaction ID, check number, or reference",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-gray-900"},null,512),[[b,o.transaction_id]])]),e("div",q,[t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Payment Date *",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.payment_date=s),type:"date",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-gray-900"},null,512),[[b,o.payment_date]])]),e("div",E,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Amount Paid *",-1)),e("div",H,[t[13]||(t[13]=e("span",{class:"absolute left-4 top-3.5 text-gray-500 font-medium"},"$",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.amount_paid=s),type:"number",step:"0.01",min:"0",required:"",class:"w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-gray-900",placeholder:c(r.invoice.total_amount)},null,8,G),[[b,o.amount_paid]])]),e("p",J,"Invoice total: $"+i(c(r.invoice.total_amount)),1)]),e("div",K,[t[15]||(t[15]=e("label",{class:"block text-sm font-semibold text-gray-700"},"Payment Notes (Optional)",-1)),d(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.payment_notes=s),rows:"3",placeholder:"Add any additional notes about this payment...",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-gray-900 placeholder-gray-500 resize-none"},null,512),[[b,o.payment_notes]])]),e("div",L,[e("div",Q,[e("div",W,[p(l(D),{class:"w-5 h-5 text-white"})]),t[16]||(t[16]=e("h3",{class:"text-lg font-bold text-green-900"},"Payment Summary",-1))]),e("div",X,[e("div",Y,[t[17]||(t[17]=e("span",{class:"text-sm font-semibold text-green-700"},"Invoice Number:",-1)),e("span",Z,i(r.invoice.invoice_number),1)]),e("div",ee,[t[18]||(t[18]=e("span",{class:"text-sm font-semibold text-green-700"},"Invoice Total:",-1)),e("span",te,"$"+i(c(r.invoice.total_amount)),1)]),e("div",oe,[t[19]||(t[19]=e("span",{class:"text-sm font-semibold text-green-700"},"Amount Being Paid:",-1)),e("span",se,"$"+i(c(o.amount_paid||0)),1)]),t[20]||(t[20]=e("div",{class:"flex justify-between items-center py-3 border-t-2 border-green-300"},[e("span",{class:"text-lg font-bold text-green-900"},"Status After Payment:"),e("span",{class:"text-lg font-bold text-green-600"},"PAID")],-1))])]),e("div",ne,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>n.$emit("close")),class:"bg-gradient-to-r from-gray-500 to-slate-600 hover:from-gray-600 hover:to-slate-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center"},[p(l(x),{class:"w-4 h-4 mr-2"}),t[21]||(t[21]=$(" Cancel ",-1))]),e("button",{type:"submit",disabled:a.value,class:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center"},[a.value?(m(),u("svg",ae,[...t[22]||(t[22]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),j(l(I),{key:0,class:"w-4 h-4 mr-2"})),a.value?(m(),u("span",le,"Recording Payment...")):(m(),u("span",ie,"Record Payment"))],8,re)])],32)])])]))}};export{be as _};
